<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>管理界面</title>
    <script type="text/javascript" src="../static/extlib/jquery-3.4.1/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="../static/extlib/echarts/echarts.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            //测试添加用户功能
            $("#add").click(function () {
                let model = {
                    adminName:"dick",
                    password:"123456",
                    email:"shit"
                };
                let jsonStr = JSON.stringify(model);
                alert(jsonStr);
                $.ajax({
                    url:"addAdmin",
                    type:"post",
                    data:jsonStr,
                    dataType:"text",
                    contentType:"application/json;charset=UTF-8",
                    async:false,
                    success:function () {
                        alert("添加成功");
                    }
                })
            });

            //测试用户删除功能
            $("#delete").click(function () {
                let model = {
                    adminName: "Tom",
                    password: "123456"
                };
                let jsonStr = JSON.stringify(model);
                alert(jsonStr);
                $.ajax({
                    url: "deleteAdmin",
                    type: "post",
                    data: jsonStr,
                    dataType: "text",
                    contentType:"application/json;charset=UTF-8",
                    async:false,
                    success:function () {
                        alert("删除成功");
                    }
                })
            });

            //测试读取excel文件内容
            $("#saveToDatabase").click(function () {
                $.ajax({
                    url:"addToDatabaseByFile",
                    type:"post",
                    data:"admin.xlsx",
                    dataType:"text",
                    contentType:"application/json;charset=UTF-8",
                    async:false
                })
            });
        })
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            let chartDom = $("#testChart");
            let testChart = echarts.init(chartDom);
        })
    </script>
</head>
<body>
    <h1>This is a fucking manage html</h1>
    <ul th:each="tmpAdmin, adminStat:${session.allAdmins}">
        <li th:text="${tmpAdmin.adminName}"></li>
        <li th:text="${tmpAdmin.email}"></li>
    </ul>
    <button id="add">添加</button><br>
    <button id="delete">删除</button>
    <form enctype="multipart/form-data" method="post" action="/templateUpload">
        <input type="file" name="template">
        <button type="submit">上传模板</button>
    </form><br>
    <a href="/templateDownload">下载模板</a>
    <form enctype="multipart/form-data" method="post" action="/dataFileUpload">
        <input type="file" name="dataFile">
        <button type="submit">上传数据文件</button>
    </form><br>
    <button id="saveToDatabase" type="button">保存数据文件</button>
    <div id="testChart"></div>
</body>
</html>