/*!
 * 
 *          iclient-ol.(https://iclient.supermap.io)
 *          CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.0.1
 *         
 */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=60)}([function(e,t){e.exports=ol.style.Style},function(e,t){e.exports=ol.format.GeoJSON},function(e,t){e.exports=ol.style.Fill},function(e,t){e.exports=ol.geom.Point},function(e,t){e.exports=ol.style.Stroke},function(e,t){e.exports=ol.layer},function(e,t){e.exports=ol.source},function(e,t){e.exports=ol.tilegrid.TileGrid},function(e,t){e.exports=ol.proj},function(e,t){e.exports=ol.style.Circle},function(e,t){e.exports=ol.Feature},function(e,t){e.exports=ol.format.MVT},function(e,t){e.exports=ol.style.Icon},function(e,t){e.exports=ol.style.Text},function(e,t){e.exports=ol.Observable},function(e,t){e.exports=ol.geom.Geometry},function(e,t){e.exports=ol.source.ImageCanvas},function(e,t){e.exports=ol.style},function(e,t){e.exports=ol.Map},function(e,t){e.exports=ol.source.TileImage},function(e,t){e.exports=ol.size},function(e,t){e.exports=ol.Object},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t){e.exports=ol.tilegrid.WMTS},function(e,t){e.exports=ol.geom.LineString},function(e,t){e.exports=ol.control.Control},function(e,t){e.exports=ol.tilegrid},function(e,t){e.exports=ol.source.Vector},function(e,t){e.exports=ol.util},function(e,t){e.exports=ol.proj.proj4},function(e,t,r){var n,o,i;o=[t,e],void 0===(i="function"==typeof(n=function(e,t){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||r.timeout,s=t.jsonpCallback||r.jsonpCallback,l=void 0;return new Promise(function(r,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){r({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+s+"="+c),t.charset&&h.setAttribute("charset",t.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),l=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),h.onerror=function(){u(new Error("JSONP request to "+e+" failed")),n(c),o(f),l&&clearTimeout(l)}})}})?n.apply(t,o):n)||(e.exports=i)},function(e,t){e.exports=function(){try{return XLSX}catch(e){return{}}}()},function(e,t){e.exports=ol.extent},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return turf}catch(e){return{}}}()},function(e,t){e.exports=ol.View},function(e,t){e.exports=ol.format.WMTSCapabilities},function(e,t){e.exports=ol.geom},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t,r){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=9007199254740991,o="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",s="[object Map]",l="[object Set]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,f="object"==(void 0===t?"undefined":r(t))&&t&&t.Object===Object&&t,h="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,p=f||h||Function("return this")();function y(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,function(t){return[t,e[t]]})}var d,m,v,b=Function.prototype,g=Object.prototype,S=p["__core-js_shared__"],w=(d=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",_=b.toString,O=g.hasOwnProperty,x=g.toString,C=RegExp("^"+_.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=g.propertyIsEnumerable,P=(m=Object.keys,v=Object,function(e){return m(v(e))}),E=U(p,"DataView"),k=U(p,"Map"),M=U(p,"Promise"),j=U(p,"Set"),A=U(p,"WeakMap"),R=z(E),L=z(k),I=z(M),N=z(j),F=z(A);function D(e,t){var n=q(e)||function(e){return function(e){return function(e){return!!e&&"object"==r(e)}(e)&&J(e)}(e)&&O.call(e,"callee")&&(!T.call(e,"callee")||x.call(e)==o)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=n.length,a=!!i;for(var s in e)!t&&!O.call(e,s)||a&&("length"==s||H(s,i))||n.push(s);return n}function G(e){return!(!Y(e)||w&&w in e)&&(W(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:u).test(z(e))}function B(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||g,t!==n)return P(e);var t,r,n,o=[];for(var i in Object(e))O.call(e,i)&&"constructor"!=i&&o.push(i);return o}function U(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return G(r)?r:void 0}var V=function(e){return x.call(e)};function H(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function z(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(E&&"[object DataView]"!=V(new E(new ArrayBuffer(1)))||k&&V(new k)!=s||M&&"[object Promise]"!=V(M.resolve())||j&&V(new j)!=l||A&&"[object WeakMap]"!=V(new A))&&(V=function(e){var t=x.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?z(r):void 0;if(n)switch(n){case R:return"[object DataView]";case L:return s;case I:return"[object Promise]";case N:return l;case F:return"[object WeakMap]"}return t});var q=Array.isArray;function J(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!W(e)}function W(e){var t=Y(e)?x.call(e):"";return t==i||t==a}function Y(e){var t=r(e);return!!e&&("object"==t||"function"==t)}var X,Q=(X=function(e){return J(e)?D(e):B(e)},function(e){var t,r,n,o=V(e);return o==s?(t=e,r=-1,n=Array(t.size),t.forEach(function(e,t){n[++r]=[t,e]}),n):o==l?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(e):y(e,X(e))});e.exports=Q}).call(this,r(22))},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t){e.exports=ol.control.ScaleLine},function(e,t){e.exports=ol.AssertionError},function(e,t){e.exports=function(){try{return canvg}catch(e){return{}}}()},function(e,t){e.exports=ol.layer.Group},function(e,t){e.exports=ol.asserts},function(e,t){e.exports=ol.source.XYZ},function(e,t){e.exports=ol.source.WMTS},function(e,t){e.exports=ol.style.RegularShape},function(e,t){e.exports=ol.render},function(e,t){e.exports=ol.geom.Polygon},function(e,t){e.exports=ol.layer.Image},function(e,t){e.exports=ol.interaction.Pointer},function(e,t){e.exports=ol.source.VectorTile},function(e,t){e.exports=ol.proj.Projection},function(e,t,r){(function(e,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,l=2,u=1/0,c=9007199254740991,f="[object Arguments]",h="[object Array]",p="[object Boolean]",y="[object Date]",d="[object Error]",m="[object Function]",v="[object GeneratorFunction]",b="[object Map]",g="[object Number]",S="[object Object]",w="[object RegExp]",_="[object Set]",O="[object String]",x="[object Symbol]",C="[object ArrayBuffer]",T="[object DataView]",P=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,k=/^\./,M=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,j=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[f]=L[h]=L[C]=L[p]=L[T]=L[y]=L[d]=L[m]=L[b]=L[g]=L[S]=L[w]=L[_]=L[O]=L["[object WeakMap]"]=!1;var I="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e,N="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,F=I||N||Function("return this")(),D="object"==n(t)&&t&&!t.nodeType&&t,G=D&&"object"==n(r)&&r&&!r.nodeType&&r,B=G&&G.exports===D&&I.process,U=function(){try{return B&&B.binding("util")}catch(e){}}(),V=U&&U.isTypedArray;function H(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function z(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function q(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function J(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var W,Y,X,Q=Array.prototype,K=Function.prototype,Z=Object.prototype,$=F["__core-js_shared__"],ee=(W=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",te=K.toString,re=Z.hasOwnProperty,ne=Z.toString,oe=RegExp("^"+te.call(re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=F.Symbol,ae=F.Uint8Array,se=Z.propertyIsEnumerable,le=Q.splice,ue=(Y=Object.keys,X=Object,function(e){return Y(X(e))}),ce=Be(F,"DataView"),fe=Be(F,"Map"),he=Be(F,"Promise"),pe=Be(F,"Set"),ye=Be(F,"WeakMap"),de=Be(Object,"create"),me=Xe(ce),ve=Xe(fe),be=Xe(he),ge=Xe(pe),Se=Xe(ye),we=ie?ie.prototype:void 0,_e=we?we.valueOf:void 0,Oe=we?we.toString:void 0;function xe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=e?e.length:0;for(this.__data__=new Te;++t<r;)this.add(e[t])}function Ee(e){this.__data__=new Ce(e)}function ke(e,t){var r=et(e)||$e(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!re.call(e,i)||o&&("length"==i||Ve(i,n))||r.push(i);return r}function Me(e,t){for(var r=e.length;r--;)if(Ze(e[r][0],t))return r;return-1}function je(e,t){for(var r=0,n=(t=He(t,e)?[t]:Fe(t)).length;null!=e&&r<n;)e=e[Ye(t[r++])];return r&&r==n?e:void 0}function Ae(e,t){return null!=e&&t in Object(e)}function Re(e,t,r,n,o){return e===t||(null==e||null==t||!ot(e)&&!it(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var a=et(e),u=et(t),c=h,m=h;a||(c=(c=Ue(e))==f?S:c);u||(m=(m=Ue(t))==f?S:m);var v=c==S&&!z(e),P=m==S&&!z(t),E=c==m;if(E&&!v)return i||(i=new Ee),a||st(e)?De(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case T:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!n(new ae(e),new ae(t)));case p:case y:case g:return Ze(+e,+t);case d:return e.name==t.name&&e.message==t.message;case w:case O:return e==t+"";case b:var u=q;case _:var c=i&l;if(u||(u=J),e.size!=t.size&&!c)return!1;var f=a.get(e);if(f)return f==t;i|=s,a.set(e,t);var h=De(u(e),u(t),n,o,i,a);return a.delete(e),h;case x:if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,c,r,n,o,i);if(!(o&l)){var k=v&&re.call(e,"__wrapped__"),M=P&&re.call(t,"__wrapped__");if(k||M){var j=k?e.value():e,A=M?t.value():t;return i||(i=new Ee),r(j,A,n,o,i)}}if(!E)return!1;return i||(i=new Ee),function(e,t,r,n,o,i){var a=o&l,s=lt(e),u=s.length,c=lt(t).length;if(u!=c&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in t:re.call(t,h)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var y=!0;i.set(e,t),i.set(t,e);for(var d=a;++f<u;){h=s[f];var m=e[h],v=t[h];if(n)var b=a?n(v,m,h,t,e,i):n(m,v,h,e,t,i);if(!(void 0===b?m===v||r(m,v,n,o,i):b)){y=!1;break}d||(d="constructor"==h)}if(y&&!d){var g=e.constructor,S=t.constructor;g!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof S&&S instanceof S)&&(y=!1)}return i.delete(e),i.delete(t),y}(e,t,r,n,o,i)}(e,t,Re,r,n,o))}function Le(e){return!(!ot(e)||ee&&ee in e)&&(rt(e)||z(e)?oe:A).test(Xe(e))}function Ie(e){return"function"==typeof e?e:null==e?ut:"object"==n(e)?et(e)?function(e,t){if(He(e)&&ze(t))return qe(Ye(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:je(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){var n,o=-1,i=(t=He(t,e)?[t]:Fe(t)).length;for(;++o<i;){var a=Ye(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(i=e?e.length:0)&&nt(i)&&Ve(a,i)&&(et(e)||$e(e))}(e,t,Ae)}(r,e):Re(t,n,void 0,s|l)}}(e[0],e[1]):function(e){var t=function(e){var t=lt(e),r=t.length;for(;r--;){var n=t[r],o=e[n];t[r]=[n,o,ze(o)]}return t}(e);if(1==t.length&&t[0][2])return qe(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var u=r[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var c=(u=r[o])[0],f=e[c],h=u[1];if(a&&u[2]){if(void 0===f&&!(c in e))return!1}else{var p=new Ee;if(n)var y=n(f,h,c,e,t,p);if(!(void 0===y?Re(h,f,n,s|l,p):y))return!1}}return!0}(r,e,t)}}(e):He(t=e)?(r=Ye(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return je(t,e)}}(t);var t,r}function Ne(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||Z,t!==n)return ue(e);var t,r,n,o=[];for(var i in Object(e))re.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Fe(e){return et(e)?e:We(e)}function De(e,t,r,n,o,i){var a=o&l,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var f=i.get(e);if(f&&i.get(t))return f==t;var h=-1,p=!0,y=o&s?new Pe:void 0;for(i.set(e,t),i.set(t,e);++h<u;){var d=e[h],m=t[h];if(n)var v=a?n(m,d,h,t,e,i):n(d,m,h,e,t,i);if(void 0!==v){if(v)continue;p=!1;break}if(y){if(!H(t,function(e,t){if(!y.has(t)&&(d===e||r(d,e,n,o,i)))return y.add(t)})){p=!1;break}}else if(d!==m&&!r(d,m,n,o,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Ge(e,t){var r,o,i=e.__data__;return("string"==(o=n(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Be(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Le(r)?r:void 0}xe.prototype.clear=function(){this.__data__=de?de(null):{}},xe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},xe.prototype.get=function(e){var t=this.__data__;if(de){var r=t[e];return r===a?void 0:r}return re.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return de?void 0!==t[e]:re.call(t,e)},xe.prototype.set=function(e,t){return this.__data__[e]=de&&void 0===t?a:t,this},Ce.prototype.clear=function(){this.__data__=[]},Ce.prototype.delete=function(e){var t=this.__data__,r=Me(t,e);return!(r<0||(r==t.length-1?t.pop():le.call(t,r,1),0))},Ce.prototype.get=function(e){var t=this.__data__,r=Me(t,e);return r<0?void 0:t[r][1]},Ce.prototype.has=function(e){return Me(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var r=this.__data__,n=Me(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Te.prototype.clear=function(){this.__data__={hash:new xe,map:new(fe||Ce),string:new xe}},Te.prototype.delete=function(e){return Ge(this,e).delete(e)},Te.prototype.get=function(e){return Ge(this,e).get(e)},Te.prototype.has=function(e){return Ge(this,e).has(e)},Te.prototype.set=function(e,t){return Ge(this,e).set(e,t),this},Pe.prototype.add=Pe.prototype.push=function(e){return this.__data__.set(e,a),this},Pe.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new Ce},Ee.prototype.delete=function(e){return this.__data__.delete(e)},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ce){var n=r.__data__;if(!fe||n.length<o-1)return n.push([e,t]),this;r=this.__data__=new Te(n)}return r.set(e,t),this};var Ue=function(e){return ne.call(e)};function Ve(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function He(e,t){if(et(e))return!1;var r=n(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!at(e))||(E.test(e)||!P.test(e)||null!=t&&e in Object(t))}function ze(e){return e==e&&!ot(e)}function qe(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function Je(e,t){return 1==t.length?e:je(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(ce&&Ue(new ce(new ArrayBuffer(1)))!=T||fe&&Ue(new fe)!=b||he&&"[object Promise]"!=Ue(he.resolve())||pe&&Ue(new pe)!=_||ye&&"[object WeakMap]"!=Ue(new ye))&&(Ue=function(e){var t=ne.call(e),r=t==S?e.constructor:void 0,n=r?Xe(r):void 0;if(n)switch(n){case me:return T;case ve:return b;case be:return"[object Promise]";case ge:return _;case Se:return"[object WeakMap]"}return t});var We=Ke(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(at(e))return Oe?Oe.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}(t);var r=[];return k.test(e)&&r.push(""),e.replace(M,function(e,t,n,o){r.push(n?o.replace(j,"$1"):t||e)}),r});function Ye(e){if("string"==typeof e||at(e))return e;var t=e+"";return"0"==t&&1/e==-u?"-0":t}function Xe(e){if(null!=e){try{return te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Qe(e){var t=e?e.length:0;return t?e[t-1]:void 0}function Ke(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(i);var r=function r(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Ke.Cache||Te),r}function Ze(e,t){return e===t||e!=e&&t!=t}function $e(e){return function(e){return it(e)&&tt(e)}(e)&&re.call(e,"callee")&&(!se.call(e,"callee")||ne.call(e)==f)}Ke.Cache=Te;var et=Array.isArray;function tt(e){return null!=e&&nt(e.length)&&!rt(e)}function rt(e){var t=ot(e)?ne.call(e):"";return t==m||t==v}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function ot(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function it(e){return!!e&&"object"==n(e)}function at(e){return"symbol"==n(e)||it(e)&&ne.call(e)==x}var st=V?function(e){return function(t){return e(t)}}(V):function(e){return it(e)&&nt(e.length)&&!!L[ne.call(e)]};function lt(e){return tt(e)?ke(e):Ne(e)}function ut(e){return e}r.exports=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],i=e.length;for(t=Ie(t);++n<i;){var a=e[n];t(a,n,e)&&(r.push(a),o.push(n))}return function(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==i){var i=o;if(Ve(o))le.call(e,o,1);else if(He(o,e))delete e[Ye(o)];else{var a=Fe(o),s=Je(e,a);null!=s&&delete s[Ye(Qe(a))]}}}}(e,o),r}}).call(this,r(22),r(66)(e))},function(e){e.exports=JSON.parse('[{"name":"é»é¾æ±ç","coord":[127.64559817675396,48.48668098449708]},{"name":"åèå¤èªæ²»åº","coord":[118.34519572208615,45.370218276977525]},{"name":"æ°çç»´å¾å°èªæ²»åº","coord":[87.13479065593184,41.75497055053711]},{"name":"åæç","coord":[126.12985278813787,43.57983207702637]},{"name":"è¾½å®ç","coord":[124.02494773936439,41.105743408203125]},{"name":"çèç","coord":[102.87785725633012,37.69582366943361]},{"name":"æ²³åç","coord":[115.66327227481898,39.33383178710938]},{"name":"åäº¬å¸","coord":[116.62199343603638,40.25053787231445]},{"name":"å±±è¥¿ç","coord":[112.45180235808988,37.666561126708984]},{"name":"å¤©æ´¥å¸","coord":[117.35711842642581,39.406789779663086]},{"name":"éè¥¿ç","coord":[109.56294003056632,35.64754199981689]},{"name":"å®å¤åæèªæ²»åº","coord":[105.96110877640074,37.3081169128418]},{"name":"éæµ·ç","coord":[96.07301048277901,35.44417190551758]},{"name":"å±±ä¸ç","coord":[118.03833752951093,36.29800605773925]},{"name":"è¥¿èèªæ²»åº","coord":[87.47361520439412,31.6703872680664]},{"name":"æ²³åç","coord":[113.07832397097275,33.87751102447509]},{"name":"æ±èç","coord":[119.93926538201052,32.945452690124505]},{"name":"å®å¾½ç","coord":[117.15146765881019,32.024482727050774]},{"name":"åå·ç","coord":[102.28998890142759,30.182161331176758]},{"name":"æ¹åç","coord":[112.87798261431585,31.157071113586426]},{"name":"éåºå¸","coord":[107.870126637831,30.188085556030266]},{"name":"ä¸æµ·å¸","coord":[121.42561166015514,31.276043891906745]},{"name":"æµæ±ç","coord":[119.75337092707514,29.175934791564945]},{"name":"æ¹åç","coord":[111.52770282777405,27.38110256195069]},{"name":"æ±è¥¿ç","coord":[115.51091280655628,27.283511161804206]},{"name":"äºåç","coord":[101.27053825991308,25.19783210754396]},{"name":"è´µå·ç","coord":[106.49672346773299,26.92267990112305]},{"name":"ç¦å»ºç","coord":[117.9976766946587,25.939599990844727]},{"name":"å¹¿è¥¿å£®æèªæ²»åº","coord":[108.98706831086302,23.891559600830078]},{"name":"å°æ¹¾ç","coord":[120.82468432537434,23.602651596069336]},{"name":"é¦æ¸¯ç¹å«è¡æ¿åº","coord":[114.21036850371561,22.374858856201172]},{"name":"æµ·åç","coord":[109.62792940960824,19.163116455078125]},{"name":"å¹¿ä¸ç","coord":[113.32127888266032,22.873867034912106]},{"name":"æ¾³é¨ç¹å«è¡æ¿åº","coord":[113.56819996291901,22.160347992976]}]')},function(e){e.exports=JSON.parse('[{"name":"åæçä¾å¸","coord":[85.01486759299489,45.406422237230046]},{"name":"æååæèªæ²»å·","coord":[88.7154624754753,44.26991024636568]},{"name":"ç³æ²³å­å¸","coord":[86.0208600035924,44.239045558096805]},{"name":"éæé­åå¸","coord":[114.73479243733115,44.16058374713977]},{"name":"æ¬æºªå¸","coord":[124.64357865201586,41.177197783134275]},{"name":"åå³ªå³å¸","coord":[98.16891560537093,39.76279786284264]},{"name":"è±èå¸","coord":[117.65723565456207,36.27916499211527]},{"name":"ç¥åæ¶æåº","coord":[110.48296222218153,31.581260143666697]},{"name":"å¤©é¨å¸","coord":[113.00615321481195,30.64105781887143]},{"name":"éå·å¸","coord":[114.94764081970385,30.325634953844585]},{"name":"æ½æ±å¸","coord":[112.70703817700621,30.349210666019893]},{"name":"ä»æ¡å¸","coord":[113.34688900729822,30.315951161935402]},{"name":"èä¹¡å¸","coord":[113.88072263074415,27.47193090553213]},{"name":"å°æ¹¾ç","coord":[120.14338943402045,23.596002465926095]},{"name":"ä¸èå¸","coord":[113.89443658529342,22.897826158636448]},{"name":"ä¸­å±±å¸","coord":[113.37118387764659,22.501478858616522]},{"name":"ç æµ·å¸","coord":[113.21799258934986,22.23782602992192]},{"name":"åæµ·å¸","coord":[109.18248083043899,21.695773689750148]},{"name":"é¦æ¸¯","coord":[114.20689279508653,22.36016760139811]},{"name":"èå±±å¸","coord":[122.22514712841459,30.338633120695956]},{"name":"åå­åèæ¯å°åå­","coord":[74.62910472637343,39.59886016069875]},{"name":"åä»å°åº","coord":[77.19899922143753,37.85462871211595]},{"name":"é¿åèå°åº","coord":[81.43930290016381,41.067304799230456]},{"name":"åç°å°åº","coord":[80.69780509160952,36.95287032287055]},{"name":"é¿éå°åº","coord":[82.536487505389,32.69566569631762]},{"name":"æ¥ååå°åº","coord":[86.5996831353606,29.54861754814263]},{"name":"é£æ²å°åº","coord":[88.32523292667608,33.20600450932715]},{"name":"çæ èæèªæ²»å·","coord":[95.2107128446203,33.90320387919257]},{"name":"è¿ªåºèæèªæ²»å·","coord":[99.42465312188943,28.052797714348895]},{"name":"ææ±ååæèªæ²»å·","coord":[98.85737910439825,26.98345757528851]},{"name":"å¤§çç½æèªæ²»å·","coord":[99.93934374816013,25.684737357453045]},{"name":"å¾·å®å£ææ¯é¢æèª","coord":[98.13830877778075,24.593421919561205]},{"name":"ä¿å±±å¸","coord":[99.19031013453166,24.979380341662]},{"name":"ä¸´æ²§å¸","coord":[99.62483778975081,24.058807858948214]},{"name":"æ®æ´±å¸","coord":[100.94440267992684,23.44121660743221]},{"name":"è¥¿åççº³å£æèªæ²»","coord":[100.86105801845994,21.882475641324206]},{"name":"æè¨å¸","coord":[91.3684790613129,30.14176592960237]},{"name":"å±±åå°åº","coord":[92.11665242621062,28.33000201578789]},{"name":"æèå°åº","coord":[94.9307847458166,29.125110156601963]},{"name":"æé½å°åº","coord":[97.33912235873476,30.48520825551814]},{"name":"ä¸½æ±å¸","coord":[100.65713436205135,26.96190318191959]},{"name":"ææè±å¸","coord":[101.73355913301131,26.714486678752795]},{"name":"åå±±å½æèªæ²»å·","coord":[102.08678551422615,27.683020519860396]},{"name":"æ¥éå½æèªæ²»å·","coord":[101.68264761198458,25.369603845264024]},{"name":"çº¢æ²³åå°¼æå½æèª","coord":[102.95101719613119,23.624860095239875]},{"name":"æå±±å£®æèæèªæ²»","coord":[104.8708359910614,23.579587266862504]},{"name":"ç¾è²å¸","coord":[106.69546907589859,23.98220841166522]},{"name":"å´å·¦å¸","coord":[107.3277087317123,22.49769755349952]},{"name":"é²åæ¸¯å¸","coord":[107.88939931155171,21.94550204069006]},{"name":"åå®å¸","coord":[108.67078983716917,23.12207641861882]},{"name":"é¦å·å¸","coord":[108.8532307305186,22.157690108421384]},{"name":"çæå¸","coord":[110.26918466489103,22.391823643610415]},{"name":"æ¹æ±å¸","coord":[109.93033457863683,21.086751055633457]},{"name":"èåå¸","coord":[110.80336192333934,22.069184739040775]},{"name":"é³æ±å¸","coord":[111.70471342186183,22.108751366417575]},{"name":"æ±é¨å¸","coord":[112.53715618649149,22.297368082806777]},{"name":"å¹¿å·å¸","coord":[113.4949302208309,23.28359314707863]},{"name":"æ¸è¿å¸","coord":[113.10957368131268,24.334444053233856]},{"name":"èåºå¸","coord":[112.11117530204233,23.60241158796112]},{"name":"æ¢§å·å¸","coord":[111.01709510772797,23.518132876753846]},{"name":"è´ºå·å¸","coord":[111.50423061842756,24.4095096817199]},{"name":"æ¡æå¸","coord":[110.44046163393094,25.353966673735407]},{"name":"æ³å·å¸","coord":[109.34854449214147,24.972408051485047]},{"name":"æ²³æ± å¸","coord":[107.81191841865586,24.649291651298164]},{"name":"é»ä¸åèæä¾æèª","coord":[108.39952601614591,26.429286420465576]},{"name":"è´µé³å¸","coord":[106.59784062851153,26.797907456479816]},{"name":"å®é¡ºå¸","coord":[105.76161265300635,25.988644902171018]},{"name":"é»è¥¿åå¸ä¾æèæ","coord":[105.5954078788574,25.404850939549405]},{"name":"æ²éå¸","coord":[103.9164335632742,25.697243690315265]},{"name":"å­çæ°´å¸","coord":[104.77723228072432,26.15402255629164]},{"name":"æ¯èå°åº","coord":[105.03867422931839,27.077913968069666]},{"name":"æ­éå¸","coord":[104.29730513046874,27.62418247971078]},{"name":"å®å®¾å¸","coord":[104.76748901448207,28.553501804266475]},{"name":"ä¹å±±å¸","coord":[103.56027669102787,29.160754519210577]},{"name":"èªè´¡å¸","coord":[104.63272827056402,29.273152614922402]},{"name":"åæ±å¸","coord":[104.82644562304716,29.61272653799929]},{"name":"éµä¹å¸","coord":[106.82413636302059,28.191847588570702]},{"name":"è¾¾å·å¸","coord":[107.59704170009518,31.32138258839703]},{"name":"éå®å¸","coord":[105.48979445433736,30.677687821242678]},{"name":"å¹¿å®å¸","coord":[106.56708164098042,30.43500706741521]},{"name":"æ³¸å·å¸","coord":[105.42591761727707,28.50277238478137]},{"name":"èµé³å¸","coord":[104.97995126874034,30.154251886139654]},{"name":"éå®å¸","coord":[102.69931299964517,29.892630706195035]},{"name":"çå±±å¸","coord":[104.07052881858888,29.894202166560405]},{"name":"çå­èæèªæ²»å·","coord":[100.50721042614238,30.975216556269658]},{"name":"ææ´èæèªæ²»å·","coord":[99.30775565051923,34.03539865224808]},{"name":"æµ·åèæèªæ²»å·","coord":[100.39969108016373,35.90048272566899]},{"name":"é»åèæèªæ²»å·","coord":[101.5360706381689,35.10286360841902]},{"name":"èµ£åèæèªæ²»å·","coord":[102.97083885806067,34.326752803339026]},{"name":"éåå¸","coord":[105.24780098912132,33.57031117443431]},{"name":"å¤©æ°´å¸","coord":[105.53503634660417,34.62320421368087]},{"name":"å®è¥¿å¸","coord":[104.58787768541339,35.08900966621695]},{"name":"ä¸´å¤åæèªæ²»å·","coord":[103.2612870434902,35.591577124455235]},{"name":"è¥¿å®å¸","coord":[101.57680657999033,36.84800271717157]},{"name":"æµ·ä¸å°åº","coord":[102.30909850729282,36.287400615025646]},{"name":"æµ·åèæèªæ²»å·","coord":[100.27122484450717,37.892557516083826]},{"name":"éæå¸","coord":[102.02244049169511,38.497330414886164]},{"name":"éæ³å¸","coord":[95.94486678270127,40.56891536586272]},{"name":"æµ·è¥¿èå¤æèæèª","coord":[94.67143298050689,36.022725148503724]},{"name":"å·´é³é­æ¥èå¤èªæ²»","coord":[88.18116214759745,39.556478810319916]},{"name":"åå¯å°åº","coord":[93.84302392518026,42.95015211178875]},{"name":"å¶é²çªå°åº","coord":[89.82035217277885,42.399368632283505]},{"name":"ä¹é²æ¨é½å¸","coord":[88.00048109561487,43.549986370786]},{"name":"é¿åæ³°å°åº","coord":[88.11213933257655,47.05593413019629]},{"name":"åå°å¡æèå¤èªæ²»","coord":[82.26402238163408,44.671135542630864]},{"name":"ä¼çåè¨åèªæ²»å·","coord":[82.80778717477179,43.53783381365267]},{"name":"é¿æåç","coord":[103.29923966842289,40.10955801781495]},{"name":"æ­¦å¨å¸","coord":[102.73362058791429,37.94211141321436]},{"name":"å°å·å¸","coord":[103.73793563506032,36.27379827886003]},{"name":"ä¸­å«å¸","coord":[105.6943786030716,37.20654236148948]},{"name":"é¶å·å¸","coord":[106.20022174140034,38.52103167597483]},{"name":"ç³å´å±±å¸","coord":[106.41544011793628,38.84054137571417]},{"name":"ä¹æµ·å¸","coord":[106.8984175998405,39.54616572239788]},{"name":"éå°å¤æ¯å¸","coord":[108.43285571424619,39.24036799350715]},{"name":"å·´å½¦æ·å°å¸","coord":[107.45840392808307,41.30159860424196]},{"name":"åå¤´å¸","coord":[110.46472193224272,41.48017783644221]},{"name":"å¼åæµ©ç¹å¸","coord":[111.48365173603975,40.498363056149884]},{"name":"ä¹å°å¯å¸å¸","coord":[112.61568977597707,41.75789561273154]},{"name":"å¤§åå¸","coord":[113.7107192749083,39.898956799744184]},{"name":"æå·å¸","coord":[112.65428748167508,39.681772914701924]},{"name":"å¿»å·å¸","coord":[112.36127575589583,38.88990233614568]},{"name":"æ¦æå¸","coord":[109.68473112169593,38.19921027134876]},{"name":"å»¶å®å¸","coord":[109.52425222161318,36.406522726136814]},{"name":"åºé³å¸","coord":[107.73052193155061,36.183821532624464]},{"name":"åºåå¸","coord":[106.20191575442442,36.11634909496382]},{"name":"ç½é¶å¸","coord":[104.68634478137065,36.51582865625868]},{"name":"å®é¸¡å¸","coord":[107.33534779230747,34.3387216485855]},{"name":"æ±ä¸­å¸","coord":[107.03534754266246,33.00142998064871]},{"name":"å¹¿åå¸","coord":[105.92928137563939,32.21872447205537]},{"name":"å·´ä¸­å¸","coord":[107.03422410306194,31.99874720836291]},{"name":"ååå¸","coord":[106.32964805032347,31.156657700184095]},{"name":"ç»µé³å¸","coord":[104.58949560201106,31.88628780630976]},{"name":"å¾·é³å¸","coord":[104.41542984932845,31.110558133718676]},{"name":"æé½å¸","coord":[103.8852290010473,30.777258040348634]},{"name":"é¿åèæç¾æèªæ²»","coord":[102.26209319552814,32.45725845387284]},{"name":"å®åº·å¸","coord":[109.14236501848015,32.77467694678074]},{"name":"åå °å¸","coord":[110.39934083416314,32.376209039347906]},{"name":"è¥é³å¸","coord":[111.97539147094662,31.93399822417465]},{"name":"å®æå¸","coord":[111.22204852395754,30.772457669035354]},{"name":"æ©æ½å¸","coord":[109.42158366502872,30.260366574390105]},{"name":"å¼ å®¶çå¸","coord":[110.59760006538717,29.330107409240718]},{"name":"åé¦å¸","coord":[109.72176899848378,28.681903937242495]},{"name":"éä»å°åº","coord":[108.54247523485463,28.11736237519646]},{"name":"éåºå¸","coord":[107.86007108564992,30.186253395053196]},{"name":"æåå¸","coord":[109.94325166787243,27.43919084801186]},{"name":"çé³å¸","coord":[112.43060358108062,28.75127294553697]},{"name":"å¨åºå¸","coord":[111.41891416951897,27.696312460064604]},{"name":"å¸¸å¾·å¸","coord":[111.72571610131646,29.27189463838195]},{"name":"èå·å¸","coord":[112.65896596965268,30.05161542755362]},{"name":"èé¨å¸","coord":[112.6586855902184,31.01267124474617]},{"name":"å²³é³å¸","coord":[113.2595036144316,29.106247116930163]},{"name":"é¿æ²å¸","coord":[113.15415586456598,28.222934680488425]},{"name":"æ¹æ½­å¸","coord":[112.51092596317824,27.69881544105668]},{"name":"æ ªå·å¸","coord":[113.49665538546823,27.03993794610501]},{"name":"è¡¡é³å¸","coord":[112.48849636578527,26.783613569970782]},{"name":"éµé³å¸","coord":[110.6723832117475,26.81652287086792]},{"name":"æ°¸å·å¸","coord":[111.8565364154186,25.768488267811968]},{"name":"é¶å³å¸","coord":[113.53420325850979,24.69848878771937]},{"name":"æ å·å¸","coord":[114.32029589634925,23.25504544231892]},{"name":"ä½å±±å¸","coord":[112.95925897403649,23.10116677189257]},{"name":"äºæµ®å¸","coord":[111.78042514904234,22.840400494105687]},{"name":"æ·±å³å¸","coord":[114.13138648919008,22.649563063468342]},{"name":"æ±å°¾å¸","coord":[115.57412892884373,23.06989642104901]},{"name":"æ²³æºå¸","coord":[114.89746229844398,23.97971937124767]},{"name":"æ­é³å¸","coord":[116.04290004239446,23.304802704715357]},{"name":"æ±å¤´å¸","coord":[116.7008461897183,23.35898625947344]},{"name":"æ½®å·å¸","coord":[116.75405548481658,23.854381508863064]},{"name":"æ¢å·å¸","coord":[116.13719397345734,24.15633544812716]},{"name":"æ¼³å·å¸","coord":[117.38279760543345,24.41111215459575]},{"name":"å¦é¨å¸","coord":[118.04275971554665,24.675908246507944]},{"name":"é¾å²©å¸","coord":[116.69341144552507,25.20284542644492]},{"name":"æ³å·å¸","coord":[118.12035864630246,25.22984144365049]},{"name":"èç°å¸","coord":[118.82439690138142,25.439653480972687]},{"name":"ç¦å·å¸","coord":[119.1608285845262,25.99117532466728]},{"name":"ä¸æå¸","coord":[117.51188176216434,26.318292906961602]},{"name":"åå¹³å¸","coord":[118.16153136678187,27.306303151805437]},{"name":"æå·å¸","coord":[116.3455359885574,27.487043655935366]},{"name":"é¹°æ½­å¸","coord":[117.01082360702333,28.241253742969946]},{"name":"åå®å¸","coord":[114.91377151807418,26.957486660664525]},{"name":"èµ£å·å¸","coord":[115.046455717572,25.81565075681663]},{"name":"é´å·å¸","coord":[113.1544526703492,25.871927095452524]},{"name":"æ°ä½å¸","coord":[114.94161795877827,27.79044654578371]},{"name":"å®æ¥å¸","coord":[115.04574494880995,28.306428044943356]},{"name":"åæå¸","coord":[115.9963824234495,28.664803351584705]},{"name":"ä¹æ±å¸","coord":[115.53225905704193,29.362905920276297]},{"name":"ä¸é¥¶å¸","coord":[117.8595355766598,28.765755150094634]},{"name":"æ¯å¾·éå¸","coord":[117.25387030721845,29.33426823662448]},{"name":"é»å±±å¸","coord":[117.85476357809696,29.969632034273722]},{"name":"æ± å·å¸","coord":[117.34517113140791,30.208089337922335]},{"name":"ééµå¸","coord":[117.93160431300694,30.926442655001676]},{"name":"å®åºå¸","coord":[116.54307680610799,30.524265461641296]},{"name":"é»ç³å¸","coord":[115.02354597728443,29.924060229331015]},{"name":"å¸å®å¸","coord":[114.26967602231792,29.652174021136048]},{"name":"é»åå¸","coord":[115.2859016705373,30.65856897065683]},{"name":"æ­¦æ±å¸","coord":[114.34552076948799,30.68836237966767]},{"name":"éå·å¸","coord":[113.3850627838818,31.87891659924412]},{"name":"ä¿¡é³å¸","coord":[114.81374730587638,32.0309685135914]},{"name":"é©»é©¬åºå¸","coord":[114.07756451509235,32.896720987266114]},{"name":"åæ´å¸","coord":[109.82044421310393,33.77403373563189]},{"name":"è¥¿å®å¸","coord":[109.11839808451401,34.225257215515896]},{"name":"æ¸­åå¸","coord":[109.75732444226935,35.025913644359306]},{"name":"éå·å¸","coord":[108.98695328111377,35.19235092947735]},{"name":"å¸é³å¸","coord":[108.36398776446165,34.84311348287181]},{"name":"ä¸é¨å³¡å¸","coord":[110.80049688104964,34.31818709571671]},{"name":"è¿åå¸","coord":[111.1736679525165,35.19010372283576]},{"name":"æ´é³å¸","coord":[111.87577573098216,34.33379926109848]},{"name":"å¹³é¡¶å±±å¸","coord":[112.80931281928427,33.759895800153096]},{"name":"æ¼¯æ²³å¸","coord":[113.83505724178012,33.70034266174508]},{"name":"è®¸æå¸","coord":[113.78762484088509,34.051835688452435]},{"name":"éå·å¸","coord":[113.49619951867594,34.61181797865449]},{"name":"ç¦ä½å¸","coord":[113.13404280173008,35.134167097471625]},{"name":"æåå¸","coord":[112.7495732073233,35.63186423091449]},{"name":"é¿æ²»å¸","coord":[112.85900842873183,36.45872910742828]},{"name":"ä¸´æ±¾å¸","coord":[111.49379787924448,36.22810800777857]},{"name":"å¤ªåå¸","coord":[112.15628804033796,37.91704444063036]},{"name":"åæ¢å¸","coord":[111.31901105774872,37.712740463356496]},{"name":"æä¸­å¸","coord":[113.08199599739676,37.36532613794343]},{"name":"é¯é¸å¸","coord":[114.41824047234618,36.530119932543315]},{"name":"å®é³å¸","coord":[113.88883283163116,35.7797611183252]},{"name":"é¹¤å£å¸","coord":[114.3654094911545,35.75770487428472]},{"name":"æ°ä¹¡å¸","coord":[113.9184107718167,35.348471214026716]},{"name":"å¼å°å¸","coord":[114.52801677500626,34.61371216679872]},{"name":"å¨å£å¸","coord":[114.88509782391864,33.69999759722657]},{"name":"éé³å¸","coord":[115.44595951398213,32.98060371610532]},{"name":"æ·®åå¸","coord":[116.68941991880993,32.79972275772595]},{"name":"èå å¸","coord":[117.38594715783302,33.106729536033896]},{"name":"æ·®åå¸","coord":[116.69651711889378,33.69527529383458]},{"name":"å®¿å·å¸","coord":[117.30175405886838,33.943330421260015]},{"name":"äº³å·å¸","coord":[116.12410804185097,33.46769392946132]},{"name":"åä¸å¸","coord":[115.59575176872548,34.28339840831147]},{"name":"èæ³½å¸","coord":[115.53631974831816,35.197319393220624]},{"name":"æ¿®é³å¸","coord":[115.3070485514902,35.775883510964334]},{"name":"èåå¸","coord":[115.8870069012884,36.40529594548765]},{"name":"é¢å°å¸","coord":[114.74259008644859,37.251396750084155]},{"name":"ç³å®¶åºå¸","coord":[114.56923838363613,38.13141710980106]},{"name":"é³æ³å¸","coord":[113.39216149668508,38.09075470547468]},{"name":"ä¿å®å¸","coord":[115.261524468934,39.09118520781398]},{"name":"è¡¡æ°´å¸","coord":[115.8182936677897,37.715661598187154]},{"name":"å¾·å·å¸","coord":[116.4582273790399,37.19372347888644]},{"name":"æ²§å·å¸","coord":[116.76192710911863,38.20240042039232]},{"name":"å»åå¸","coord":[116.50410772133856,39.27896741763884]},{"name":"å¤©æ´¥å¸","coord":[117.31988934444873,39.37154482470619]},{"name":"åäº¬å¸","coord":[116.59734730757869,40.237112944270976]},{"name":"å¼ å®¶å£å¸","coord":[115.1823606483226,40.83732566607167]},{"name":"åå±±å¸","coord":[117.8693184261954,39.71862889477249]},{"name":"ç§¦çå²å¸","coord":[119.30467355367742,39.990574652162564]},{"name":"æ¿å¾·å¸","coord":[117.16275671911026,41.36623845548547]},{"name":"è«è¦å²å¸","coord":[119.9342336210531,40.5628822626519]},{"name":"æé³å¸","coord":[120.11853493535794,41.471852354885755]},{"name":"èµ¤å³°å¸","coord":[118.50943546234379,43.25452976059767]},{"name":"é¦å·å¸","coord":[121.5167549323861,41.45933087433065]},{"name":"è¥å£å¸","coord":[122.58571915054674,40.42093503997384]},{"name":"ä¸¹ä¸å¸","coord":[124.33549382902183,40.46369290272115]},{"name":"è¾½é³å¸","coord":[123.34064798039414,41.152331397771356]},{"name":"çé¦å¸","coord":[122.06718005354679,41.05573599862555]},{"name":"éæ°å¸","coord":[121.93889757908204,42.27641773244204]},{"name":"éå±±å¸","coord":[122.78904432242356,40.77781183142038]},{"name":"æ²é³å¸","coord":[122.99508899709724,42.1162195010079]},{"name":"éå²­å¸","coord":[124.23100515588399,42.72666083611828]},{"name":"æ¶é¡ºå¸","coord":[124.46027188217573,41.82955407638859]},{"name":"éè¾½å¸","coord":[122.0729370657937,43.90889130864869]},{"name":"å´å®ç","coord":[120.79456431092532,45.92003249442161]},{"name":"ç½åå¸","coord":[123.10619907715235,45.25475749267784]},{"name":"é½é½åå°å¸","coord":[124.5462214659102,47.55395009317394]},{"name":"å¤§å´å®å²­å°åº","coord":[124.50992855161529,52.18438447846694]},{"name":"é»æ²³å¸","coord":[127.14721400335922,49.25080134026901]},{"name":"å¤§åºå¸","coord":[124.40329830095243,46.401048760966745]},{"name":"ç»¥åå¸","coord":[126.5214484055605,46.76992452194825]},{"name":"æ¾åå¸","coord":[124.21244334807682,44.75779381338502]},{"name":"åå¹³å¸","coord":[124.27839350328821,43.52139065090318]},{"name":"éåå¸","coord":[125.67392830706305,41.91771808663852]},{"name":"è¾½æºå¸","coord":[125.33529527643432,42.758340204944986]},{"name":"åæå¸","coord":[126.83350281902375,43.60730120049175]},{"name":"é¿æ¥å¸","coord":[125.53597875970374,44.24624314701737]},{"name":"ç½å±±å¸","coord":[127.16780160322108,42.093893880305075]},{"name":"åå°æ»¨å¸","coord":[127.39125008786029,45.36200668820575]},{"name":"é¹¤å²å¸","coord":[130.4703811258197,47.66520688940109]},{"name":"ä¼æ¥å¸","coord":[128.91240831703635,47.93833794565277]},{"name":"ä¸å°æ²³å¸","coord":[131.2677920224311,45.945099776108584]},{"name":"é¸¡è¥¿å¸","coord":[132.38059153660274,45.722934218318535]},{"name":"åé¸­å±±å¸","coord":[132.3184817002743,46.65813679030265]},{"name":"ä½³æ¨æ¯å¸","coord":[132.26174446608726,47.17569713691394]},{"name":"å¼ä¼¦è´å°å¸","coord":[122.3210739998419,50.18176996070858]},{"name":"å­æå¸","coord":[113.83749892135485,31.11757234692128]},{"name":"è´µæ¸¯å¸","coord":[110.07354588052804,23.380735604767374]},{"name":"é»åå¸ä¾æèæèª","coord":[107.30931767543106,26.2976919432269]},{"name":"å®å¾·å¸","coord":[119.52482556634342,27.013151692716413]},{"name":"æ¸©å·å¸","coord":[120.30037042732202,27.8699145504001]},{"name":"å°å·å¸","coord":[120.88886782713843,28.670799172772313]},{"name":"ä¸½æ°´å¸","coord":[119.56796851966463,28.170268394477755]},{"name":"è¡¢å·å¸","coord":[118.79479802644406,28.865874397158763]},{"name":"éåå¸","coord":[119.99381920686633,29.093455548185744]},{"name":"ç»å´å¸","coord":[120.46546691682343,29.69382513836818]},{"name":"å®æ³¢å¸","coord":[121.42142987830871,29.70001162878972]},{"name":"æ­å·å¸","coord":[119.4405685790891,29.87218307296989]},{"name":"å®£åå¸","coord":[118.68748382914703,30.628143499626418]},{"name":"æ¹å·å¸","coord":[119.98261306633574,30.7945175862809]},{"name":"åå´å¸","coord":[120.83889215988998,30.67538495499343]},{"name":"ä¸æµ·å¸","coord":[121.37534147322967,31.25628247908459]},{"name":"èå·å¸","coord":[120.6906182622391,31.381280695137775]},{"name":"æ é¡å¸","coord":[120.32182300914366,31.54113306724517]},{"name":"å¸¸å·å¸","coord":[119.61953292830165,31.611878565375576]},{"name":"åäº¬å¸","coord":[118.71890548838064,31.910863187910323]},{"name":"éæ±å¸","coord":[119.42349332902813,31.97942313430778]},{"name":"åè¥å¸","coord":[117.30651975617157,31.79407863049138]},{"name":"å­å®å¸","coord":[116.24668220575353,31.820846193819513]},{"name":"æ»å·å¸","coord":[117.88422385307969,32.51792621904418]},{"name":"æ³°å·å¸","coord":[120.03124303305091,32.56503102346783]},{"name":"åéå¸","coord":[120.85599446760912,32.18496706099728]},{"name":"çåå¸","coord":[120.01812490612667,33.54219948734023]},{"name":"æ·®å®å¸","coord":[119.0749424205415,33.39203631772854]},{"name":"å®¿è¿å¸","coord":[118.45404943216346,33.666258719120265]},{"name":"å¾å·å¸","coord":[117.77482249295966,34.30847766157078]},{"name":"æµå®å¸","coord":[116.74147276546373,35.27488504351119]},{"name":"æ£åºå¸","coord":[117.43359942491492,34.884162021736]},{"name":"è¿äºæ¸¯å¸","coord":[119.01553213785074,34.54316517587849]},{"name":"ä¸´æ²å¸","coord":[118.31478835349617,35.28173079028279]},{"name":"æ¥ç§å¸","coord":[119.14265350444272,35.54479073199592]},{"name":"éå²å¸","coord":[120.27779044405756,36.3464117375903]},{"name":"å¨æµ·å¸","coord":[122.12963327195605,37.13879077904251]},{"name":"çå°å¸","coord":[120.7689567423966,37.19772002195597]},{"name":"æ½åå¸","coord":[119.02178548592039,36.49292234053931]},{"name":"æ·åå¸","coord":[117.92936024367185,36.60871347163638]},{"name":"æ³°å®å¸","coord":[116.93810893944303,36.0423330118612]},{"name":"æµåå¸","coord":[117.34560282551296,36.769574973846304]},{"name":"ä¸è¥å¸","coord":[118.4915054457184,37.52194690335787]},{"name":"æ»¨å·å¸","coord":[117.67610299757533,37.4439597758601]},{"name":"ææå¸","coord":[102.93100245594789,25.481300763922075]},{"name":"çæºªå¸","coord":[102.23080854291823,24.156168324611663]},{"name":"å¡åå°åº","coord":[83.60908162840168,45.3721852373893]},{"name":"å¼ æå¸","coord":[100.47710030600572,38.704239320458385]},{"name":"åé³å¸","coord":[112.1400670951149,33.03033276715801]},{"name":"æ¬å·å¸","coord":[119.48949608990988,32.80956776339646]},{"name":"å»¶è¾¹æé²æèªæ²»å·","coord":[129.3577692895626,43.24968794080283]},{"name":"ç¡ä¸¹æ±å¸","coord":[129.87240796405672,44.7073040108322]},{"name":"æ¾³é¨","coord":[113.56289691515346,22.14602596262204]},{"name":"å´å¿ å¸","coord":[106.76894508116403,37.72566765880316]},{"name":"æ¥å®¾å¸","coord":[109.25592217010114,23.86346274681084]},{"name":"å¹³åå¸","coord":[107.0708132782897,35.30329631658711]},{"name":"é©¬éå±±å¸","coord":[118.27245878467022,31.657727937739004]},{"name":"èæ¹å¸","coord":[118.32992684415504,31.081688223101658]},{"name":"æ¾è¿å¿","coord":[110.04198076060266,19.694955078668105]},{"name":"ä¿äº­é»æèæèªæ²»","coord":[109.6055304964257,18.6101488675304]},{"name":"ä¹ä¸é»æèªæ²»å¿","coord":[109.04051999525574,18.643137437909203]},{"name":"åå·å¸","coord":[109.3431358337404,19.550974957403195]},{"name":"å®å®å¿","coord":[110.38744429685676,19.47557074114284]},{"name":"å±¯æå¿","coord":[110.00574767630334,19.367175093044388]},{"name":"ç½æ²é»æèªæ²»å¿","coord":[109.36860737761768,19.214416393082217]},{"name":"ç¼ä¸­é»æèæèªæ²»","coord":[109.86691465937548,19.073671135862682]},{"name":"ä¸æ¹å¸","coord":[108.86903802405428,19.017352815445214]},{"name":"ææ±é»æèªæ²»å¿","coord":[108.9686431884767,19.182594167127824]},{"name":"æµ·å£å¸","coord":[110.420654296875,19.806565564640795]},{"name":"æµæºå¸","coord":[112.38051465474433,35.07958362422394]},{"name":"äºæå±±å¸","coord":[109.53595187364496,18.832908264613966]},{"name":"å¤§è¿å¸","coord":[121.96662235866603,39.444150542439914]},{"name":"ææå¸ä¸æ²å¸","coord":[110.81828537536748,19.756501444162936]},{"name":"ä¸äºå¸","coord":[109.38424600793707,18.39186315877128]},{"name":"ä¸å®å¸","coord":[110.28485046979574,18.860240588635115]},{"name":"éµæ°´é»æèªæ²»å¿","coord":[109.95577603229562,18.594712684620465]},{"name":"ä¸´é«å¿","coord":[109.71915395436967,19.79420403032508]},{"name":"ç¼æµ·å¸","coord":[110.41650700703043,19.22315873149372]}]')},function(e,t){e.exports=ol.proj.Units},function(e,t){e.exports=ol.Collection},function(e,t,r){r(68),e.exports=r(67)},function(e,t,r){(function(n,o){var i,a,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}var t=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function i(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,n)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===l(t)||"function"==typeof t)){var r=t.then;if(t instanceof a)return e._state=3,e._value=t,void f(e);if("function"==typeof r)return void h((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var n,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var r=!1;try{e(function(e){r||(r=!0,u(t,e))},function(e){r||(r=!0,c(t,e))})}catch(e){if(r)return;r=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var r=new this.constructor(i);return s(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},a.prototype.finally=e,a.all=function(e){return new a(function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function a(e,r){try{if(r&&("object"===l(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){a(e,t)},n)}o[e]=r,0==--i&&t(o)}catch(e){n(e)}}for(var s=0;s<o.length;s++)a(s,o[s])})},a.resolve=function(e){return e&&"object"===l(e)&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,r){r(e)})},a.race=function(e){return new a(function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)a.resolve(e[o]).then(t,n)})},a._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){t(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();"Promise"in p?p.Promise.prototype.finally||(p.Promise.prototype.finally=e):p.Promise=a},"object"===l(t)&&void 0!==e?s():void 0===(a="function"==typeof(i=s)?i.call(t,r,t,e):i)||(e.exports=a)}).call(this,r(62).setImmediate,r(22))},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(63),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(22))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,i,a,s,l=1,u={},c=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){y(e.data)},n=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(y,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&y(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return u[l]=o,n(l),l++},h.clearImmediate=p}function p(e){delete u[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(22),r(64))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,u=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new y(e,t)),1!==u.length||c||s(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=i(e),t=a(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},s.prototype.delete=function(e){delete this.map[i(e)]},s.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[i(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},s.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};var r={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];y.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=h,t.Response=y,t.fetch=function(e,t){return new Promise(function(n,o){var i;i=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(l)return;return l=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;l||(l=!0,n(new y(r,t)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,r,n,o,i,a,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,r=new FileReader,n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||n.match(o),a=[e],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),u(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var r,o,i=(t=t||{}).body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";r.r(t);r(69),r(71)},function(e,t,r){"use strict";r.r(t);var n=r(14),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var u=function(e){function t(e,r){var n,o,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(l=a(t).call(this,e,r))||"object"!==i(l)&&"function"!=typeof l?s(o):l).options=r||{},n.url=e,n.dispatchEvent({type:"initialized",value:s(n)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o.a),t}(),c=window.SuperMap=window.SuperMap||{};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components=window.SuperMap.Components||{};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var f=c.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},h=c.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},p=c.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN"},y=c.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},d=c.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},m=c.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},v=c.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},b=c.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},g=c.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},S=c.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},w=c.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},_=c.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},O=c.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},x=c.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},C=c.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},T=c.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},P=c.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},E=c.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},k=c.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},M=c.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},j=c.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},A=c.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},R=c.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},L=c.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},I=c.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},N=c.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},F=c.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},D=c.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},G=c.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},B=c.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},U=c.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},V=c.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},H=c.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},z=c.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},q=c.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},J=c.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},W=c.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},Y=c.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},X=c.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},Q=c.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},K=c.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},Z=c.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},$=c.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},ee=c.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},te=c.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},re=c.Exponent={EXP1:"EXP1",EXP2:"EXP2"},ne=c.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},oe=c.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},ie=c.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},ae=c.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},se=c.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},le=c.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},ue=c.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},ce=c.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},fe=c.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},he=c.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},pe=c.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},ye=c.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};c.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},c.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},c.OrderType={ASC:"ASC",DESC:"DESC"},c.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},c.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},c.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},c.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"};function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var me=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&de(t.prototype,r),n&&de(t,n),e}();function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Size=me;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var be=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel",c.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+r)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&ve(t.prototype,r),n&&ve(t,n),e}();c.Pixel=be,
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
c.inherit=function(e,t){var r,n,o,i=function(){};for(i.prototype=t.prototype,e.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),c.Util.extend(e.prototype,o)},c.mixin=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=0;n<t.length;n++)a(this,new t[n](r))},o=0;o<t.length;o++){var i=t[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(e,t){var r=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}};var ge=c.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,o=t.length;n<o;n++){var i=t[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(e,t,r){t||(t=window);return e.replace(c.String.tokenRegEx,function(e,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return c.String.numberRegEx.test(e)},numericIf:function(e){return c.String.isNumeric(e)?parseFloat(e):e}},Se=c.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return t>0&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,n){t=void 0!==t?t:0,r=void 0!==r?r:c.Number.thousandsSeparator,n=void 0!==n?n:c.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==t)i=a;else{var l=o.length>1?o[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),i=a+n+l}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return Se.limitSigDigs(this,e)});var we=c.Function={bind:function(e,t){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(r){return e.call(t,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};c.Array={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&n.push(a)}}return n}};function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Oe,xe,Ce,Te=c.Util=c.Util||{};function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Util.extend=function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];void 0!==n&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},c.Util.copy=function(e,t){var r;if(e=e||{},t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},c.Util.reset=function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===_e(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===_e(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},c.Util.getElement=function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},c.Util.isElement=function(e){return!(!e||1!==e.nodeType)},c.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.Util.removeItem=function(e,t){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e},c.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},c.Util.modifyDOMElement=function(e,t,r,n,o,i,a,s){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},c.Util.applyDefaults=function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},c.Util.getParameterString=function(e){var t=[];for(var r in e){var n=e[r];if(null!=n&&"function"!=typeof n){var o;if("object"===_e(n)&&n.constructor===Array){for(var i,a=[],s=0,l=n.length;s<l;s++)i=n[s],a.push(encodeURIComponent(null===i||void 0===i?"":i));o=a.join(",")}else o=encodeURIComponent(n);t.push(encodeURIComponent(r)+"="+o)}}return t.join("&")},c.Util.urlAppend=function(e,t){var r=e;if(t){var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},c.Util.DEFAULT_PRECISION=14,c.Util.toFloat=function(e,t){return null==t&&(t=c.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},c.Util.rad=function(e){return e*Math.PI/180},c.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(c.String.contains(e,"?")){var r=e.indexOf("?")+1,n=c.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,n)}for(var o={},i=t.split(/[&;]/),a=0,s=i.length;a<s;++a){var l=i[a].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}var f=(l[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),o[u]=f}}return o},c.Util.lastSeqID=0,c.Util.createUniqueID=function(e){return null==e&&(e="id_"),c.Util.lastSeqID+=1,e+c.Util.lastSeqID},c.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},c.INCHES_PER_UNIT.in=c.INCHES_PER_UNIT.inches,c.INCHES_PER_UNIT.degrees=c.INCHES_PER_UNIT.dd,c.INCHES_PER_UNIT.nmi=1852*c.INCHES_PER_UNIT.m,c.METERS_PER_INCH=.0254000508001016,c.Util.extend(c.INCHES_PER_UNIT,{Inch:c.INCHES_PER_UNIT.inches,Meter:1/c.METERS_PER_INCH,Foot:.3048006096012192/c.METERS_PER_INCH,IFoot:.3048/c.METERS_PER_INCH,ClarkeFoot:.3047972651151/c.METERS_PER_INCH,SearsFoot:.30479947153867626/c.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/c.METERS_PER_INCH,IInch:.0254/c.METERS_PER_INCH,MicroInch:254e-7/c.METERS_PER_INCH,Mil:2.54e-8/c.METERS_PER_INCH,Centimeter:.01/c.METERS_PER_INCH,Kilometer:1e3/c.METERS_PER_INCH,Yard:.9144018288036576/c.METERS_PER_INCH,SearsYard:.914398414616029/c.METERS_PER_INCH,IndianYard:.9143985307444408/c.METERS_PER_INCH,IndianYd37:.91439523/c.METERS_PER_INCH,IndianYd62:.9143988/c.METERS_PER_INCH,IndianYd75:.9143985/c.METERS_PER_INCH,IndianFoot:.30479951/c.METERS_PER_INCH,IndianFt37:.30479841/c.METERS_PER_INCH,IndianFt62:.3047996/c.METERS_PER_INCH,IndianFt75:.3047995/c.METERS_PER_INCH,Mile:1609.3472186944373/c.METERS_PER_INCH,IYard:.9144/c.METERS_PER_INCH,IMile:1609.344/c.METERS_PER_INCH,NautM:1852/c.METERS_PER_INCH,"Lat-66":110943.31648893273/c.METERS_PER_INCH,"Lat-83":110946.25736872235/c.METERS_PER_INCH,Decimeter:.1/c.METERS_PER_INCH,Millimeter:.001/c.METERS_PER_INCH,Dekameter:10/c.METERS_PER_INCH,Decameter:10/c.METERS_PER_INCH,Hectometer:100/c.METERS_PER_INCH,GermanMeter:1.0000135965/c.METERS_PER_INCH,CaGrid:.999738/c.METERS_PER_INCH,ClarkeChain:20.1166194976/c.METERS_PER_INCH,GunterChain:20.11684023368047/c.METERS_PER_INCH,BenoitChain:20.116782494375872/c.METERS_PER_INCH,SearsChain:20.11676512155/c.METERS_PER_INCH,ClarkeLink:.201166194976/c.METERS_PER_INCH,GunterLink:.2011684023368047/c.METERS_PER_INCH,BenoitLink:.20116782494375873/c.METERS_PER_INCH,SearsLink:.2011676512155/c.METERS_PER_INCH,Rod:5.02921005842012/c.METERS_PER_INCH,IntnlChain:20.1168/c.METERS_PER_INCH,IntnlLink:.201168/c.METERS_PER_INCH,Perch:5.02921005842012/c.METERS_PER_INCH,Pole:5.02921005842012/c.METERS_PER_INCH,Furlong:201.1684023368046/c.METERS_PER_INCH,Rood:3.778266898/c.METERS_PER_INCH,CapeFoot:.3047972615/c.METERS_PER_INCH,Brealey:375/c.METERS_PER_INCH,ModAmFt:.304812252984506/c.METERS_PER_INCH,Fathom:1.8288/c.METERS_PER_INCH,"NautM-UK":1853.184/c.METERS_PER_INCH,"50kilometers":5e4/c.METERS_PER_INCH,"150kilometers":15e4/c.METERS_PER_INCH}),c.Util.extend(c.INCHES_PER_UNIT,{mm:c.INCHES_PER_UNIT.Meter/1e3,cm:c.INCHES_PER_UNIT.Meter/100,dm:100*c.INCHES_PER_UNIT.Meter,km:1e3*c.INCHES_PER_UNIT.Meter,kmi:c.INCHES_PER_UNIT.nmi,fath:c.INCHES_PER_UNIT.Fathom,ch:c.INCHES_PER_UNIT.IntnlChain,link:c.INCHES_PER_UNIT.IntnlLink,"us-in":c.INCHES_PER_UNIT.inches,"us-ft":c.INCHES_PER_UNIT.Foot,"us-yd":c.INCHES_PER_UNIT.Yard,"us-ch":c.INCHES_PER_UNIT.GunterChain,"us-mi":c.INCHES_PER_UNIT.Mile,"ind-yd":c.INCHES_PER_UNIT.IndianYd37,"ind-ft":c.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/c.METERS_PER_INCH}),c.DOTS_PER_INCH=96,c.Util.normalizeScale=function(e){return e>1?1/e:e},c.Util.getResolutionFromScale=function(e,t){var r;e&&(null==t&&(t="degrees"),r=1/(c.Util.normalizeScale(e)*c.INCHES_PER_UNIT[t]*c.DOTS_PER_INCH));return r},c.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*c.INCHES_PER_UNIT[t]*c.DOTS_PER_INCH},c.IS_GECKO=-1===(Oe=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==Oe.indexOf("gecko"),c.Browser=function(){var e,t="",r="",n="pc",o=navigator.userAgent.toLowerCase();return o.indexOf("msie")>-1||o.indexOf("trident")>-1&&o.indexOf("rv")>-1?(t="msie",e=o.match(/msie ([\d.]+)/)||o.match(/rv:([\d.]+)/)):o.indexOf("chrome")>-1?(t="chrome",e=o.match(/chrome\/([\d.]+)/)):o.indexOf("firefox")>-1?(t="firefox",e=o.match(/firefox\/([\d.]+)/)):o.indexOf("opera")>-1?(t="opera",e=o.match(/version\/([\d.]+)/)):o.indexOf("safari")>-1&&(t="safari",e=o.match(/version\/([\d.]+)/)),r=e?e[1]:"",o.indexOf("ipad")>-1||o.indexOf("ipod")>-1||o.indexOf("iphone")>-1?n="apple":o.indexOf("android")>-1&&(r=(e=o.match(/version\/([\d.]+)/))?e[1]:"",n="android"),{name:t,version:r,device:n}}(),c.Util.getBrowser=function(){return c.Browser},c.Util.isSupportCanvas=(xe=!0,Ce=c.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===Ce.name&&parseFloat(Ce.version)<5&&(xe=!1),"safari"===Ce.name&&parseFloat(Ce.version)<4&&(xe=!1),"opera"===Ce.name&&parseFloat(Ce.version)<10&&(xe=!1),"msie"===Ce.name&&parseFloat(Ce.version)<9&&(xe=!1)):xe=!1,xe),c.Util.supportCanvas=function(){return c.Util.isSupportCanvas},c.INCHES_PER_UNIT.degree=c.INCHES_PER_UNIT.dd,c.INCHES_PER_UNIT.meter=c.INCHES_PER_UNIT.m,c.INCHES_PER_UNIT.foot=c.INCHES_PER_UNIT.ft,c.INCHES_PER_UNIT.inch=c.INCHES_PER_UNIT.inches,c.INCHES_PER_UNIT.mile=c.INCHES_PER_UNIT.mi,c.INCHES_PER_UNIT.kilometer=c.INCHES_PER_UNIT.km,c.INCHES_PER_UNIT.yard=c.INCHES_PER_UNIT.yd,c.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),a=r.substring(n+2);n=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,n),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,h=i.substring(0,t);return-1!==c?f=i.substring(0,c):(f=i.substring(0,t),h+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&h===l},c.Util.calculateDpi=function(e,t,r,n,o){if(e&&t&&r){var i,a=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/l,f=s/u;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/l)/r/1e4}return i}},c.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r=[],n=0,o=t.length;n<o;n++)r.push(c.Util.toJSON(t[n]));return"["+r.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===_e(t)){if(t.length){for(var i=[],a=0,s=t.length;a<s;a++)i.push(c.Util.toJSON(t[a]));return"["+i.join(",")+"]"}var l=[];for(var u in t)"function"!=typeof t[u]&&"CLASS_NAME"!==u&&"parent"!==u&&l.push("'"+u+"':"+c.Util.toJSON(t[u]));return l.length>0?"{"+l.join(",")+"}":"{}"}return t.toString()}},c.Util.getResolutionFromScaleDpi=function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?(e=c.Util.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},c.Util.getScaleFromResolutionDpi=function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},c.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},c.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},c.Util.copyAttributesWithClip=function(e,t,r){if(e=e||{},t)for(var n in t){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=t[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(e[n]=s)}}return e},c.Util.cloneObject=function(e){if(null===e||"object"!==_e(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=c.Util.cloneObject(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},c.Util.lineIntersection=function(e,t,r,n){var o,i,a=null,s=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),l=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),u=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!=u)i=l/u,a=(o=s/u)>=0&&i<=1&&o<=1&&i>=0?new c.Geometry.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==s&&0==l){var f=Math.max(e.y,t.y),h=Math.min(e.y,t.y),p=Math.max(e.x,t.x),y=Math.min(e.x,t.x);a=(r.y>=h&&r.y<=f||n.y>=h&&n.y<=f)&&r.x>=y&&r.x<=p||n.x>=y&&n.x<=p?"Coincident":"Parallel"}else a="Parallel";return a},c.Util.getTextBounds=function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ee=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te.isArray(t)&&(r=t[1],t=t[0]),this.lon=t?Te.toFloat(t):0,this.lat=r?Te.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t){var r=t.split(",");return new e(r[0],r[1])}},{key:"fromArray",value:function(t){var r=Te.isArray(t);return new e(r&&t[0],r&&t[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+Te.toFloat(t),this.lat+Te.toFloat(r))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&Pe(t.prototype,r),n&&Pe(t,n),e}();function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Me=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te.isArray(t)&&(o=t[3],n=t[2],r=t[1],t=t[0]),this.left=null!=t?Te.toFloat(t):this.left,this.bottom=null!=r?Te.toFloat(r):this.bottom,this.right=null!=n?Te.toFloat(n):this.right,this.top=null!=o?Te.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t,r){var n=t.split(",");return e.fromArray(n,r)}},{key:"fromArray",value:function(t,r){return!0===r?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var r=Math.pow(10,e),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===t?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new me(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new be((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new Ee((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,r){var n,o;return t=t||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new e((this.left-n)*t+n,(this.bottom-o)*t+o,(this.right-n)*t+n,(this.top-o)*t+o)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+r,this.right+t,this.top+r)}},{key:"extend",value:function(t){var r=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":r=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":r=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":r=t}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var r=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((e.lon-i)/o);r=this.containsLonLat({lon:e.lon-a*o,lat:e.lat},{inclusive:t.inclusive})}return r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,r){if(null==r&&(r=!0),null==e||null==t)return!1;var n=!1;return n=r?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,n}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var r=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else r=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,o=r.left===e.right||r.right===e.left||r.top===e.bottom||r.bottom===e.top;if(t.inclusive||!o){var i=e.bottom>=r.bottom&&e.bottom<=r.top||r.bottom>=e.bottom&&r.bottom<=e.top,a=e.top>=r.bottom&&e.top<=r.top||r.top>e.bottom&&r.top<e.top,s=e.left>=r.left&&e.left<=r.right||r.left>=e.left&&r.left<=e.right,l=e.right>=r.left&&e.right<=r.right||r.right>=e.left&&r.right<=e.right;n=(i||a)&&(s||l)}if(t.worldBounds&&!n){var u=t.worldBounds,c=u.getWidth(),f=!u.containsBounds(r),h=!u.containsBounds(e);f&&!h?(e=e.add(-c,0),n=r.intersectsBounds(e,{inclusive:t.inclusive})):h&&!f&&(r=r.add(-c,0),n=e.intersectsBounds(r,{inclusive:t.inclusive}))}return n}},{key:"containsBounds",value:function(e,t,r){null==t&&(t=!1),null==r&&(r=!0);var n=this.contains(e.left,e.bottom,r),o=this.contains(e.right,e.bottom,r),i=this.contains(e.left,e.top,r),a=this.contains(e.right,e.top,r);return t?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(e){var t="",r=this.getCenterLonLat();return t+=e.lat<r.lat?"b":"t",t+=e.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var r=(t=t||{}).leftTolerance||0,n=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-n<=e.left;)o=o.add(i,0);for(;o.left+r>=e.right&&o.right>e.right;)o=o.add(-i,0);var a=o.left+r;a<e.right&&a>e.left&&o.right-n>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&ke(t.prototype,r),n&&ke(t,n),e}();function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Bounds=Me;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=Te.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&je(t.prototype,r),n&&je(t,n),e}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e,t,r){return(Ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry=Ae;var Ge=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ie(this,Fe(t).call(this))).components=[],r.componentTypes=null,null!=e&&r.addComponents(e),r.CLASS_NAME="SuperMap.Geometry.Collection",r.geometryType="Collection",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,Ae),r=t,(n=[{key:"destroy",value:function(){this.components.length=0,this.components=null,Ne(Fe(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new t,r=0,n=this.components.length;r<n;r++)e.addComponent(this.components[r].clone());return Te.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,r=this.components.length;t<r;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new Me,t=this.components;if(t)for(var r=0,n=t.length;r<n;r++)e.extend(t[r].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){Te.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var r=!1;if(e&&(null==this.componentTypes||Te.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),o=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(o)}else this.components.push(e);e.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(e){var t=!1;Te.isArray(e)||(e=[e]);for(var r=e.length-1;r>=0;--r)t=this.removeComponent(e[r])||t;return t}},{key:"removeComponent",value:function(e){return Te.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,r=this.components.length;t<r;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(Te.isArray(e.components)&&e.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(e.components[r])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(t,this.components[r].getVertices(e));return t}}])&&Le(r.prototype,n),o&&Le(r,o),t}();function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.Collection=Ge;var qe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ve(this,He(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.MultiPoint",r.geometryType="MultiPoint",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,Ge),r=t,(n=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Ue(r.prototype,n),o&&Ue(r,o),t}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.MultiPoint=qe;var Qe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=We(this,Ye(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],r.CLASS_NAME="SuperMap.Geometry.Curve",r.geometryType="Curve",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,qe),t}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e,t,r){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.Curve=Qe;var nt=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=$e(this,tt(t).call(this,e,r,n,o))).x=parseFloat(e),i.y=parseFloat(r),i.tag=o||0==o?parseFloat(o):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,Ae),r=t,(n=[{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y)),Te.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Me(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,et(tt(t.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(e){return[this]}}])&&Ze(r.prototype,n),o&&Ze(r,o),t}();function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function at(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e,t,r){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.Point=nt;var ct=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=at(this,lt(t).call(this,e))).CLASS_NAME="SuperMap.Geometry.LineString",r.geometryType="LineString",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,Qe),r=t,o=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},r=e[0],n=e[1],o=e[2],i=0,a=0,s=!0,l=0,u=0,c=0,f=[],h=(o.y-r.y)/(o.x-r.x),p=o.y-h*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==h*n.x+p||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),m=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));t.x=y/m,t.y=d/m;var v=(2*(i=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=o.x==r.x?t.x>r.x&&n.x>r.x||t.x<r.x&&n.x<r.x?360-c:c:t.y>h*t.x+p&&n.y>h*n.x+p||t.y<h*t.x+p&&n.y<h*n.x+p?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<h*n.x+p&&(s=!1):n.y>h*n.x+p&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var b=(r.y-t.y)/(r.x-t.x),g=b>=0?180*Math.atan(b)/Math.PI:Math.abs(180*Math.atan(b)/Math.PI)+90,S=Math.abs(t.y);r.y==S&&S==o.y&&r.x<o.x&&(g+=180);var w=r.y-t.y;f.push(r);for(var _=1;_<72;_++){l=a*_,u=g,s?w>=0?b>=0?u+=l:u=180-(u-90)+l:u=b>0?u-180+l:90-u+l:w>=0?b>=0?u-=l:u=180-(u-90)-l:u=b>=0?u-180-l:90-u-l,u=u*Math.PI/180;var O=t.x+i*Math.cos(u),x=t.y+i*Math.sin(u);f.push(new nt(O,x))}f.push(o)}return f}},{key:"createLineEPS",value:function(e){var r=[],n=e.length;if(n<2)return e;for(var o=0;o<n;){if("LTypeArc"==e[o].type){var i=t.createLineArc(r,o,n,e);r=i[0],o=i[1]}else r.push(e[o]),o++}return r}},{key:"createLineArc",value:function(e,r,n,o){if(0==r){var i=t.addPointEPS(o,r,n,"LTypeArc");Array.prototype.push.apply(e,i[0]),r=i[1]+1}else if(r==n-1){var a=[o[r-1],o[r]],s=t.calculateCircle(a);Array.prototype.push.apply(e,s),r++}else{var l=t.addPointEPS(o,r,n,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),r=l[1]+1}return[e,r]}},{key:"addPointEPS",value:function(e,r,n,o){var i,a=[],s=r+1;return 0==r?Array.prototype.push.apply(a,[e[r],e[r+1]]):r==n-1?Array.prototype.push.apply(a,[e[r-1],e[r]]):Array.prototype.push.apply(a,[e[r-1],e[r],e[r+1]]),"LTypeCurve"==o?i=t.calculatePointsFBZN(a):"LTypeArc"==o&&(i=t.calculateCircle(a)),[i,s]}}],(n=[{key:"removeComponent",value:function(e){var r=this.components&&this.components.length>2;return r&&st(lt(t.prototype),"removeComponent",this).apply(this,arguments),r}},{key:"getSortedSegments",value:function(){for(var e,t,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&it(r.prototype,n),o&&it(r,o),t}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e,t,r){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.LineString=ct;var vt=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=pt(this,dt(t).call(this,e,r,n))).x=parseFloat(e),o.y=parseFloat(r),o.text=n.toString(),o.bsInfo={h:null,w:null},o.element=document.createElement("span"),o.CLASS_NAME="SuperMap.Geometry.GeoText",o.geometryType="GeoText",o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,Ae),r=t,(n=[{key:"destroy",value:function(){yt(dt(t.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new nt(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y,this.text)),Te.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Me(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,r,n){var o,i,a,s,l=Te.cloneObject(e),u=(n.label||this.text).split("\n").length;if(t=parseFloat(t),r=parseFloat(r),u>1&&(r=parseFloat(r)*u),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":l.x+=t/2,l.y+=r/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=r/2;break;case"ct":l.y+=r/2;break;case"cb":l.y-=r/2;break;case"rt":l.x-=t/2,l.y+=r/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=t,o=l.x-parseFloat(t)/2,i=l.y+parseFloat(r)/2,s=l.x+parseFloat(t)/2,a=l.y-parseFloat(r)/2,new Me(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var r,n,o,i,a=this.getLabelPxSize(t),s=Te.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new Me(r,n,i,o)}},{key:"getLabelPxSize",value:function(e){var t,r,n,o,i=parseFloat(e.strokeWidth);t=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=Te.getTextBounds(e,a[l],this.element).textWidth+1*u.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(e){for(var t={},r=0,n=0,o=0;o<e.length;o++)e.charCodeAt(o)>255?r++:n++;return t.cnC=r,t.enC=n,t.textC=e.length,t}}])&&ht(r.prototype,n),o&&ht(r,o),t}();function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wt(e,t,r){return(wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_t(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.GeoText=vt;var xt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=St(this,_t(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.LinearRing",r.geometryType="LinearRing",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,ct),r=t,(n=[{key:"addComponent",value:function(e,r){var n=!1,o=this.components.pop();null==r&&e.equals(o)||(n=wt(_t(t.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return wt(_t(t.prototype),"addComponent",this).apply(this,[i]),n}},{key:"removeComponent",value:function(e){var r=this.components&&this.components.length>3;if(r){this.components.pop(),wt(_t(t.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];wt(_t(t.prototype),"addComponent",this).apply(this,[n])}return r}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&gt(r.prototype,n),o&&gt(r,o),t}();function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.LinearRing=xt;var kt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Tt(this,Pt(t).call(this,e))).componentTypes=["SuperMap.Geometry.LineString"],r.CLASS_NAME="SuperMap.Geometry.MultiLineString",r.geometryType="MultiLineString",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,Ge),t}();function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.MultiLineString=kt;var Lt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=jt(this,At(t).call(this,e))).componentTypes=["SuperMap.Geometry.Polygon"],r.CLASS_NAME="SuperMap.Geometry.MultiPolygon",r.geometryType="MultiPolygon",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,Ge),t}();function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ft(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.MultiPolygon=Lt;var Bt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ft(this,Dt(t).call(this,e))).componentTypes=["SuperMap.Geometry.LinearRing"],r.CLASS_NAME="SuperMap.Geometry.Polygon",r.geometryType="Polygon",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,Ge),r=t,(n=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,r=this.components.length;t<r;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&Nt(r.prototype,n),o&&Nt(r,o),t}();function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ht(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Geometry.Polygon=Bt;var Jt=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Ht(this,zt(t).call(this,e,r,n,o))).x=e,i.y=r,i.width=n,i.height=o,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(t,Ae),r=t,(n=[{key:"calculateBounds",value:function(){this.bounds=new Me(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Vt(r.prototype,n),o&&Vt(r,o),t}();function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Geometry.Rectangle=Jt;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yt=function(){function e(t,r){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var t,r,n;return t=e,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Wt(t.prototype,r),n&&Wt(t,n),e}();Yt.CREDENTIAL=null,c.Credential=Yt;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
c.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,r=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;t=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),l=parseInt(r[5],10),u=parseFloat(r[6]),c=0|u,f=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));t=new Date(t.getTime()+h)}}}else t=new Date("invalid");return t}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Xt=c.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=c.Event.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var o=Te.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=Te.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:t,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,r,{useCapture:n,passive:!1}):o.addEventListener(t,r,n):o.attachEvent&&o.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=Te.getElement(e)._eventCacheID;this._removeElementObservers(c.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var r=e[t],n=new Array(r.element,r.name,r.observer,r.useCapture);c.Event.stopObserving.apply(this,n)}},stopObserving:function(e,t,r,n){n=n||!1;var o=Te.getElement(e),i=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var a=!1,s=c.Event.observers[i];if(s)for(var l=0;!a&&l<s.length;){var u=s[l];if(u.name===t&&u.observer===r&&u.useCapture===n){s.splice(l,1),0==s.length&&delete c.Event.observers[i],a=!0;break}l++}return a&&(o.removeEventListener?o.removeEventListener(t,r,n):o&&o.detachEvent&&o.detachEvent("on"+t,r)),a},unloadCache:function(){if(c.Event&&c.Event.observers){for(var e in c.Event.observers){var t=c.Event.observers[e];c.Event._removeElementObservers.apply(this,[t])}c.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Event=Xt,c.Event.observe(window,"unload",c.Event.unloadCache,!1);
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zt=function(){function e(t,r,n,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,Te.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(Xt.stopObservingElement(this.element),this.element.hasScrollEvent&&Xt.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?Xt.stopObservingElement(this.element):(this.eventHandler=we.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=we.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),Xt.observe(e,n,this.eventHandler)}Xt.observe(e,"dragstart",Xt.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,r,n,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=n&&-1!==Te.indexOf(this.eventTypes,t)){null==r&&(r=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[t],0,a),"object"===Qt(o)&&o.extension&&this.extensionCount[t]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===t&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r=this.listeners[e];if(r&&0!=r.length){var n;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[t]))&&!1===n)break}return this.fallThrough||Xt.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,l=0;l<s;++l)i+=(o=n[l]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(Xt.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=Te.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=Te.pagePosition(this.element)),new be(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Kt(t.prototype,r),n&&Kt(t,n),e}();function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Events=Zt,c.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var er=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=Te.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&$t(t.prototype,r),n&&$t(t,n),e}();function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nr(e,t){return!t||"object"!==tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function or(e,t,r){return(or="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ir(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=er;var sr=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=nr(this,ir(t).call(this,null,null,r))).fid=null,o.geometry=e||null,o.attributes={},r&&(o.attributes=Te.extend(o.attributes,r)),o.bounds=null,o.state=null,o.style=n||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",c.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},t.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(t,er),r=t,(n=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,or(ir(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new t(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===c.State.UPDATE)switch(this.state){case c.State.UNKNOWN:case c.State.DELETE:this.state=e;break;case c.State.UPDATE:case c.State.INSERT:}else if(e===c.State.INSERT)switch(this.state){case c.State.UNKNOWN:break;default:this.state=e}else if(e===c.State.DELETE)switch(this.state){case c.State.INSERT:case c.State.DELETE:break;case c.State.UNKNOWN:case c.State.UPDATE:this.state=e}else e===c.State.UNKNOWN&&(this.state=e)}}])&&rr(r.prototype,n),o&&rr(r,o),t}();function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Feature.Vector=sr;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ur=function(){function e(t){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,Te.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&lr(t.prototype,r),n&&lr(t,n),e}();function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Format=ur;var dr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hr(this,pr(t).call(this,e))).indent="    ",r.space=" ",r.newline="\n",r.level=0,r.pretty=!1,r.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),r.CLASS_NAME="SuperMap.Format.JSON",r.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,r,n,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(r=this.write.apply(this,[t,this.pretty]),n=this.write.apply(this,[e[t],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,r=["["];this.level+=1;for(var n=0,o=e.length;n<o;++n)null!=(t=this.write.apply(this,[e[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,r){var n=t[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,ur),r=t,(n=[{key:"read",value:function(e,t){var r;if(this.nativeJSON)try{r=JSON.parse(e,t)}catch(e){}return this.keepData&&(this.data=r),r}},{key:"write",value:function(e,t){this.pretty=!!t;var r=null,n=cr(e);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){}return r}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&fr(r.prototype,n),o&&fr(r,o),t}();function mr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Format.JSON=dr;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vr=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t){var r=new e,n=255;null!==t.red&&(n=Number(t.red)),r.red=n;var o=0;null!==t.green&&(o=Number(t.green)),r.green=o;var i=0;return null!==t.blue&&(i=Number(t.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&mr(t.prototype,r),n&&mr(t,n),e}();function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ServerColor=vr;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new vr(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new vr(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new vr(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:vr.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:vr.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:vr.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=Te.copyAttributes(e,this)}}])&&br(t.prototype,r),n&&br(t,n),e}();function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ServerStyle=gr;var Cr=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=_r(t).call(this,e))||"object"!==Sr(o)&&"function"!=typeof o?Or(n):o).measure=null,e&&Te.extend(Or(r),e),r.CLASS_NAME="SuperMap.PointWithMeasure",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(t,nt),r=t,o=[{key:"fromJson",value:function(e){if(e)return new t({x:e.x,y:e.y,measure:e.measure})}}],(n=[{key:"equals",value:function(e){var t=!1;if(null!=e){var r=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=r||n&&o}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&wr(r.prototype,n),o&&wr(r,o),t}();function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.PointWithMeasure=Cr;var jr=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Er(t).call(this,e,r))||"object"!==Tr(i)&&"function"!=typeof i?kr(o):i).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],r&&Te.extend(kr(n),r),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(t,Ge),r=t,o=[{key:"fromJson",value:function(e){if(e){var r=e.parts||[],n=e.points||[],o=r.length,i=[];if(!(o>0))return null;for(var a=0,s=0,l=[];a<o;a++){for(var u=0;u<r[a];u++)l.push(Cr.fromJson(n[s+u]));s+=r[a],l[0].equals(l[r[a]-1])?i.push(new xt(l)):i.push(new ct(l)),l=[]}return new t(i,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(n=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)e+=this.components[r].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&Pr(r.prototype,n),o&&Pr(r,o),t}();function Ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Route=jr;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Rr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:gr.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var r=0,n=[],o=[],i=null,a=t.components,s=t.CLASS_NAME,l={epsgCode:t.SRID};if(isNaN(t.id)||(r=t.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(t instanceof qe||t instanceof kt)){for(var u=a.length,c=0;c<u;c++){var f=a[c].getVertices().length;n.push(f);for(var h=0;h<f;h++)o.push(new nt(a[c].getVertices()[h].x,a[c].getVertices()[h].y))}i="SuperMap.Geometry.MultiPoint"==s?p.POINT:p.LINE}else if(t instanceof Lt){for(var y=a.length,d=0;d<y;d++)for(var m=a[d].components,v=m.length,b=0;b<v;b++){var g=m[b].getVertices().length+1;n.push(g);for(var S=0;S<g-1;S++)o.push(new nt(m[b].getVertices()[S].x,m[b].getVertices()[S].y));o.push(new nt(m[b].getVertices()[0].x,m[b].getVertices()[0].y))}i=p.REGION}else if(t instanceof Bt){for(var w=a.length,_=0;_<w;_++){var O=a[_].getVertices().length+1;n.push(O);for(var x=0;x<O-1;x++)o.push(new nt(a[_].getVertices()[x].x,a[_].getVertices()[x].y));o.push(new nt(a[_].getVertices()[0].x,a[_].getVertices()[0].y))}i=p.REGION}else{for(var C=t.getVertices().length,T=0;T<C;T++)o.push(new nt(t.getVertices()[T].x,t.getVertices()[T].y));t instanceof xt&&(o.push(new nt(t.getVertices()[0].x,t.getVertices()[0].y)),C++),n.push(C),i=t instanceof nt?p.POINT:p.LINE}return new e({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:l})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"bubbleSort",value:function(e,t,r,n){for(var o=0;o<e.length;o++)for(var i=0;i<e.length;i++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a;var s=t[i];if(t[i]=t[o],t[o]=s,r&&r.length>0){var l=r[i];r[i]=r[o],r[o]=l}if(n&&n.length>0){var u=n[i];n[i]=n[o],n[o]=u}}}}],(r=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case p.POINT:return e.toGeoPoint();case p.LINE:return e.toGeoLine();case p.LINEM:return e.toGeoLinem();case p.REGION:return e.toGeoRegion();case p.POINTEPS:return e.toGeoPoint();case p.LINEEPS:return e.toGeoLineEPS();case p.REGIONEPS:return e.toGeoRegionEPS()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r)return new nt(t[0].x,t[0].y);for(var n=[],o=0;o<r;o++)n.push(new nt(t[o].x,t[o].y));return new qe(n)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r){for(var n=[],o=0;o<e[0];o++)n.push(new nt(t[o].x,t[o].y));return n[0].equals(n[e[0]-1])?new xt(n):new ct(n)}for(var i=[],a=0;a<r;a++){for(var s=[],l=0;l<e[a];l++)s.push(new nt(t[l].x,t[l].y));i.push(new ct(s)),t.splice(0,e[a])}return new kt(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(e=0,r=[];e<i[0];e++)r.push(new nt(a[e].x,a[e].y,a[e].type));return r[0].equals(r[i[0]-1])?(o=ct.createLineEPS(r),new xt(o)):(o=ct.createLineEPS(r),new ct(o))}for(e=0,n=[];e<s;e++){for(t=0,r=[];t<i[e];t++)r.push(new nt(a[t].x,a[t].y));o=ct.createLineEPS(r),n.push(new ct(o)),a.splice(0,i[e])}return new kt(n)}return null}},{key:"toGeoLinem",value:function(){return jr.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new nt(n[s].x,n[s].y));return i.push(new Bt([new xt(a)])),new Lt(i)}for(var l=[],u=[],c=[],f=[],h=[],p=0,y=0;p<o;p++){for(var d=0;d<t[p];d++)a.push(new nt(n[y+d].x,n[y+d].y));y+=t[p];var m=new Bt([new xt(a)]);a=[],c.push(m),0===r.length&&f.push(m.getBounds()),h.push(1),u.push(m.getArea())}if(e.bubbleSort(u,c,r,f),0===r.length){for(var v=[],b=1;b<c.length;b++)for(var g=b-1;g>=0;g--)if(v[b]=-1,f[g].containsBounds(f[b])){h[b]=-1*h[g],h[b]<0&&(v[b]=g);break}for(var S=0;S<c.length;S++)h[S]>0?i.push(c[S]):(i[v[S]].components=i[v[S]].components.concat(c[S].components),i.push(""))}else{i=new Array;for(var w=0;w<c.length;w++)if(r[w]&&-1==r[w]?l=l.concat(c[w].components):(l.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(l),l=[]),i.push(c[w])),w==o-1){var _=i.length;if(_)i[_-1].components=i[_-1].components.concat(l);else for(var O=0,x=l.length;O<x;O++)i.push(new Bt(l))}}return new Lt(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var l=0;l<n.length;l++)s.push(new nt(n[l].x,n[l].y));return i=ct.createLineEPS(s),a.push(new Bt([new xt(i)])),new Lt(a)}for(var u=[],c=[],f=[],h=[],p=[],y=0,d=0;y<o;y++){for(var m=0;m<t[y];m++)s.push(new nt(n[d+m].x,n[d+m].y));d+=t[y],i=ct.createLineEPS(s);var v=new Bt([new xt(i)]);s=[],f.push(v),0===r.length&&h.push(v.getBounds()),p.push(1),c.push(v.getArea())}if(e.bubbleSort(c,f,r,h),0===r.length){for(var b=[],g=1;g<f.length;g++)for(var S=g-1;S>=0;S--)if(b[g]=-1,h[S].containsBounds(h[g])){p[g]=-1*p[S],p[g]<0&&(b[g]=S);break}for(var w=0;w<f.length;w++)p[w]>0?a.push(f[w]):(a[b[w]].components=a[b[w]].components.concat(f[w].components),a.push(""))}else{a=new Array;for(var _=0;_<f.length;_++)if(r[_]&&-1==r[_]?u=u.concat(f[_].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[_])),_==o-1){var O=a.length;if(O)a[O-1].components=a[O-1].components.concat(u);else for(var x=0,C=u.length;x<C;x++)a.push(new Bt(u))}}return new Lt(a)}}])&&Ar(t.prototype,r),n&&Ar(t,n),e}();function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nr(e,t){return!t||"object"!==Lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e,t,r){return(Fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ServerGeometry=Rr;var Br=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Nr(this,Dr(t).call(this,e))).ignoreExtraDims=!0,r.CLASS_NAME="SuperMap.Format.GeoJSON",r.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new nt(e[0],e[1])},multipoint:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new qe(t)},linestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new ct(t)},multilinestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new kt(t)},polygon:function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new xt(r.components),n.push(t)}return new Bt(n)},multipolygon:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new Lt(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new Bt([new xt([new nt(e[0][0],e[0][1]),new nt(e[1][0],e[0][1]),new nt(e[1][0],e[1][1]),new nt(e[0][0],e[1][1]),new nt(e[0][0],e[0][1])])])}},r.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),r={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(r.properties.texts=e.geometry.texts,r.properties.textStyle=e.geometry.textStyle),e.fid&&(r.id=e.fid),e.ID&&(r.id=e.ID),r},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,r=new Rr(e).toGeometry()||e,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),t=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:t}:{type:n,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var r in e)"x"===r||"y"===r||null===e[r]||isNaN(e[r])||t.push(e[r]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.polygon.apply(this,[e.components[r]]));return t},collection:function(e){for(var t=e.components.length,r=new Array(t),n=0;n<t;++n)r[n]=this.extract.geometry.apply(this,[e.components[n]]);return r}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,dr),r=t,(n=[{key:"read",value:function(e,r,n){r=r||"FeatureCollection";var o=null,i=null;if(i="string"==typeof e?Fr(Dr(t.prototype),"read",this).call(this,e,n):e){if("string"!=typeof i.type);else if(this.isValidType(i,r))switch(r){case"Geometry":try{o=this.parseGeometry(i)}catch(e){}break;case"Feature":try{(o=this.parseFeature(i)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(o=[],i.type){case"Feature":try{o.push(this.parseFeature(i))}catch(e){o=null}break;case"FeatureCollection":for(var a=0,s=i.features.length;a<s;++a)try{o.push(this.parseFeature(i.features[a]))}catch(e){o=null}break;default:try{var l=this.parseGeometry(i);o.push(new sr(l))}catch(e){o=null}}}}else;return o}},{key:"write",value:function(e,r){return Fr(Dr(t.prototype),"write",this).call(this,this.toGeoJSON(e),r)}},{key:"fromGeoJSON",value:function(e,t,r){var n=this,o=this.read(e,t,r);return Te.isArray(o)?o.map(function(e){return n._toiSevrerFeature(e)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(Te.isArray(e)){t.type="FeatureCollection";var r=e.length;t.features=new Array(r);for(var n=0;n<r;++n){var o=e[n];if(s(o)){var i={};i.geometry=o,t.features[n]=this.extract.feature.apply(this,[i])}else t.features[n]=this.extract.feature.apply(this,[o])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")}return t}},{key:"isValidType",value:function(e,t){var r=!1;switch(t){case"Geometry":-1==Te.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:e.type==t&&(r=!0)}return r}},{key:"parseFeature",value:function(e){var t,r,n,o;n=e.properties?e.properties:{},o=e.geometry&&e.geometry.bbox||e.bbox;try{r=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new sr(r,n),o&&(t.bounds=Me.fromArray(o)),e.id&&(t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!Te.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var r=e.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new Ge(n)}else{if(!Te.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),r={};if(t.match(/epsg:/i)){var n=parseInt(t.substring(t.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,r=[],n=[];for(var o in t)r.push(o),n.push(t[o]);var i={fieldNames:r,fieldValues:n,geometry:Rr.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var r=e.fieldNames,n=e.fieldValues;for(var o in r)t[r[o]]=n[o]}(e,t);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in e)r.indexOf(n)>-1||(t[n]=e[n]);return t}}])&&Ir(r.prototype,n),o&&Ir(r,o),t}();function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hr(e,t){return!t||"object"!==Ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Format.GeoJSON=Br;var Jr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hr(this,zr(t).call(this,e))).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},r.CLASS_NAME="SuperMap.Format.WKT",r.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.point.apply(this,[e.components[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.polygon.apply(this,[e.components[r]])+")");return t.join(",")},collection:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extractGeometry.apply(this,[e.components[r]]));return t.join(",")}},r.parse={point:function(e){var t=ge.trim(e).split(this.regExes.spaces);return new sr(new nt(t[0],t[1]))},multipoint:function(e){for(var t,r=ge.trim(e).split(","),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[t]).geometry);return new sr(new qe(n))},linestring:function(e){for(var t=ge.trim(e).split(","),r=[],n=0,o=t.length;n<o;++n)r.push(this.parse.point.apply(this,[t[n]]).geometry);return new sr(new ct(r))},multilinestring:function(e){for(var t,r=ge.trim(e).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[t]).geometry);return new sr(new kt(n))},polygon:function(e){for(var t,r,n,o=ge.trim(e).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)t=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[t]).geometry,n=new xt(r.components),i.push(n);return new sr(new Bt(i))},multipolygon:function(e){for(var t,r=ge.trim(e).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[t]).geometry);return new sr(new Lt(n))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=ge.trim(e).split("|"),r=[],n=0,o=t.length;n<o;++n)r.push(this.read(t[n]));return r}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,ur),r=t,(n=[{key:"read",value:function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(e);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(t=this.parse[r].apply(this,[n]))),t}},{key:"write",value:function(e){var t,r,n;e.constructor===Array?(t=e,n=!0):(t=[e],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)n&&i>0&&o.push(","),r=t[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&Vr(r.prototype,n),o&&Vr(r,o),t}();c.Format.WKT=Jr;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=r.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new Zt(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,r,n;return t=e,(r=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&Yr(t.prototype,r),n&&Yr(t,n),e}();function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $r(e,t,r){return($r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.TimeControlBase=Xr;var rn=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this;var a=Zr(n=!(i=en(t).call(this,r))||"object"!==Qr(i)&&"function"!=typeof i?Zr(o):i);return a.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),a.update=a.update.bind(a),a.oldTime=a.currentTime,a.CLASS_NAME="SuperMap.TimeFlowControl",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(t,Xr),r=t,(n=[{key:"updateOptions",value:function(e){e=e||{},$r(en(t.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){$r(en(t.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){$r(en(t.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&Kr(r.prototype,n),o&&Kr(r,o),t}();c.TimeFlowControl=rn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r(61),r(65);var nn=r(30),on=r.n(nn);function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sn=window.fetch,ln=(c.setCORS=function(e){c.CORS=e},c.isCORS=function(){return void 0!=c.CORS?c.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),un=(c.setRequestTimeout=function(e){return c.RequestTimeout=e},c.getRequestTimeout=function(){return c.RequestTimeout||45e3}),cn=c.FetchRequest={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this.delete(t,r,n);default:return this.get(t,r,n)}},supportDirectRequest:function(e,t){return!!Te.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:ln()||t.proxy)},get:function(e,t,r){r=r||{};if(e=Te.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){var n={url:e=e.replace(".json",".jsonp"),data:t};return c.Util.RequestJSONPPromise.GET(n)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,r):this._fetch(e,t,r,"GET")},delete:function(e,t,r){r=r||{};if(e=Te.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=DELETE",data:t};return c.Util.RequestJSONPPromise.DELETE(n)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,r):this._fetch(e,t,r,"DELETE")},post:function(e,t,r){if(r=r||{},!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=POST",data:t};return c.Util.RequestJSONPPromise.POST(n)}return this._fetch(this._processUrl(e,r),t,r,"POST")},put:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=PUT",data:t};return c.Util.RequestJSONPPromise.PUT(n)}return this._fetch(e,t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,sn(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:void 0,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:un()}).then(function(e){return e})):sn(e,{method:n,body:"PUT"===n||"POST"===n?t:void 0,headers:r.headers,credentials:r.withCredentials?"include":"omit",mode:"cors",timeout:un()}).then(function(e){return e})},_fetchJsonp:function(e,t){return t=t||{},on()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},e),t.then(r,n)})},_getParameterString:function(e){var t=[];for(var r in e){var n=e[r];if(null!=n&&"function"!=typeof n){var o;if("object"===an(n)&&n.constructor===Array){for(var i,a=[],s=0,l=n.length;s<l;s++)i=n[s],a.push(encodeURIComponent(null===i||void 0===i?"":i));o="["+a.join(",")+"]"}else o=encodeURIComponent(n);t.push(encodeURIComponent(r)+"="+o)}}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=c.Util.toJSON(e[t]));var r=encodeURIComponent(e[t]);this.queryValues.push(r)}},issue:function(e){for(var t=this,r=t.getUid(),n=e.url,o=[],i=new Promise(function(e){t.supermap_callbacks[r]=function(n){delete t.supermap_callbacks[r],e(n)}}),a=n,s=0,l=t.queryKeys?t.queryKeys.length:0,u=0;u<l;u++)if(a.length+t.queryKeys[u].length+2>=t.limitLength){if(0==s)return!1;o.push(a),a=n,s=0,u--}else if(a.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var c=t.queryValues[u];c.length>0;){var f=t.limitLength-a.length-t.queryKeys[u].length-2;a.indexOf("?")>-1?a+="&":a+="?";var h=c.substring(0,f);"%"===h.substring(f-1,f)?(f-=1,h=c.substring(0,f)):"%"===h.substring(f-2,f-1)&&(f-=2,h=c.substring(0,f)),a+=t.queryKeys[u]+"="+h,c=c.substring(f),h.length>0&&(o.push(a),a=n,s=0)}else s++,a.indexOf("?")>-1?a+="&":a+="?",a+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(a),t.send(o,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+r+"]",e&&e.proxy),i},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,r){var n=e.length;if(n>0)for(var o=(new Date).getTime(),i=0;i<n;i++){var a=e[i];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+n,a+="&sectionIndex="+i,a+="&jsonpUserID="+o,r&&(a=decodeURIComponent(a),a=r+encodeURIComponent(a)),on()(a,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"generateToken",value:function(e,t){var r=this.servers[e];if(r)return cn.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},Te.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=Te.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,r,n){e+="/"===e.substr(e.length-1,1)?"services/security/login.json":"/services/security/login.json";var o={username:t&&t.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return cn.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return cn.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,r){var n=e.SSO+"/login?service="+t;this._open(n,r)}},{key:"loginiPortal",value:function(e,t,r){e+="/"===e.substr(e.length-1,1)?"web/login.json":"/web/login.json";var n={username:t&&t.toString(),password:r&&r.toString()};n=JSON.stringify(n);return cn.post(e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return cn.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,r){if(Te.isInTheSameDomain(e)){var n="/"===e.substr(e.length-1,1)?e+"icloud/security/tokens.json":e+"/icloud/security/tokens.json",o=t||{},i={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};i=JSON.stringify(i);var a=this;return cn.post(n,i,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!r||r.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"_open",value:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(r=null)&&fn(t.prototype,r),n&&fn(t,n),e}();function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}hn.INNER_WINDOW_WIDTH=600,hn.INNER_WINDOW_HEIGHT=600,hn.SSO="https://sso.supermap.com",hn.ONLINE="https://www.supermapol.com",c.SecurityManager=hn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yn=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(n.withCredentials=!0),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=hn.imanagerToken;return o&&(n.headers||(n.headers=[]),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),cn.commit(e,t,r,n).then(function(e){return e.json()})}}])&&pn(t.prototype,r),n&&pn(t,n),e}();c.iManagerServiceBase=yn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",Te.extend(this,t)};function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bn(e,t){return!t||"object"!==mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.iManagerCreateNodeParam=dn;var wn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bn(this,gn(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(t,yn),r=t,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new dn(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new dn(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&vn(r.prototype,n),o&&vn(r,o),t}();function _n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.iManager=wn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var On=function(){function e(t,r){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.serviceUrl=t,this.serverType=h.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=this.createCredentialUrl(t),cn.commit(e,t,r,n).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,r=this.getCredential();if(r){var n=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===n?t+=r.getUrlParameters():t.indexOf("?")>-1&&"?"!==n?t+="&"+r.getUrlParameters():t+="?"+r.getUrlParameters()}return t}},{key:"getCredential",value:function(){var e,t=hn.getToken(this.serviceUrl);return(e=t?new Yt(t,"token"):null)||(e=(t=this.getKey())?new Yt(t,"key"):null),e}},{key:"getKey",value:function(){}}])&&_n(t.prototype,r),n&&_n(t,n),e}();c.iPortalServiceBase=On;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],Te.extend(this,t)};c.iPortalQueryParam=xn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Cn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,Te.extend(this,t)};function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.iPortalQueryResult=Cn;var jn=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=En(t).call(this,e))||"object"!==Tn(i)&&"function"!=typeof i?kn(o):i,r=r||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},Te.extend(kn(n),r),n.resourceUrl=e+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=e+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,On),r=t,(n=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&Pn(r.prototype,n),o&&Pn(r,o),t}();c.iPortalResource=jn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var An=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",Te.extend(this,t)};function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function In(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.iPortalShareParam=An;var Dn=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=In(this,Nn(t).call(this,e,r))).iportalUrl=e,r=r||{},n.withCredentials=r.withCredentials||!1,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,On),r=t,(n=[{key:"load",value:function(){return cn.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof xn))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",r,e).then(function(e){var r=[];e.content.forEach(function(e){r.push(new jn(t.iportalUrl,e))});var n=new Cn;return n.content=r,n.total=e.total,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.aggregations=e.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof An))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var r={ids:e.ids,entities:e.entities},n=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(e){return e})}}])&&Ln(r.prototype,n),o&&Ln(r,o),t}();c.iPortal=Dn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Gn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,Te.extend(this,t)};function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vn(e,t){return!t||"object"!==Bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zn(e,t){return(zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.iPortalShareEntity=Gn;var qn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Vn(this,Hn(t).call(this,e))).iportalUrl=e,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zn(e,t)}(t,On),r=t,(n=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(e.ids))):this.request("DELETE",r)}}])&&Un(r.prototype,n),o&&Un(r,o),t}();function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.iPortalUser=qn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wn=function(){function e(t,r){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,Te.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),Te.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),n.serverType=n.serverType||h.ISERVER,r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,Te.extend(this,r),n.isInTheSameDomain=Te.isInTheSameDomain(n.url),n.events=new Zt(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;Te.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:t.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain;var r=this.getCredential(e.url);if(r){var n=e.url.substring(e.url.length-1,e.url.length);e.url.indexOf("?")>-1&&"?"===n?e.url+=r.getUrlParameters():e.url.indexOf("?")>-1&&"?"!==n?e.url+="&"+r.getUrlParameters():e.url+="?"+r.getUrlParameters()}t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t,r,n=e;switch(this.serverType){case h.IPORTAL:(t=(r=hn.getToken(n))?new Yt(r,"token"):null)||(t=(r=hn.getKey(n))?new Yt(r,"key"):null);break;case h.ONLINE:t=(r=hn.getKey(n))?new Yt(r,"key"):null;break;default:t=(r=hn.getToken(n))?new Yt(r,"token"):null}return t}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(r,r.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=Te.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=Te.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=Te.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=Te.urlAppend(e.url,Te.getParameterString(e.params||{}))),e.params=e.data),cn.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var r=t;("string"==typeof t&&(r=(new dr).read(t)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r.error)?(e.scope?we.bind(e.failure,e.scope):e.failure)(r):(r.succeed=void 0==r.succeed||r.succeed,(e.scope?we.bind(e.success,e.scope):e.success)(r))}).catch(function(t){(e.scope?we.bind(e.failure,e.scope):e.failure)(t)})}}])&&Jn(t.prototype,r),n&&Jn(t,n),e}();function Yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.CommonServiceBase=Wn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xn=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters){var r=[];t.filters.split(",").map(function(e){return r.push('"'+e+'"'),e}),t.filters=r}this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,Te.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&Yn(t.prototype,r),n&&Yn(t,n),e}();function Qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.GeoCodingParameter=Xn;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kn=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters){var r=[];t.filters.split(",").map(function(e){return r.push('"'+e+'"'),e}),t.filters=r}this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,Te.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&Qn(t.prototype,r),n&&Qn(t,n),e}();function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eo(e,t){return!t||"object"!==Zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function to(e,t,r){return(to="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ro(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeoDecodingParameter=Kn;var oo=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eo(this,ro(t).call(this,e,r))).options=r||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){to(ro(t.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof Xn&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof Kn&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){e.succeed&&delete e.succeed,to(ro(t.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){to(ro(t.prototype),"serviceProcessFailed",this).call(this,e)}}])&&$n(r.prototype,n),o&&$n(r,o),t}();function io(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.AddressMatchService=oo;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ao=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",Te.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.queryType=null}}])&&io(t.prototype,r),n&&io(t,n),e}();function so(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.AggQueryBuilderParameter=ao;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",Te.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.aggName=null,e.aggFieldName=null,e.aggType=null,e.subAgg&&(e.subAgg=null)}}])&&so(t.prototype,r),n&&so(t,n),e}();function uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.AggregationParameter=lo;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var co=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){var r={};for(var n in e){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=e[n]:t[n]=e[n]}t.parameter=r}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&uo(t.prototype,r),n&&uo(t,n),e}();function fo(e){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function po(e,t){return!t||"object"!==fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yo(e,t,r){return(yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.AreaSolarRadiationParameters=co;var bo=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=po(this,mo(t).call(this,e,r))).format=f.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){yo(mo(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,r=this;if((e=Te.transformResult(e))&&r.format===f.GEOJSON&&"function"==typeof r.toGeoJSONResult)if(Te.isArray(e)){for(var n=0;n<e.length;n++)e[n]=r.toGeoJSONResult(e[n]);t=e}else t=r.toGeoJSONResult(e);t||(t=e),r.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new Br;if(e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=t.toGeoJSON(n[r].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&ho(r.prototype,n),o&&ho(r,o),t}();function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wo(e,t){return!t||"object"!==go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _o(e,t,r){return(_o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SpatialAnalystBase=bo;var Co=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wo(this,Oo(t).call(this,e,r))).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){_o(Oo(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof co){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var r={};e instanceof co&&(t.url+="datasets/"+e.dataset+"/solarradiation"),co.toObject(e,r);var n=Te.toJSON(r);t.url+=".json?returnContent=true",t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&So(r.prototype,n),o&&So(r,o),t}();function To(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.AreaSolarRadiationService=Co;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Po=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,Te.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&To(t.prototype,r),n&&To(t,n),e}();function Eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.BufferDistance=Po;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ko=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=D.FLAT,this.leftDistance=new Po,this.rightDistance=new Po,this.semicircleLineSegment=4,this.radiusUnit=S.METER,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&Eo(t.prototype,r),n&&Eo(t,n),e}();function Mo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.BufferSetting=ko;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new ko,Te.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&Mo(t.prototype,r),n&&Mo(t,n),e}();function Ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.BufferAnalystParameters=jo;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ro=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=H.RECORDSET_ONLY,this.deleteExistResultDataset=!0,Te.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&Ao(t.prototype,r),n&&Ao(t,n),e}();function Lo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DataReturnOption=Ro;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Io=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=Te.copyAttributes(e,this)}}])&&Lo(t.prototype,r),n&&Lo(t,n),e}();function No(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.JoinItem=Io;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&No(t.prototype,r),n&&No(t,n),e}();function Do(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DatasourceConnectionInfo=Fo;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Go=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof Fo&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&Do(t.prototype,r),n&&Do(t,n),e}();function Bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.LinkItem=Go;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Uo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&Bo(t.prototype,r),n&&Bo(t,n),e}();function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ho(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qo(e,t,r){return(qo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Jo(e){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wo(e,t){return(Wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FilterParameter=Uo;var Yo=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Jo(t).call(this,e))||"object"!==Vo(o)&&"function"!=typeof o?zo(n):o).dataset=null,r.filterQueryParameter=new Uo,r.resultSetting=new Ro,r.isAttributeRetained=!0,r.isUnion=!1,Te.extend(zo(r),e),r.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wo(e,t)}(t,jo),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===r)t.dataReturnOption=e.resultSetting;else{if("dataset"===r)continue;t[r]=e[r]}}}],(n=[{key:"destroy",value:function(){qo(Jo(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&Ho(r.prototype,n),o&&Ho(r,o),t}();function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zo(e,t,r){return(Zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$o(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.DatasetBufferAnalystParameters=Yo;var ti=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=$o(t).call(this,e))||"object"!==Xo(o)&&"function"!=typeof o?Ko(n):o).sourceGeometry=null,r.sourceGeometrySRID=null,e&&Te.extend(Ko(r),e),r.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(t,jo),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r){var n={};for(var o in e.bufferSetting)n[o]=e.bufferSetting[o];t.analystParameter=n}else"sourceGeometry"===r?t.sourceGeometry=Rr.fromGeometry(e.sourceGeometry):t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Zo($o(t.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&Qo(r.prototype,n),o&&Qo(r,o),t}();function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ii(e,t,r){return(ii="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ai(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeometryBufferAnalystParameters=ti;var li=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=ai(t).call(this,e,r))||"object"!==ri(i)&&"function"!=typeof i?oi(o):i).mode=null,r&&Te.extend(oi(n),r),n.CLASS_NAME="SuperMap.BufferAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){ii(ai(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof Yo?(r.mode="datasets",r.url+="datasets/"+e.dataset+"/buffer",Yo.toObject(e,t)):e instanceof ti&&(r.mode="geometry",r.url+="geometry/buffer",ti.toObject(e,t));var n=Te.toJSON(t);r.url+=".json?returnContent=true",r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&ni(r.prototype,n),o&&ni(r,o),t}();function ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.BufferAnalystService=li;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ci=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=B.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",Te.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof Fo&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&ui(t.prototype,r),n&&ui(t,n),e}();function fi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.OutputSetting=ci;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=T.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=E.YELLOW_RED,Te.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&fi(t.prototype,r),n&&fi(t,n),e}();function pi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.MappingParameters=hi;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yi=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=se.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;Te.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"bounds"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&pi(t.prototype,r),n&&pi(t,n),e}();function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vi(e,t){return!t||"object"!==di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bi(e,t,r){return(bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.BuffersAnalystJobsParameter=yi;var wi=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(n=vi(this,gi(t).call(this,e,r))).CLASS_NAME="SuperMap.ProcessingServiceBase",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){bi(gi(t.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;cn.get(t._processUrl(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,r,n){var o=this,i=null;t&&t instanceof r&&(i=new Object,r.toObject(t,i));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{}),s={proxy:o.proxy,headers:a,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};cn.post(o._processUrl(e),JSON.stringify(i),s).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,n):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=Te.transformResult(e),t=t||1e3;var r=this;if(e)var n=setInterval(function(){cn.get(r._processUrl(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){bi(gi(t.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return-1===e.indexOf(".json")&&(e+=".json"),hn.getToken(e)&&(e+="?token="+hn.getToken(e)),e}}])&&mi(r.prototype,n),o&&mi(r,o),t}();function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xi(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ci(e,t,r){return(Ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ti(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ProcessingServiceBase=wi;var Ei=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xi(this,Ti(t).call(this,e,r))).url+="/spatialanalyst/buffers",n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){Ci(Ti(t.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){Ci(Ti(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){Ci(Ti(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addBuffersJob",value:function(e,r){Ci(Ti(t.prototype),"addJob",this).call(this,this.url,e,yi,r)}}])&&Oi(r.prototype,n),o&&Oi(r,o),t}();function ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.BuffersAnalystJobsService=Ei;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&ki(t.prototype,r),n&&ki(t,n),e}();function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ri(e,t){return!t||"object"!==ji(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Li(e,t,r){return(Li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ii(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.BurstPipelineAnalystParameters=Mi;var Fi=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ri(this,Ii(t).call(this,e,r))).format=f.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Li(Ii(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=Te.transformResult(e))&&this.format===f.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&Ai(r.prototype,n),o&&Ai(r,o),t}();function Di(e){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bi(e,t){return!t||"object"!==Di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ui(e,t,r){return(Ui="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hi(e,t){return(Hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.NetworkAnalystServiceBase=Fi;var zi=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bi(this,Vi(t).call(this,e,r))).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hi(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){Ui(Vi(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof Mi))return null;var t,r=this,n=r.url.substr(r.url.length-1,1);if(r.url=r.url+("/"===n?"burstAnalyse":"/burstAnalyse")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&Gi(r.prototype,n),o&&Gi(r,o),t}();function qi(e){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wi(e,t){return!t||"object"!==qi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yi(e,t,r){return(Yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Xi(e){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,t){return(Qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.BurstPipelineAnalystService=zi;var Ki=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Wi(this,Xi(t).call(this,e,r))).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qi(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Yi(Xi(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="chartFeatureInfoSpecs.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Ji(r.prototype,n),o&&Ji(r,o),t}();function Zi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ChartFeatureInfoSpecsService=Ki;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Zi(t.prototype,r),n&&Zi(t,n),e}();function ea(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ChartQueryFilterParameter=$i;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ta=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],r=this.chartLayerNames.length,n=0;n<r;n++)t.push('"'+this.chartLayerNames[n]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof $i&&o.push(s.toJson())}var l="["+o.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&ea(t.prototype,r),n&&ea(t,n),e}();function ra(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ChartQueryParameters=ta;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var na=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=p.LINE,this.queryOption=y.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,r=e.queryParams,n=r.length;t<n;t++)r[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&ra(t.prototype,r),n&&ra(t,n),e}();function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aa(e,t){return!t||"object"!==oa(t)&&"function"!=typeof t?la(e):t}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function la(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryParameters=na;var ca=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=aa(this,sa(t).call(this,e,r)),r=r||{},n.returnContent=null,n.format=f.GEOJSON,Te.extend(la(n),r);var o,i=la(n);return r.format&&(i.format=r.format.toUpperCase()),i.url?(o=i.url.substr(i.url.length-1,1),i.url+="/"===o?"queryResults.json?":"/queryResults.json?",n.CLASS_NAME="SuperMap.ChartQueryService",n):aa(n)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Wn.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof ta){var t,r=this;r.returnContent=e.returnContent,t=e.getVariablesJson(),r.returnContent&&(r.url+="returnContent="+r.returnContent),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=Te.transformResult(e))&&e.recordsets&&this.format===f.GEOJSON)for(var t=0,r=e.recordsets,n=r.length;t<n;t++)if(r[t].features){var o=new Br;r[t].features=o.toGeoJSON(r[t].features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new na({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&ia(r.prototype,n),o&&ia(r,o),t}();function fa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ChartQueryService=ca;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ha=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return Te.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Rr.fromGeometry(this.clipRegion)})}}])&&fa(t.prototype,r),n&&fa(t,n),e}();function pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ClipParameter=ha;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ya=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,Te.extend(this,t);var r=this.color;r&&(this.color=new vr(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){Te.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=Te.copyAttributes(e,this)}}])&&pa(t.prototype,r),n&&pa(t,n),e}();function da(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ColorDictionary=ya;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ma=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&da(t.prototype,r),n&&da(t,n),e}();function va(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TransportationAnalystResultSetting=ma;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ba=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new ma,Te.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&va(t.prototype,r),n&&va(t,n),e}();function ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TransportationAnalystParameter=ba;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ba,Te.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&ga(t.prototype,r),n&&ga(t,n),e}();function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oa(e,t){return!t||"object"!==wa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e,t,r){return(xa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ca(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ca(e){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ComputeWeightMatrixParameters=Sa;var Pa=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Oa(this,Ca(t).call(this,e,r))).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){xa(Ca(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Sa){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"weightmatrix":"/weightmatrix")+".json?",t={parameter:Te.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}}])&&_a(r.prototype,n),o&&_a(r,o),t}();function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ComputeWeightMatrixService=Pa;var Ra=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],o=this,(n=!(i=Ma(t).call(this,e,r))||"object"!==Ea(i)&&"function"!=typeof i?ja(o):i).geometry=null,n.prjCoordSys=null,n.excludeField=null;var a=ja(n);return"/"!==a.url.substr(a.url.length-1,1)&&(a.url+="/"),Te.extend(a,r),n.CLASS_NAME="SuperMap.DataFlowService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(t,Wn),r=t,(n=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(e.url+"broadcast"),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket.isOpen=!1,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(this.url+"subscribe"),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Wn.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return Te.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var r=JSON.parse(e.data);e.featureResult=r,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=this._appendCredentials(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}},{key:"_appendCredentials",value:function(e){var t=hn.getToken(e);return t&&(e+="?token="+t),e}}])&&ka(r.prototype,n),o&&ka(r,o),t}();function La(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DataFlowService=Ra;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ia=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,Te.extend(this,t);var r=this.bounds;r&&(this.bounds=new Me(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){Te.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&La(t.prototype,r),n&&La(t,n),e}();function Na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DatasetInfo=Ia;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=G.UNION,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.operation=null}}])&&Na(t.prototype,r),n&&Na(t,n),e}();function Da(e){return(Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ua(e,t,r){return(Ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Va(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ha(e,t){return(Ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.OverlayAnalystParameters=Fa;var za=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Va(t).call(this,e))||"object"!==Da(o)&&"function"!=typeof o?Ba(n):o).operateDataset=null,r.operateDatasetFields=[],r.operateDatasetFilter=new Uo,r.operateRegions=[],r.sourceDataset=null,r.sourceDatasetFields=[],r.sourceDatasetFilter=new Uo,r.tolerance=0,r.resultSetting=new Ro,Te.extend(Ba(r),e),r.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ha(e,t)}(t,Fa),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceDataset"!==r)if("operateRegions"===r){t.operateRegions=[];var n=e.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(t.operateRegions[o]=Rr.fromGeometry(n[o]))}else"resultSetting"===r?t.dataReturnOption=e.resultSetting:t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Ua(Va(t.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var r=0,n=e.operateRegions,o=n.length;r<o;r++)n[r].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&Ga(r.prototype,n),o&&Ga(r,o),t}();function qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DatasetOverlayAnalystParameters=za;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ja=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=U.BSPLINE,this.smoothness=0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+Te.toJSON(this.datumValue);if(e+=",'interval':"+Te.toJSON(this.interval),e+=",'resampleTolerance':"+Te.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+Te.toJSON(this.smoothMethod),e+=",'smoothness':"+Te.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+Te.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof Ae&&this.clipRegion.components&&(t=Rr.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+Te.toJSON(t)}return"{"+e+"}"}}])&&qa(t.prototype,r),n&&qa(t,n),e}();function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SurfaceAnalystParametersSetting=Ja;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ya=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new Ja,this.resultSetting=new Ro,this.surfaceAnalystMethod=V.ISOLINE,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&Wa(t.prototype,r),n&&Wa(t,n),e}();function Xa(e){return(Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e,t,r){return(Za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SurfaceAnalystParameters=Ya;var ts=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=$a(t).call(this,e))||"object"!==Xa(o)&&"function"!=typeof o?Ka(n):o).dataset=null,r.filterQueryParameter=new Uo,r.zValueFieldName=null,e&&Te.extend(Ka(r),e),r.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(t,Ya),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("filterQueryParameter"===r&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===r)e.extractParameter.clipRegion instanceof Ae&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=Rr.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;t[r]=e[r]}}}],(n=[{key:"destroy",value:function(){Za($a(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&Qa(r.prototype,n),o&&Qa(r,o),t}();function rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DatasetSurfaceAnalystParameters=ts;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ns=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,Te.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&rs(t.prototype,r),n&&rs(t,n),e}();function os(e){return(os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function is(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function as(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ss(e,t,r){return(ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ls(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ls(e){return(ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function us(e,t){return(us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThiessenAnalystParameters=ns;var cs=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ls(t).call(this,e))||"object"!==os(o)&&"function"!=typeof o?as(n):o).filterQueryParameter=null,r.dataset=null,e&&Te.extend(as(r),e),r.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&us(e,t)}(t,ns),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=Rr.fromGeometry(e.clipRegion):t[r]=e[r]}}],(n=[{key:"destroy",value:function(){ss(ls(t.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&is(r.prototype,n),o&&is(r,o),t}();function fs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DatasetThiessenAnalystParameters=cs;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&fs(t.prototype,r),n&&fs(t,n),e}();function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ms(e,t,r){return(ms="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vs(e){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bs(e,t){return(bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.DensityKernelAnalystParameters=hs;var gs=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=vs(t).call(this,e,r))||"object"!==ps(i)&&"function"!=typeof i?ds(o):i).mode=null,r&&Te.extend(ds(n),r),n.CLASS_NAME="SuperMap.DensityAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bs(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){ms(vs(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var r=new Object;e instanceof hs&&(t.url+="datasets/"+e.dataset+"/densityanalyst/kernel",t.mode="kernel"),hs.toObject(e,r);var n=Te.toJSON(r);t.url+=".json?returnContent=true",t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&ys(r.prototype,n),o&&ys(r,o),t}();function Ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.DensityAnalystService=gs;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ws=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=z.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,r,n;return t=e,n=[{key:"toJsonParameters",value:function(e){var t,r,n;if(e.editType===z.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features){r=e.features.length;for(var o=0;o<r;o++)(t=e.features[o]).geometry=Rr.fromGeometry(t.geometry),n.push(t)}return Te.toJSON(n)}}],(r=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&Ss(t.prototype,r),n&&Ss(t,n),e}();function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Os(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cs(e,t,r){return(Cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ts(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.EditFeaturesParameters=ws;var Es=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Ts(t).call(this,e,r))||"object"!==_s(i)&&"function"!=typeof i?xs(o):i).returnContent=!1,n.isUseBatch=!1,r&&Te.extend(xs(n),r);var a,s=xs(n);return a=s.url.substr(s.url.length-1,1),s.url+="/"==a?"features.json?":"/features.json?",n.CLASS_NAME="SuperMap.EditFeaturesService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Cs(Ts(t.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof ws){var t=this,r="POST",n="",o=e.editType,i=null;t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,i=ws.toJsonParameters(e),o===z.DELETE?(n=Te.toJSON(e.IDs),t.url+="ids="+n,r="DELETE",i=n):o===z.UPDATE?r="PUT":(t.isUseBatch&&(t.url+="isUseBatch="+t.isUseBatch,t.returnContent=!1),t.returnContent&&(t.url+="returnContent="+t.returnContent,r="POST")),t.request({method:r,data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Os(r.prototype,n),o&&Os(r,o),t}();function ks(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.EditFeaturesService=Es;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ms=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&ks(t.prototype,r),n&&ks(t,n),e}();function js(e){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function As(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rs(e,t){return!t||"object"!==js(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ls(e,t,r){return(Ls="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Is(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Is(e){return(Is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ns(e,t){return(Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalyst3DParameters=Ms;var Fs=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Rs(this,Is(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ns(e,t)}(t,Ms),r=t,(n=[{key:"destroy",value:function(){Ls(Is(t.prototype),"destroy",this).call(this)}}])&&As(r.prototype,n),o&&As(r,o),t}();function Ds(e){return(Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bs(e,t){return!t||"object"!==Ds(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Us(e){return(Us=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vs(e,t){return(Vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystSinks3DParameters=Fs;var Hs=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bs(this,Us(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vs(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Wn.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof Fs){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"sinks":"/sinks")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Gs(r.prototype,n),o&&Gs(r,o),t}();function zs(e){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Js(e,t){return!t||"object"!==zs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ws(e,t,r){return(Ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ys(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xs(e,t){return(Xs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystSinks3DService=Hs;var Qs=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Js(this,Ys(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xs(e,t)}(t,Ms),r=t,(n=[{key:"destroy",value:function(){Ws(Ys(t.prototype),"destroy",this).call(this)}}])&&qs(r.prototype,n),o&&qs(r,o),t}();function Ks(e){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $s(e,t){return!t||"object"!==Ks(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function el(e,t,r){return(el="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rl(e,t){return(rl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystSources3DParameters=Qs;var nl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$s(this,tl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rl(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){el(tl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Qs){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"sources":"/sources")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Zs(r.prototype,n),o&&Zs(r,o),t}();function ol(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FacilityAnalystSources3DService=nl;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var il=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&ol(t.prototype,r),n&&ol(t,n),e}();function al(e){return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ll(e,t){return!t||"object"!==al(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ul(e,t,r){return(ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function cl(e){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fl(e,t){return(fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystStreamParameters=il;var hl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ll(this,cl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fl(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){ul(cl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof il){var t,r=this,n=r.url.substr(r.url.length-1,1);if(0===e.queryType)r.url=r.url+("/"===n?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?";else{if(1!==e.queryType)return;r.url=r.url+("/"===n?"downstreamcirticalfaclilities":"/downstreamcirticalfaclilities")+".json?"}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed}))}}}])&&sl(r.prototype,n),o&&sl(r,o),t}();function pl(e){return(pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dl(e,t){return!t||"object"!==pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ml(e,t,r){return(ml="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vl(e){return(vl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bl(e,t){return(bl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystStreamService=hl;var gl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dl(this,vl(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bl(e,t)}(t,Ms),r=t,(n=[{key:"destroy",value:function(){ml(vl(t.prototype),"destroy",this).call(this)}}])&&yl(r.prototype,n),o&&yl(r,o),t}();function Sl(e){return(Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _l(e,t){return!t||"object"!==Sl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ol(e,t,r){return(Ol="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function xl(e){return(xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cl(e,t){return(Cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystTracedown3DParameters=gl;var Tl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_l(this,xl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cl(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Ol(xl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof gl){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"tracedownresult":"/tracedownresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&wl(r.prototype,n),o&&wl(r,o),t}();function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function El(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kl(e,t){return!t||"object"!==Pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ml(e,t,r){return(Ml="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jl(e){return(jl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Al(e,t){return(Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystTracedown3DService=Tl;var Rl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=kl(this,jl(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Al(e,t)}(t,Ms),r=t,(n=[{key:"destroy",value:function(){Ml(jl(t.prototype),"destroy",this).call(this)}}])&&El(r.prototype,n),o&&El(r,o),t}();function Ll(e){return(Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Il(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nl(e,t){return!t||"object"!==Ll(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fl(e,t,r){return(Fl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Dl(e){return(Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gl(e,t){return(Gl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystTraceup3DParameters=Rl;var Bl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nl(this,Dl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gl(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Fl(Dl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Rl){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"traceupresult":"/traceupresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Il(r.prototype,n),o&&Il(r,o),t}();function Ul(e){return(Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zl(e,t,r){return(zl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ql(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ql(e){return(ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jl(e,t){return(Jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystTraceup3DService=Bl;var Wl=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=ql(t).call(this,e))||"object"!==Ul(o)&&"function"!=typeof o?Hl(n):o,e=e||{},r.sourceNodeIDs=null,Te.extend(Hl(r),e),r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jl(e,t)}(t,Ms),r=t,(n=[{key:"destroy",value:function(){zl(ql(t.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&Vl(r.prototype,n),o&&Vl(r,o),t}();function Yl(e){return(Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ql(e,t){return!t||"object"!==Yl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kl(e,t,r){return(Kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Zl(e){return(Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $l(e,t){return($l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystUpstream3DParameters=Wl;var eu=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ql(this,Zl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$l(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Kl(Zl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Wl){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Xl(r.prototype,n),o&&Xl(r,o),t}();function tu(e){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ru(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ou(e,t,r){return(ou="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function iu(e){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function au(e,t){return(au=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FacilityAnalystUpstream3DService=eu;var su=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=iu(t).call(this,e))||"object"!==tu(o)&&"function"!=typeof o?nu(n):o).filterParam=null,r.aggType=fe.FILTER,r.CLASS_NAME="SuperMap.FilterAggParameter",Te.extend(nu(r),e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&au(e,t)}(t,lo),r=t,(n=[{key:"destroy",value:function(){ou(iu(t.prototype),"destroy",this).call(this);this.filterParam&&(this.filterParam=null)}}])&&ru(r.prototype,n),o&&ru(r,o),t}();function lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FilterAggParameter=su;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&lu(t.prototype,r),n&&lu(t,n),e}();function cu(e){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hu(e){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yu(e,t){return(yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FieldParameters=uu;var du=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=hu(t).call(this,e))||"object"!==cu(o)&&"function"!=typeof o?pu(n):o).fieldName=null,r.statisticMode=null,e&&Te.extend(pu(r),e),r.CLASS_NAME="SuperMap.FieldStatisticsParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yu(e,t)}(t,uu),r=t,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&fu(r.prototype,n),o&&fu(r,o),t}();function mu(e){return(mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gu(e,t,r){return(gu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Su(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Su(e){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wu(e,t){return(wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FieldStatisticsParameters=du;var _u=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Su(t).call(this,e,r))||"object"!==mu(i)&&"function"!=typeof i?bu(o):i).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,r&&Te.extend(bu(n),r),n.CLASS_NAME="SuperMap.FieldStatisticService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wu(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){gu(Su(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1),r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url+="/"==t?r+".json?":"/"+r+".json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&vu(r.prototype,n),o&&vu(r,o),t}();function Ou(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FieldStatisticService=_u;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new ba,Te.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Ou(t.prototype,r),n&&Ou(t,n),e}();function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pu(e,t){return!t||"object"!==Cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Eu(e,t,r){return(Eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ku(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ku(e){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mu(e,t){return(Mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FindClosestFacilitiesParameters=xu;var ju=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pu(this,ku(t).call(this,e,r))).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mu(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){Eu(ku(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xu){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"closestfacility":"/closestfacility")+".json?",t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:Te.toJSON(e.parameter),event:Te.toJSON(e.event),facilities:r.getJson(e.isAnalyzeById,e.facilities)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new Br;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Tu(r.prototype,n),o&&Tu(r,o),t}();function Au(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FindClosestFacilitiesService=ju;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ru=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,r=e.supplyCenters,n=r.length;t<n;t++)r[t].destroy();e.supplyCenters=null}}}])&&Au(t.prototype,r),n&&Au(t,n),e}();function Lu(e){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nu(e,t){return!t||"object"!==Lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fu(e,t,r){return(Fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Du(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Du(e){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gu(e,t){return(Gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FindLocationParameters=Ru;var Bu=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nu(this,Du(t).call(this,e,r))).CLASS_NAME="SuperMap.FindLocationService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gu(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){Fu(Du(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ru){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"location":"/location")+".json?",t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:Te.toJSON(e.mapParameter),supplyCenters:r.getCentersJson(e.supplyCenters)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",r=e?e.length:0,n=0;n<r;n++)n>0&&(t+=","),t+=Te.toJSON(e[n]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new Br;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&Iu(r.prototype,n),o&&Iu(r,o),t}();function Uu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FindLocationService=Bu;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Vu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ba,Te.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Uu(t.prototype,r),n&&Uu(t,n),e}();function Hu(e){return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qu(e,t){return!t||"object"!==Hu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ju(e,t,r){return(Ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Wu(e){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yu(e,t){return(Yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FindMTSPPathsParameters=Vu;var Xu=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qu(this,Wu(t).call(this,e,r))).CLASS_NAME="SuperMap.FindMTSPPathsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yu(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){Ju(Wu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Vu){var t,r=this,n=r.getJson(e.isAnalyzeById,e.centers),o=r.getJson(e.isAnalyzeById,e.nodes);r.url=r.url+"/mtsppath.json?",t={centers:n,nodes:o,parameter:Te.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new Br;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&zu(r.prototype,n),o&&zu(r,o),t}();function Qu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FindMTSPPathsService=Xu;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ku=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new ba,Te.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Qu(t.prototype,r),n&&Qu(t,n),e}();function Zu(e){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ec(e,t){return!t||"object"!==Zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tc(e,t,r){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rc(e){return(rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nc(e,t){return(nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FindPathParameters=Ku;var oc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ec(this,rc(t).call(this,e,r))).CLASS_NAME="SuperMap.FindPathService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nc(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){tc(rc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ku){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"path":"/path")+".json?",t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:Te.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new Br;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&$u(r.prototype,n),o&&$u(r,o),t}();function ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FindPathService=oc;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ac=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new ba,Te.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&ic(t.prototype,r),n&&ic(t,n),e}();function sc(e){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uc(e,t){return!t||"object"!==sc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cc(e,t,r){return(cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fc(e){return(fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hc(e,t){return(hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FindServiceAreasParameters=ac;var pc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uc(this,fc(t).call(this,e,r))).CLASS_NAME="SuperMap.FindServiceAreasService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hc(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){cc(fc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof ac){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"servicearea":"/servicearea")+".json?",t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:Te.toJSON(e.parameter),centers:r.getJson(e.isAnalyzeById,e.centers),weights:r.getJson(!0,e.weights)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new Br;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&lc(r.prototype,n),o&&lc(r,o),t}();function yc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FindServiceAreasService=pc;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ba,Te.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&yc(t.prototype,r),n&&yc(t,n),e}();function mc(e){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bc(e,t){return!t||"object"!==mc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gc(e,t,r){return(gc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Sc(e){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wc(e,t){return(wc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.FindTSPPathsParameters=dc;var _c=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bc(this,Sc(t).call(this,e,r))).CLASS_NAME="SuperMap.FindTSPPathsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wc(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){gc(Sc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof dc){var t,r=this,n=r.url.substr(r.url.length-1,1);r.url=r.url+("/"===n?"tsppath":"/tsppath")+".json?",t={parameter:c.Util.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:r.getNodesJson(e)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,r,n,o,i="";if(!1===e.isAnalyzeById){for(t="[",r=0,n=(o=e.nodes).length;r<n;r++)r>0&&(t+=","),t+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new Br;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&vc(r.prototype,n),o&&vc(r,o),t}();function Oc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.FindTSPPathsService=_c;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&Oc(t.prototype,r),n&&Oc(t,n),e}();function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pc(e,t){return!t||"object"!==Cc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ec(e,t,r){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mc(e,t){return(Mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GenerateSpatialDataParameters=xc;var jc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pc(this,kc(t).call(this,e,r))).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mc(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){Ec(kc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xc){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?r+".json":"/"+r+".json",this.url+="?returnContent=true",Te.toJSON(e)}}])&&Tc(r.prototype,n),o&&Tc(r,o),t}();function Ac(e){return(Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ic(e,t,r){return(Ic="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Nc(e){return(Nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fc(e,t){return(Fc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GenerateSpatialDataService=jc;var Dc=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Nc(t).call(this,e))||"object"!==Ac(o)&&"function"!=typeof o?Lc(n):o).bounds=null,r.queryType=he.GEO_BOUNDING_BOX,r.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",Te.extend(Lc(r),e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fc(e,t)}(t,ao),r=t,(n=[{key:"destroy",value:function(){Ic(Nc(t.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null}}])&&Rc(r.prototype,n),o&&Rc(r,o),t}();function Gc(e){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vc(e,t,r){return(Vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hc(e){return(Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zc(e,t){return(zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeoBoundingBoxQueryBuilderParameter=Dc;var qc=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Hc(t).call(this,e))||"object"!==Gc(o)&&"function"!=typeof o?Uc(n):o).precision=5,r.aggType=fe.GEOHASH_GRID,Te.extend(Uc(r),e),r.CLASS_NAME="SuperMap.GeoHashGridAggParameter",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zc(e,t)}(t,lo),r=t,o=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return e.subAgg&&(t.subAgg=e.subAgg),Te.toJson(t)}}],(n=[{key:"destroy",value:function(){Vc(Hc(t.prototype),"destroy",this).call(this),this.aggType=null}}])&&Bc(r.prototype,n),o&&Bc(r,o),t}();function Jc(e){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xc(e,t,r){return(Xc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qc(e){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kc(e,t){return(Kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeoHashGridAggParameter=qc;var Zc=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Qc(t).call(this,e))||"object"!==Jc(o)&&"function"!=typeof o?Yc(n):o,e&&e.operateGeometry&&(r.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(r.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(r.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(r.sourceGeometries=e.sourceGeometries),e&&Te.extend(Yc(r),e),r.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kc(e,t)}(t,Fa),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceGeometry"===r)t.sourceGeometry=Rr.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<e.sourceGeometries.length;o++)n.push(Rr.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=n}else if("operateGeometry"===r)t.operateGeometry=Rr.fromGeometry(e.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push(Rr.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Xc(Qc(t.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&Wc(r.prototype,n),o&&Wc(r,o),t}();function $c(e){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ef(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rf(e,t,r){return(rf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function of(e,t){return(of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeometryOverlayAnalystParameters=Zc;var af=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=nf(t).call(this,e))||"object"!==$c(o)&&"function"!=typeof o?tf(n):o).points=null,r.zValues=null,e&&Te.extend(tf(r),e),r.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&of(e,t)}(t,Ya),r=t,(n=[{key:"destroy",value:function(){rf(nf(t.prototype),"destroy",this).call(this);if(this.points){for(var e=0,r=this.points,n=r.length;e<n;e++)r[e].destroy();this.points=null}this.zValues=null}}])&&ef(r.prototype,n),o&&ef(r,o),t}();function sf(e){return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cf(e,t,r){return(cf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ff(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ff(e){return(ff=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hf(e,t){return(hf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeometrySurfaceAnalystParameters=af;var pf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ff(t).call(this,e))||"object"!==sf(o)&&"function"!=typeof o?uf(n):o).points=null,e&&Te.extend(uf(r),e),r.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hf(e,t)}(t,ns),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=Rr.fromGeometry(e.clipRegion):t[r]=e[r]}}],(n=[{key:"destroy",value:function(){cf(ff(t.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&lf(r.prototype,n),o&&lf(r,o),t}();function yf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.GeometryThiessenAnalystParameters=pf;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var df=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&yf(t.prototype,r),n&&yf(t,n),e}();function mf(e){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bf(e,t){return!t||"object"!==mf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gf(e,t,r){return(gf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Sf(e){return(Sf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wf(e,t){return(wf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeoRelationAnalystParameters=df;var _f=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bf(this,Sf(t).call(this,e,r))).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wf(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){gf(Sf(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof df){var t=this,r=t.url.substr(t.url.length-1,1);t.url+="/"===r?"datasets/"+e.dataset+"/georelation":"/datasets/"+e.dataset+"/georelation";var n=c.Util.toJSON(e);t.url+=".json?returnContent=true",t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&vf(r.prototype,n),o&&vf(r,o),t}();function Of(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.GeoRelationAnalystService=_f;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&Of(t.prototype,r),n&&Of(t,n),e}();function Cf(e){return(Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ef(e,t,r){return(Ef="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function kf(e){return(kf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mf(e,t){return(Mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesParametersBase=xf;var jf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=kf(t).call(this,e))||"object"!==Cf(o)&&"function"!=typeof o?Pf(n):o).getFeatureMode=t.getFeatureMode.BOUNDS,r.bounds=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=m.CONTAIN,Te.extend(Pf(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mf(e,t)}(t,xf),r=t,o=[{key:"toJsonParameters",value:function(e){var r,n,o;return n={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},o={datasetNames:e.datasetNames,getFeatureMode:t.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((r=new Uo).name=e.datasetNames,r.fields=e.fields,o.queryParameter=r),e.attributeFilter&&(o.attributeFilter=e.attributeFilter,o.getFeatureMode=t.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(o.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(o.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(o.targetPrj=e.targetPrj),Te.toJSON(o)}}],(n=[{key:"destroy",value:function(){Ef(kf(t.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&Tf(r.prototype,n),o&&Tf(r,o),t}();function Af(e){return(Af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function If(e,t,r){return(If="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Nf(e){return(Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ff(e,t){return(Ff=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/jf.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},c.GetFeaturesByBoundsParameters=jf;var Df=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=Nf(t).call(this,e,r))||"object"!==Af(i)&&"function"!=typeof i?Lf(o):i,r=r||{},n.returnContent=!0,n.fromIndex=0,n.toIndex=19,n.maxFeatures=null,n.format=f.GEOJSON,Te.extend(Lf(n),r);var a,s=Lf(n);return r.format&&(s.format=r.format.toUpperCase()),a=s.url.substr(s.url.length-1,1),s.url+="/"==a?"featureResults.json?":"/featureResults.json?",n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ff(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){If(Nf(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null}},{key:"processAsync",value:function(e){if(e){var t,r=this,n=!0;r.returnContent=e.returnContent,r.fromIndex=e.fromIndex,r.toIndex=e.toIndex,r.maxFeatures=e.maxFeatures,r.returnContent&&(r.url+="returnContent="+r.returnContent,n=!1),null!=r.fromIndex&&null!=r.toIndex&&!isNaN(r.fromIndex)&&!isNaN(r.toIndex)&&r.fromIndex>=0&&r.toIndex>=0&&!n&&(r.url+="&fromIndex="+r.fromIndex+"&toIndex="+r.toIndex),e.returnCountOnly&&(r.url+="&returnCountOnly="+e.returnContent),t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=Te.transformResult(e),this.format===f.GEOJSON&&e.features){var t=new Br;e.features=t.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e})}}])&&Rf(r.prototype,n),o&&Rf(r,o),t}();function Gf(e){return(Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uf(e,t){return!t||"object"!==Gf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vf(e,t,r){return(Vf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hf(e){return(Hf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zf(e,t){return(zf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesServiceBase=Df;var qf=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Uf(this,Hf(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zf(e,t)}(t,Df),r=t,(n=[{key:"destroy",value:function(){Vf(Hf(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return jf.toJsonParameters(e)}}])&&Bf(r.prototype,n),o&&Bf(r,o),t}();function Jf(e){return(Jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xf(e,t,r){return(Xf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qf(e){return(Qf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kf(e,t){return(Kf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByBoundsService=qf;var Zf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Qf(t).call(this,e))||"object"!==Jf(o)&&"function"!=typeof o?Yf(n):o).bufferDistance=null,r.attributeFilter=null,r.geometry=null,r.fields=null,Te.extend(Yf(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kf(e,t)}(t,xf),r=t,o=[{key:"toJsonParameters",value:function(e){var t,r,n;return n=Rr.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n},e.fields&&((t=new Uo).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),Te.toJSON(r)}}],(n=[{key:"destroy",value:function(){Xf(Qf(t.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Wf(r.prototype,n),o&&Wf(r,o),t}();function $f(e){return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function th(e,t){return!t||"object"!==$f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rh(e,t,r){return(rh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nh(e){return(nh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oh(e,t){return(oh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByBufferParameters=Zf;var ih=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=th(this,nh(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oh(e,t)}(t,Df),r=t,(n=[{key:"destroy",value:function(){rh(nh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Zf)return c.GetFeaturesByBufferParameters.toJsonParameters(e)}}])&&eh(r.prototype,n),o&&eh(r,o),t}();function ah(e){return(ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uh(e,t,r){return(uh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ch(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ch(e){return(ch=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fh(e,t){return(fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByBufferService=ih;var hh=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ch(t).call(this,e))||"object"!==ah(o)&&"function"!=typeof o?lh(n):o).getFeatureMode="SPATIAL",r.geometry=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=m.CONTAIN,Te.extend(lh(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fh(e,t)}(t,xf),r=t,o=[{key:"toJsonParameters",value:function(e){var t,r,n;return r=Rr.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new Uo).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),Te.toJSON(n)}}],(n=[{key:"destroy",value:function(){uh(ch(t.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&sh(r.prototype,n),o&&sh(r,o),t}();function ph(e){return(ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dh(e,t){return!t||"object"!==ph(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mh(e,t,r){return(mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vh(e){return(vh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bh(e,t){return(bh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByGeometryParameters=hh;var gh=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=dh(this,vh(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bh(e,t)}(t,Df),r=t,(n=[{key:"destroy",value:function(){mh(vh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return hh.toJsonParameters(e)}}])&&yh(r.prototype,n),o&&yh(r,o),t}();function Sh(e){return(Sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oh(e,t,r){return(Oh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function xh(e){return(xh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ch(e,t){return(Ch=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByGeometryService=gh;var Th=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=xh(t).call(this,e))||"object"!==Sh(o)&&"function"!=typeof o?_h(n):o).getFeatureMode="ID",r.IDs=null,r.fields=null,Te.extend(_h(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ch(e,t)}(t,xf),r=t,o=[{key:"toJsonParameters",value:function(e){var t,r;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((r=new Uo).name=e.datasetNames,r.fields=e.fields,t.queryParameter=r),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),Te.toJSON(t)}}],(n=[{key:"destroy",value:function(){Oh(xh(t.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&wh(r.prototype,n),o&&wh(r,o),t}();function Ph(e){return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kh(e,t){return!t||"object"!==Ph(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mh(e,t,r){return(Mh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jh(e){return(jh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ah(e,t){return(Ah=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByIDsParameters=Th;var Rh=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=kh(this,jh(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ah(e,t)}(t,Df),r=t,(n=[{key:"destroy",value:function(){Mh(jh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Th.toJsonParameters(e)}}])&&Eh(r.prototype,n),o&&Eh(r,o),t}();function Lh(e){return(Lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ih(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fh(e,t,r){return(Fh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Dh(e){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gh(e,t){return(Gh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesByIDsService=Rh;var Bh=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Dh(t).call(this,e))||"object"!==Lh(o)&&"function"!=typeof o?Nh(n):o).getFeatureMode="SQL",r.queryParameter=null,Te.extend(Nh(r),e),r.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gh(e,t)}(t,xf),r=t,o=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),Te.toJSON(t)}}],(n=[{key:"destroy",value:function(){Fh(Dh(t.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Ih(r.prototype,n),o&&Ih(r,o),t}();function Uh(e){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hh(e,t){return!t||"object"!==Uh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zh(e,t,r){return(zh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qh(e){return(qh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jh(e,t){return(Jh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesBySQLParameters=Bh;var Wh=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Hh(this,qh(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jh(e,t)}(t,Df),r=t,(n=[{key:"destroy",value:function(){zh(qh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Bh.toJsonParameters(e)}}])&&Vh(r.prototype,n),o&&Vh(r,o),t}();function Yh(e){return(Yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kh(e,t,r){return(Kh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Zh(e){return(Zh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $h(e,t){return($h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetFeaturesBySQLService=Wh;var ep=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Zh(t).call(this,e,r))||"object"!==Yh(i)&&"function"!=typeof i?Qh(o):i).datasource=null,n.dataset=null,r&&Te.extend(Qh(n),r),n.CLASS_NAME="SuperMap.GetFieldsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$h(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Kh(Zh(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1),r="datasources/"+e.datasource+"/datasets/"+e.dataset;e.url+="/"==t?r+"/fields.json?":"/"+r+"/fields.json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Xh(r.prototype,n),o&&Xh(r,o),t}();function tp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.GetFieldsService=ep;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&tp(t.prototype,r),n&&tp(t,n),e}();function np(e){return(np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function op(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ip(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ap(e,t,r){return(ap="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t){return(lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GetGridCellInfosParameters=rp;var up=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=sp(t).call(this,e,r))||"object"!==np(i)&&"function"!=typeof i?ip(o):i).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,r&&Te.extend(ip(n),r),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lp(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){ap(sp(t.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof rp){Te.extend(this,e);var t=this,r=t.url.substr(t.url.length-1,1);t.url+="/"==r?"datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json":"/datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json",t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=Te.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this,t=/\.json/.exec(e.url).index,r=e.url.substring(t),n=e.url.substring(0,e.url.length-r.length);"GRID"==e.datasetType?e.url=n+"/gridValue"+r:e.url=n+"/imageValue"+r,null!=e.X&&null!=e.Y&&(e.url+="?x="+e.X+"&y="+e.Y),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}])&&op(r.prototype,n),o&&op(r,o),t}();function cp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.GetGridCellInfosService=up;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fp=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),r=0;r<t;r++)e+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&cp(t.prototype,r),n&&cp(t,n),e}();function hp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeMemoryData=fp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pp=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,r&&Te.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&hp(t.prototype,r),n&&hp(t,n),e}();function yp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Theme=pp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=k.BASELINECENTER,this.backColor=new vr(255,255,255),this.foreColor=new vr(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e(t);return Te.copy(r,t),r.backColor=vr.fromJson(t.backColor),r.foreColor=vr.fromJson(t.foreColor),r}}],(r=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&yp(t.prototype,r),n&&yp(t,n),e}();function mp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ServerTextStyle=dp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new dp,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&mp(t.prototype,r),n&&mp(t,n),e}();function bp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeLabelItem=vp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new gr,this.unique=null,this.visible=!0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return Te.copy(r,t),r.style=gr.fromJson(t.style),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&bp(t.prototype,r),n&&bp(t,n),e}();function Sp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeUniqueItem=gp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new gr,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.leaderLineStyle=gr.fromJson(t.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&Sp(t.prototype,r),n&&Sp(t,n),e}();function _p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeFlow=wp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Op=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&_p(t.prototype,r),n&&_p(t,n),e}();function xp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeOffset=Op;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Cp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new dp,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.styles;if(Te.copy(r,t),r.defaultStyle=new dp(t.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new dp(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,r=e.styles,n=r.length;t<n;t++)r[t].destroy();e.styles=null}}}])&&xp(t.prototype,r),n&&xp(t,n),e}();function Tp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.LabelMixedTextStyle=Cp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new dp,this.uniformMixedStyle=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.uniformStyle=dp.fromObj(t.uniformStyle),r.uniformMixedStyle=Cp.fromObj(t.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&Tp(t.prototype,r),n&&Tp(t,n),e}();function Ep(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeLabelText=Pp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=j.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&Ep(t.prototype,r),n&&Ep(t,n),e}();function Mp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeLabelAlongLine=kp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=A.NONE,this.backStyle=new gr,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return r.labelBackShape=t.labelBackShape,r.backStyle=gr.fromJson(t.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&Mp(t.prototype,r),n&&Mp(t,n),e}();function Ap(e){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ip(e,t,r){return(Ip="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Np(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Np(e){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fp(e,t){return(Fp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeLabelBackground=jp;var Dp=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Np(t).call(this,"LABEL",e))||"object"!==Ap(o)&&"function"!=typeof o?Lp(n):o).alongLine=new kp,r.background=new jp,r.flow=new wp,r.items=null,r.uniqueItems=null,r.labelExpression=null,r.labelOverLengthMode=R.NONE,r.matrixCells=null,r.maxLabelLength=256,r.numericPrecision=0,r.offset=new Op,r.overlapAvoided=!0,r.rangeExpression=null,r.uniqueExpression=null,r.smallGeometryLabeled=!1,r.text=new Pp,r.textSpace=0,e&&Te.extend(Lp(r),e),r.CLASS_NAME="SuperMap.ThemeLabel",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fp(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.items,o=e.uniqueItems,i=e.matrixCells;if(e.matrixCells=null,Te.copy(r,e),r.alongLine=kp.fromObj(e),r.background=jp.fromObj(e),r.flow=new wp({flowEnabled:e.flowEnabled,leaderLineDisplayed:e.leaderLineDisplayed,leaderLineStyle:e.leaderLineStyle}),n){r.items=[];for(var a=0,s=n.length;a<s;a++)r.items.push(vp.fromObj(n[a]))}if(o){r.uniqueItems=[];for(var l=0,u=o.length;l<u;l++)r.uniqueItems.push(gp.fromObj(o[l]))}if(i){r.matrixCells=[];for(var c=0,f=i.length;c<f;c++);}return r.offset=Op.fromObj(e),r.text=Pp.fromObj(e),r}}}],(n=[{key:"destroy",value:function(){Ip(Np(t.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.flow=null,e.items){for(var r=0,n=e.items,o=n.length;r<o;r++)n[r].destroy();e.items=null}if(e.uniqueItems){for(var i=0,a=e.uniqueItems,s=a.length;i<s;i++)a[i].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return Te.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&Rp(r.prototype,n),o&&Rp(r,o),t}();function Gp(e){return(Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Up(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vp(e,t,r){return(Vp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hp(e){return(Hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zp(e,t){return(zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeLabel=Dp;var qp=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Hp(t).call(this,"UNIQUE",e))||"object"!==Gp(o)&&"function"!=typeof o?Up(n):o).defaultStyle=new gr,r.items=null,r.uniqueExpression=null,r.colorGradientType=E.YELLOW_RED,e&&Te.extend(Up(r),e),r.CLASS_NAME="SuperMap.ThemeUnique",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zp(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;Te.extend(r,e),r.items=[],r.defaultStyle=gr.fromJson(e.defaultStyle);for(var i=0;i<o;i++)r.items.push(gp.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){Vp(Hp(t.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=Te.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&Bp(r.prototype,n),o&&Bp(r,o),t}();function Jp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeUnique=qp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new vr(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new dp,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.axesColor=vr.fromJson(t.axesColor),r.axesTextStyle=dp.fromObj(t.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&Jp(t.prototype,r),n&&Jp(t,n),e}();function Yp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeGraphAxes=Wp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return Te.copy(r,t),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Yp(t.prototype,r),n&&Yp(t,n),e}();function Qp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeGraphSize=Xp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=_.CAPTION,this.graphTextStyle=new dp,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return Te.copy(r,t),r.graphTextStyle=dp.fromObj(t.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&Qp(t.prototype,r),n&&Qp(t,n),e}();function Zp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeGraphText=Kp;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new gr,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.uniformStyle=gr.fromJson(t.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Zp(t.prototype,r),n&&Zp(t,n),e}();function ey(e){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ty(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ry(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ny(e,t,r){return(ny="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function oy(e){return(oy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iy(e,t){return(iy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeGraphItem=$p;var ay=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=oy(t).call(this,"GRAPH",e))||"object"!==ey(o)&&"function"!=typeof o?ry(n):o).barWidth=0,r.flow=new wp,r.graduatedMode=C.CONSTANT,r.graphAxes=new Wp,r.graphSize=new Xp,r.graphSizeFixed=!1,r.graphText=new Kp,r.graphType=O.AREA,r.graphAxesTextDisplayMode=x.NONE,r.items=null,r.memoryKeys=null,r.negativeDisplayed=!1,r.offset=new Op,r.overlapAvoided=!0,r.roseAngle=0,r.startAngle=0,e&&Te.extend(ry(r),e),r.CLASS_NAME="SuperMap.ThemeGraph",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iy(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;Te.copy(r,e),r.items=[],r.flow=wp.fromObj(e),r.graphAxes=Wp.fromObj(e),r.graphSize=Xp.fromObj(e),r.graphText=Kp.fromObj(e),r.offset=Op.fromObj(e);for(var i=0;i<o;i++)r.items.push($p.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){ny(oy(t.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var r=0,n=e.items,o=n.length;r<o;r++)n[r].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return Te.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&ty(r.prototype,n),o&&ty(r,o),t}();function sy(e){return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ly(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uy(e){return(uy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fy(e,t){return(fy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeGraph=ay;var hy=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=uy(t).call(this,"DOTDENSITY",e))||"object"!==sy(o)&&"function"!=typeof o?cy(n):o).dotExpression=null,r.style=new gr,r.value=null,e&&Te.extend(cy(r),e),r.CLASS_NAME="SuperMap.ThemeDotDensity",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fy(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;return Te.copy(r,e),r.style=gr.fromJson(e.style),r}}}],(n=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&ly(r.prototype,n),o&&ly(r,o),t}();function py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeDotDensity=hy;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new gr,this.positiveStyle=new gr,this.zeroDisplayed=!1,this.zeroStyle=new gr,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.negativeStyle=gr.fromJson(t.negativeStyle),r.positiveStyle=gr.fromJson(t.positiveStyle),r.zeroStyle=gr.fromJson(t.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&py(t.prototype,r),n&&py(t,n),e}();function dy(e){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function my(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function by(e,t,r){return(by="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function gy(e){return(gy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sy(e,t){return(Sy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeGraduatedSymbolStyle=yy;var wy=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=gy(t).call(this,"GRADUATEDSYMBOL",e))||"object"!==dy(o)&&"function"!=typeof o?vy(n):o).baseValue=0,r.expression=null,r.flow=new wp,r.graduatedMode=c.GraduatedMode.CONSTAN,r.offset=new Op,r.style=new yy,e&&Te.extend(vy(r),e),r.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sy(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){if(e){var t=new c.ThemeGraduatedSymbol;return Te.copy(t,e),t.flow=wp.fromObj(e),t.offset=Op.fromObj(e),t.style=yy.fromObj(e),t}}}],(n=[{key:"destroy",value:function(){by(gy(t.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=C.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return Te.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&my(r.prototype,n),o&&my(r,o),t}();function _y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeGraduatedSymbol=wy;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Oy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new gr,this.visible=!0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.style=gr.fromJson(t.style),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&_y(t.prototype,r),n&&_y(t,n),e}();function xy(e){return(xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ty(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Py(e,t,r){return(Py="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ey(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ey(e){return(Ey=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ky(e,t){return(ky=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeRangeItem=Oy;var My=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Ey(t).call(this,"RANGE",e))||"object"!==xy(o)&&"function"!=typeof o?Ty(n):o).precision="1.0E-12",r.items=null,r.rangeExpression=null,r.rangeMode=T.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=E.YELLOW_RED,e&&Te.extend(Ty(r),e),r.CLASS_NAME="SuperMap.ThemeRange",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ky(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;Te.copy(r,e);var n=e.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(Oy.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){Py(Ey(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&Cy(r.prototype,n),o&&Cy(r,o),t}();function jy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeRange=My;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ay=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){Te.reset(this)}},{key:"fromJson",value:function(e){e=e||{},Te.extend(this,e);var t=this.bounds;t&&(this.bounds=new Me(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&jy(t.prototype,r),n&&jy(t,n),e}();function Ry(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.UGCLayer=Ay;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ly=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,Te.extend(this,t),this.ugcLayer=new Ay(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){Te.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var r in e)e.hasOwnProperty(r)&&(t+="'"+r+"':"+e[r]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&Ry(t.prototype,r),n&&Ry(t,n),e}();function Iy(e){return(Iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ny(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fy(e,t){return!t||"object"!==Iy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dy(e,t,r){return(Dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gy(e){return(Gy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function By(e,t){return(By=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.OverlapDisplayedOptions=Ly;var Uy=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=Fy(this,Gy(t).call(this,e))).completeLineSymbolDisplayed=null,r.maxScale=null,r.minScale=null,r.minVisibleGeometrySize=null,r.opaqueRate=null,r.symbolScalable=null,r.symbolScale=null,r.overlapDisplayed=null,r.overlapDisplayedOptions=null,r.CLASS_NAME="SuperMap.UGCMapLayer",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&By(e,t)}(t,Ay),r=t,(n=[{key:"destroy",value:function(){Dy(Gy(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"fromJson",value:function(e){Dy(Gy(t.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return Dy(Gy(t.prototype),"toServerJSONObject",this).call(this)}}])&&Ny(r.prototype,n),o&&Ny(r,o),t}();function Vy(e){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zy(e,t){return!t||"object"!==Vy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qy(e,t,r){return(qy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Jy(e){return(Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wy(e,t){return(Wy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.UGCMapLayer=Uy;var Yy=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=zy(this,Jy(t).call(this,e))).datasetInfo=null,r.displayFilter=null,r.joinItems=null,r.representationField=null,r.ugcLayerType=null,r.CLASS_NAME="SuperMap.UGCSubLayer",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wy(e,t)}(t,Uy),r=t,(n=[{key:"fromJson",value:function(e){if(qy(Jy(t.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new Ia(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var r=[],n=0;n<this.joinItems.length;n++)r[n]=new Io(this.joinItems[n]);this.joinItems=r}}},{key:"destroy",value:function(){qy(Jy(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"toServerJSONObject",value:function(){var e=qy(Jy(t.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var r=[],n=0;n<e.joinItems.length;n++)e.joinItems[n].toServerJSONObject&&(r[n]=e.joinItems[n].toServerJSONObject());e.joinItems=r}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&Hy(r.prototype,n),o&&Hy(r,o),t}();function Xy(e){return(Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ky(e,t){return!t||"object"!==Xy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zy(e,t,r){return(Zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$y(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $y(e){return($y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ed(e,t){return(ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.UGCSubLayer=Yy;var td=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=Ky(this,$y(t).call(this,e))).theme=null,r.themeElementPosition=null,r.CLASS_NAME="SuperMap.ServerTheme",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ed(e,t)}(t,Yy),r=t,(n=[{key:"destroy",value:function(){Zy($y(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"fromJson",value:function(e){Zy($y(t.prototype),"fromJson",this).call(this,e);var r=this.theme;switch(r&&r.type){case"LABEL":this.theme=Dp.fromObj(r);break;case"UNIQUE":this.theme=qp.fromObj(r);break;case"GRAPH":this.theme=ay.fromObj(r);break;case"DOTDENSITY":this.theme=hy.fromObj(r);break;case"GRADUATEDSYMBOL":this.theme=wy.fromObj(r);break;case"RANGE":this.theme=My.fromObj(r)}this.themeElementPosition&&(this.themeElementPosition=new Ee(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=Zy($y(t.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&Qy(r.prototype,n),o&&Qy(r,o),t}();function rd(e){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function od(e,t){return!t||"object"!==rd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function id(e,t,r){return(id="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ad(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ad(e){return(ad=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sd(e,t){return(sd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ServerTheme=td;var ld=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=od(this,ad(t).call(this,e))).colorDictionarys=null,r.brightness=null,r.colorGradientType=null,r.colors=null,r.contrast=null,r.dashStyle=null,r.gridType=null,r.horizontalSpacing=null,r.sizeFixed=null,r.solidStyle=null,r.specialColor=null,r.specialValue=null,r.specialValueTransparent=null,r.verticalSpacing=null,r.CLASS_NAME="SuperMap.Grid",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sd(e,t)}(t,Yy),r=t,(n=[{key:"destroy",value:function(){id(ad(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"fromJson",value:function(e){if(id(ad(t.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new vr(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var r,n=[];for(var o in this.colors)r=this.colors[o],n.push(new vr(r.red,r.green,r.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new gr(this.dashStyle)),this.solidStyle&&(this.solidStyle=new gr(this.solidStyle)),this.colorDictionary){var i,a=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],a.push(new ya({elevation:s,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=id(ad(t.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&nd(r.prototype,n),o&&nd(r,o),t}();function ud(e){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fd(e,t){return!t||"object"!==ud(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hd(e,t,r){return(hd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function pd(e){return(pd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yd(e,t){return(yd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Grid=ld;var dd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=fd(this,pd(t).call(this,e))).brightness=null,r.colorSpaceType=null,r.contrast=null,r.displayBandIndexes=null,r.transparent=null,r.transparentColor=null,r.transparentColorTolerance=null,r.CLASS_NAME="SuperMap.Image",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yd(e,t)}(t,Yy),r=t,(n=[{key:"destroy",value:function(){hd(pd(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"fromJson",value:function(e){hd(pd(t.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new vr(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return hd(pd(t.prototype),"toServerJSONObject",this).call(this)}}])&&cd(r.prototype,n),o&&cd(r,o),t}();function md(e){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bd(e,t){return!t||"object"!==md(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gd(e,t,r){return(gd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Sd(e){return(Sd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wd(e,t){return(wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Image=dd;var _d=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=bd(this,Sd(t).call(this,e))).style=null,r.CLASS_NAME="SuperMap.Vector",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wd(e,t)}(t,Yy),r=t,(n=[{key:"destroy",value:function(){gd(Sd(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"fromJson",value:function(e){gd(Sd(t.prototype),"fromJson",this).call(this,e);var r=this.style;r&&(this.style=new gr(r))}},{key:"toServerJSONObject",value:function(){var e=c.toServerJSONObject();return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&vd(r.prototype,n),o&&vd(r,o),t}();function Od(e){return(Od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Td(e,t,r){return(Td="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Pd(e){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ed(e,t){return(Ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Vector=_d;var kd=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Pd(t).call(this,e,r))||"object"!==Od(i)&&"function"!=typeof i?Cd(o):i).isTempLayers=!1,r&&Te.extend(Cd(n),r),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ed(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Td(Pd(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="layers.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,r;r=(t=!!(e=Te.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(r,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var r;if(e)for(var n=0;n<e;n++){if(t[n].subLayers&&t[n].subLayers.layers&&t[n].subLayers.layers.length>0)this.handleLayers(t[n].subLayers.layers.length,t[n].subLayers.layers);else switch(t[n].ugcLayerType){case"THEME":(r=new td).fromJson(t[n]),t[n]=r;break;case"GRID":(r=new ld).fromJson(t[n]),t[n]=r;break;case"IMAGE":(r=new dd).fromJson(t[n]),t[n]=r;break;case"VECTOR":(r=new _d).fromJson(t[n]),t[n]=r}}}}])&&xd(r.prototype,n),o&&xd(r,o),t}();function Md(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.GetLayersInfoService=kd;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("inputPoints"===r&&"geometry"===e.InterpolationAnalystType){for(var n=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}t[r]=n}else t[r]=e[r]}}],(r=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&Md(t.prototype,r),n&&Md(t,n),e}();function Ad(e){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Id(e,t,r){return(Id="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Nd(e){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fd(e,t){return(Fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.InterpolationAnalystParameters=jd;var Dd=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Nd(t).call(this,e))||"object"!==Ad(o)&&"function"!=typeof o?Ld(n):o).smooth=.1,r.tension=40,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,e&&Te.extend(Ld(r),e),r.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fd(e,t)}(t,jd),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Id(Nd(t.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Rd(r.prototype,n),o&&Rd(r,o),t}();function Gd(e){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ud(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vd(e,t,r){return(Vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hd(e){return(Hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zd(e,t){return(zd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.InterpolationRBFAnalystParameters=Dd;var qd=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Hd(t).call(this,e))||"object"!==Gd(o)&&"function"!=typeof o?Ud(n):o,e&&Te.extend(Ud(r),e),r.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zd(e,t)}(t,jd),r=t,(n=[{key:"destroy",value:function(){Vd(Hd(t.prototype),"destroy",this).call(this)}}])&&Bd(r.prototype,n),o&&Bd(r,o),t}();function Jd(e){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xd(e,t,r){return(Xd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qd(e){return(Qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kd(e,t){return(Kd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.InterpolationDensityAnalystParameters=qd;var Zd=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Qd(t).call(this,e))||"object"!==Jd(o)&&"function"!=typeof o?Yd(n):o).power=2,r.searchMode=null,r.expectedCount=12,e&&Te.extend(Yd(r),e),r.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kd(e,t)}(t,jd),r=t,(n=[{key:"destroy",value:function(){Xd(Qd(t.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&Wd(r.prototype,n),o&&Wd(r,o),t}();function $d(e){return($d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function em(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rm(e,t,r){return(rm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nm(e){return(nm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function om(e,t){return(om=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.InterpolationIDWAnalystParameters=Zd;var im=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=nm(t).call(this,e))||"object"!==$d(o)&&"function"!=typeof o?tm(n):o).type=null,r.mean=null,r.angle=0,r.nugget=0,r.range=0,r.sill=0,r.variogramMode=te.SPHERICAL,r.exponent=re.EXP1,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,e&&Te.extend(tm(r),e),r.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&om(e,t)}(t,jd),r=t,(n=[{key:"destroy",value:function(){rm(nm(t.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&em(r.prototype,n),o&&em(r,o),t}();function am(e){return(am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function um(e,t,r){return(um="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function cm(e){return(cm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fm(e,t){return(fm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.InterpolationKrigingAnalystParameters=im;var hm=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=cm(t).call(this,e,r))||"object"!==am(i)&&"function"!=typeof i?lm(o):i).mode=null,r&&Te.extend(lm(n),r),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fm(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){um(cm(t.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof qd?(r.mode="Density","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/density":r.url+="datasets/"+e.dataset+"/interpolation/density"):e instanceof Zd?(r.mode="IDW","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/idw":r.url+="datasets/"+e.dataset+"/interpolation/idw"):e instanceof Dd?(r.mode="RBF","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/rbf":r.url+="datasets/"+e.dataset+"/interpolation/rbf"):e instanceof im&&(r.mode="Kriging","geometry"===e.InterpolationAnalystType?r.url+="geometry/interpolation/kriging":r.url+="datasets/"+e.dataset+"/interpolation/kriging"),jd.toObject(e,t);var n=Te.toJSON(t);r.url+=".json?returnContent=true",r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&sm(r.prototype,n),o&&sm(r,o),t}();function pm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.InterpolationAnalystService=hm;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ym=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=se.METER,this.radiusUnit=se.METER,this.areaUnit=ae.SQUAREMILE,this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&pm(t.prototype,r),n&&pm(t,n),e}();function dm(e){return(dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vm(e,t){return!t||"object"!==dm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bm(e,t,r){return(bm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function gm(e){return(gm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sm(e,t){return(Sm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.KernelDensityJobParameter=ym;var wm=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=vm(this,gm(t).call(this,e,r))).url+="/spatialanalyst/density",n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sm(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){bm(gm(t.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){bm(gm(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){bm(gm(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addKernelDensityJob",value:function(e,r){bm(gm(t.prototype),"addJob",this).call(this,this.url,e,ym,r)}}])&&mm(r.prototype,n),o&&mm(r,o),t}();c.KernelDensityJobsService=wm;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _m=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"};function Om(e){return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cm(e){return(Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pm(e,t){return(Pm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.LabelMatrixCell=_m;var Em=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Cm(t).call(this,e))||"object"!==Om(o)&&"function"!=typeof o?Tm(n):o).height=0,r.pathField=null,r.rotation=0,r.width=0,r.sizeFixed=!1,r.type="IMAGE",e&&Te.extend(Tm(r),e),r.CLASS_NAME="SuperMap.LabelImageCell",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pm(e,t)}(t,_m),r=t,(n=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&xm(r.prototype,n),o&&xm(r,o),t}();function km(e){return(km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jm(e){return(jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Am(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rm(e,t){return(Rm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.LabelImageCell=Em;var Lm=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=jm(t).call(this,e))||"object"!==km(o)&&"function"!=typeof o?Am(n):o).style=new gr,r.symbolIDField=null,r.type="SYMBOL",e&&Te.extend(Am(r),e),r.CLASS_NAME="SuperMap.LabelSymbolCell",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rm(e,t)}(t,_m),r=t,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&Mm(r.prototype,n),o&&Mm(r,o),t}();function Im(e){return(Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fm(e){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gm(e,t){return(Gm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.LabelSymbolCell=Lm;var Bm=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Fm(t).call(this,e))||"object"!==Im(o)&&"function"!=typeof o?Dm(n):o).themeLabel=new Dp,r.type="THEME",e&&Te.extend(Dm(r),e),r.CLASS_NAME=" SuperMap.LabelThemeCell",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gm(e,t)}(t,_m),r=t,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&Nm(r.prototype,n),o&&Nm(r,o),t}();function Um(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.LabelThemeCell=Bm;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Vm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+Te.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&Um(t.prototype,r),n&&Um(t,n),e}();function Hm(e){return(Hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jm(e,t,r){return(Jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Wm(e){return(Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ym(e,t){return(Ym=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.LayerStatus=Vm;var Xm=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Wm(t).call(this,e,r))||"object"!==Hm(i)&&"function"!=typeof i?qm(o):i).projection=null,n.CLASS_NAME="SuperMap.MapService",r&&Te.extend(qm(n),r);var a=qm(n);if(a.projection){var s=a.projection.split(":");s instanceof Array&&(2===s.length&&(a.url+='?prjCoordSys={"epsgCode":'+s[1]+"}"),1===s.length&&(a.url+='?prjCoordSys={"epsgCode":'+s[0]+"}"))}return n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ym(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Jm(Wm(t.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=(e=Te.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,r=e.code&&t;!e.code||r?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}])&&zm(r.prototype,n),o&&zm(r,o),t}();function Qm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.MapService=Xm;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Km=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("dataset"!==r&&(t[r]=e[r]),"extractRegion"===r&&e[r]){for(var n=e[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var l={};l.x=n[s].x,l.y=n[s].y,i.push(l)}o.points=i,o.type="REGION",t[r]=o}}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&Qm(t.prototype,r),n&&Qm(t,n),e}();function Zm(e){return(Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ev(e,t){return!t||"object"!==Zm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tv(e,t,r){return(tv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rv(e){return(rv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nv(e,t){return(nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.MathExpressionAnalysisParameters=Km;var ov=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ev(this,rv(t).call(this,e,r))).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nv(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){tv(rv(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var r={};e instanceof Km&&(t.url+="datasets/"+e.dataset+"/mathanalyst"),Km.toObject(e,r);var n=Te.toJSON(r);t.url+=".json?returnContent=true",t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&$m(r.prototype,n),o&&$m(r,o),t}();function iv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.MathExpressionAnalysisService=ov;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var av=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=g.METER,this.prjCoordSys=null,this.distanceMode=null,r&&Te.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&iv(t.prototype,r),n&&iv(t,n),e}();function sv(e){return(sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cv(e,t,r){return(cv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fv(e){return(fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hv(e,t){return(hv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.MeasureParameters=av;var pv=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=fv(t).call(this,e,r))||"object"!==sv(i)&&"function"!=typeof i?uv(o):i).measureMode=b.DISTANCE,r&&Te.extend(uv(n),r),n.CLASS_NAME="SuperMap.MeasureService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hv(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){cv(fv(t.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof av){var t,r,n,o=this,i=e.geometry;if(i){n=o.url.substr(o.url.length-1,1),o.measureMode===b.AREA?o.url+="/"===n?"area.json?":"/area.json?":o.url+="/"===n?"distance.json?":"/distance.json?";var a,s,l,u=Rr.fromGeometry(i);if(u)t=u.parts[0],r=u.points.splice(0,t),e.prjCoordSys?("object"===sv(e.prjCoordSys)?a='{"epsgCode"'+(s=e.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof e.prjCoordSys&&(a='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),l={point2Ds:Te.toJSON(r),unit:e.unit,prjCoordSys:a}):l={point2Ds:Te.toJSON(r),unit:e.unit},o.request({method:"GET",params:l,scope:o,success:o.serviceProcessCompleted,failure:o.serviceProcessFailed})}}}}])&&lv(r.prototype,n),o&&lv(r,o),t}();function yv(e){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vv(e,t,r){return(vv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function bv(e){return(bv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gv(e,t){return(gv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.MeasureService=pv;var Sv=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=bv(t).call(this,e,r))||"object"!==yv(i)&&"function"!=typeof i?mv(o):i).mode=null,r&&Te.extend(mv(n),r),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gv(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){vv(bv(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof za?(r.mode="datasets",r.url+="datasets/"+e.sourceDataset+"/overlay.json?returnContent=true",za.toObject(e,t)):e instanceof Zc&&(r.mode="geometry",e.operateGeometries&&e.sourceGeometries?r.url+="geometry/overlay/batch.json?returnContent=true&ignoreAnalystParam=true":r.url+="geometry/overlay.json?returnContent=true",Zc.toObject(e,t));var n=Te.toJSON(t);r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&dv(r.prototype,n),o&&dv(r,o),t}();function wv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.OverlayAnalystService=Sv;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!=r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&wv(t.prototype,r),n&&wv(t,n),e}();function Ov(e){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cv(e,t){return!t||"object"!==Ov(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tv(e,t,r){return(Tv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Pv(e){return(Pv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ev(e,t){return(Ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.OverlayGeoJobParameter=_v;var kv=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Cv(this,Pv(t).call(this,e,r))).url+="/spatialanalyst/overlay",n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ev(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){Tv(Pv(t.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){Tv(Pv(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){Tv(Pv(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addOverlayGeoJob",value:function(e,r){Tv(Pv(t.prototype),"addJob",this).call(this,this.url,e,_v,r)}}])&&xv(r.prototype,n),o&&xv(r,o),t}();function Mv(e){return(Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Av(e,t){return!t||"object"!==Mv(t)&&"function"!=typeof t?Rv(e):t}function Rv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lv(e,t,r){return(Lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Iv(e){return(Iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nv(e,t){return(Nv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.OverlayGeoJobsService=kv;var Fv=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=Av(this,Iv(t).call(this,e))).returnContent=!0,r.bounds=null,Te.extend(Rv(r),e),r.CLASS_NAME="SuperMap.QueryByBoundsParameters",r):Av(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nv(e,t)}(t,na),r=t,(n=[{key:"destroy",value:function(){Lv(Iv(t.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&jv(r.prototype,n),o&&jv(r,o),t}();function Dv(e){return(Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bv(e,t){return!t||"object"!==Dv(t)&&"function"!=typeof t?Uv(e):t}function Uv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vv(e,t,r){return(Vv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hv(e){return(Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zv(e,t){return(zv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryByBoundsParameters=Fv;var qv=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bv(this,Hv(t).call(this,e,r))).returnContent=!1,n.format=f.GEOJSON,n.returnFeatureWithFieldCaption=!1,r&&Te.extend(Uv(n),r),n.CLASS_NAME="SuperMap.QueryService";var o,i=Uv(n);return i.url?(r&&r.format&&(i.format=r.format.toUpperCase()),o=i.url.substr(i.url.length-1,1),i.url+="/"===o?"queryResults.json?":"/queryResults.json?",n):Bv(n)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zv(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Vv(Hv(t.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof na){var t,r=this,n=null;r.returnContent=e.returnContent,t=r.getJsonParameters(e),r.returnContent?r.url+="returnContent="+r.returnContent:(n=e.returnCustomResult)&&(r.url+="returnCustomResult="+n),r.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){e=Te.transformResult(e);var t=new Br;if(e&&e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(!0===this.returnFeatureWithFieldCaption&&n[r].features.map(function(e){return e.fieldNames=n[r].fieldCaptions,e}),this.format===f.GEOJSON&&(n[r].features=t.toGeoJSON(n[r].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new na({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&Gv(r.prototype,n),o&&Gv(r,o),t}();function Jv(e){return(Jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yv(e,t){return!t||"object"!==Jv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xv(e,t,r){return(Xv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qv(e){return(Qv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kv(e,t){return(Kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryService=qv;var Zv=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Yv(this,Qv(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryByBoundsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kv(e,t)}(t,qv),r=t,(n=[{key:"destroy",value:function(){Xv(Qv(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof Fv))return null;var t,r="",n=e.bounds;return t=this.getQueryParameters(e),r+="'queryMode':'BoundsQuery','queryParameters':",r+=Te.toJSON(t),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&Wv(r.prototype,n),o&&Wv(r,o),t}();function $v(e){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tb(e,t){return!t||"object"!==$v(t)&&"function"!=typeof t?rb(e):t}function rb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nb(e,t,r){return(nb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ob(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ob(e){return(ob=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ib(e,t){return(ib=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryByBoundsService=Zv;var ab=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=tb(this,ob(t).call(this,e))).distance=0,r.geometry=null,r.isNearest=null,r.returnContent=!0,Te.extend(rb(r),e),r.CLASS_NAME="SuperMap.QueryByDistanceParameters",r):tb(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ib(e,t)}(t,na),r=t,(n=[{key:"destroy",value:function(){nb(ob(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&eb(r.prototype,n),o&&eb(r,o),t}();function sb(e){return(sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ub(e,t){return!t||"object"!==sb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cb(e,t,r){return(cb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fb(e){return(fb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hb(e,t){return(hb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryByDistanceParameters=ab;var pb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ub(this,fb(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryByDistanceService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hb(e,t)}(t,qv),r=t,(n=[{key:"destroy",value:function(){cb(fb(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof ab){var t="",r=this.getQueryParameters(e),n=Rr.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=Te.toJSON(r),t="{"+(t+=",'geometry':"+Te.toJSON(n)+",'distance':"+e.distance)+"}"}}}])&&lb(r.prototype,n),o&&lb(r,o),t}();function yb(e){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function db(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mb(e,t){return!t||"object"!==yb(t)&&"function"!=typeof t?vb(e):t}function vb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bb(e,t,r){return(bb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function gb(e){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sb(e,t){return(Sb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryByDistanceService=pb;var wb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=mb(this,gb(t).call(this,e))).returnContent=!0,r.geometry=null,r.spatialQueryMode=m.INTERSECT,Te.extend(vb(r),e),r.CLASS_NAME="SuperMap.QueryByGeometryParameters",r):mb(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sb(e,t)}(t,na),r=t,(n=[{key:"destroy",value:function(){bb(gb(t.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&db(r.prototype,n),o&&db(r,o),t}();function _b(e){return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ob(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xb(e,t){return!t||"object"!==_b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cb(e,t,r){return(Cb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Tb(e){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pb(e,t){return(Pb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryByGeometryParameters=wb;var Eb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xb(this,Tb(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryByGeometryService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pb(e,t)}(t,qv),r=t,(n=[{key:"destroy",value:function(){Cb(Tb(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof wb){var t,r="",n=e.geometry,o=Rr.fromGeometry(n);return t=this.getQueryParameters(e),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=Te.toJSON(t)+",'geometry':"+Te.toJSON(o)+",'spatialQueryMode':"+Te.toJSON(e.spatialQueryMode))+"}"}}}])&&Ob(r.prototype,n),o&&Ob(r,o),t}();function kb(e){return(kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jb(e,t){return!t||"object"!==kb(t)&&"function"!=typeof t?Ab(e):t}function Ab(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rb(e,t,r){return(Rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ib(e,t){return(Ib=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryByGeometryService=Eb;var Nb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=jb(this,Lb(t).call(this,e))).returnContent=!0,Te.extend(Ab(r),e),r.CLASS_NAME="SuperMap.QueryBySQLParameters",r):jb(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ib(e,t)}(t,na),r=t,(n=[{key:"destroy",value:function(){Rb(Lb(t.prototype),"destroy",this).call(this);this.returnContent=null}}])&&Mb(r.prototype,n),o&&Mb(r,o),t}();function Fb(e){return(Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Db(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gb(e,t){return!t||"object"!==Fb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bb(e,t,r){return(Bb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ub(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ub(e){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vb(e,t){return(Vb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.QueryBySQLParameters=Nb;var Hb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Gb(this,Ub(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryBySQLService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vb(e,t)}(t,qv),r=t,(n=[{key:"destroy",value:function(){Bb(Ub(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Nb){var t,r="";return t=this.getQueryParameters(e),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=Te.toJSON(t))+"}"}}}])&&Db(r.prototype,n),o&&Db(r,o),t}();function zb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.QueryBySQLService=Hb;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qb=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&zb(t.prototype,r),n&&zb(t,n),e}();function Jb(e){return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yb(e,t){return!t||"object"!==Jb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xb(e,t,r){return(Xb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qb(e){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kb(e,t){return(Kb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.RouteCalculateMeasureParameters=qb;var Zb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Yb(this,Qb(t).call(this,e,r))).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kb(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){Xb(Qb(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof qb){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="geometry/calculatemeasure";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?r+".json":"/"+r+".json",this.url+="?returnContent=true",Te.toJSON(e)}}])&&Wb(r.prototype,n),o&&Wb(r,o),t}();function $b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.RouteCalculateMeasureService=Zb;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eg=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=t.sourceRoute,n={};if(r&&r instanceof Ae&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,t.sourceRoute=n}Te.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&$b(t.prototype,r),n&&$b(t,n),e}();function tg(e){return(tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ng(e,t){return!t||"object"!==tg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function og(e,t,r){return(og="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ig(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ig(e){return(ig=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ag(e,t){return(ag=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.RouteLocatorParameters=eg;var sg=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ng(this,ig(t).call(this,e,r))).CLASS_NAME="SuperMap.RouteLocatorService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ag(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){og(ig(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof eg){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="geometry/routelocator";return t=this.url.substr(this.url.length-1,1),e.dataset&&(r="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url+="/"===t?r+".json":"/"+r+".json",this.url+="?returnContent=true",Te.toJSON(e)}}])&&rg(r.prototype,n),o&&rg(r,o),t}();function lg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.RouteLocatorService=sg;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ug=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){var r=null;if(t)return(r=t.geometry)&&(r=Rr.fromJson(r)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,r,n,o={},i=this;for(var a in e=i.fieldNames,t=i.fieldValues,e)o[e[a]]=t[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new sr(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&lg(t.prototype,r),n&&lg(t,n),e}();function cg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ServerFeature=ug;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&cg(t.prototype,r),n&&cg(t,n),e}();function hg(e){return(hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dg(e,t,r){return(dg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mg(e){return(mg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vg(e,t){return(vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SetLayerInfoParameters=fg;var bg=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=mg(t).call(this,e,r))||"object"!==hg(i)&&"function"!=typeof i?yg(o):i,r&&Te.extend(yg(n),r),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vg(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){dg(mg(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=this;t.url+=".json";var r=Te.toJSON(e);t.request({method:"PUT",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&pg(r.prototype,n),o&&pg(r,o),t}();function gg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SetLayerInfoService=bg;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&gg(t.prototype,r),n&&gg(t,n),e}();function wg(e){return(wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Og(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xg(e,t,r){return(xg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Cg(e){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tg(e,t){return(Tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SetLayersInfoParameters=Sg;var Pg=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Cg(t).call(this,e,r))||"object"!==wg(i)&&"function"!=typeof i?Og(o):i).resourceID=null,n.isTempLayers=!1,r&&c.Util.extend(Og(n),r),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tg(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){xg(Cg(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,r,n=[],o=this,i="";r=o.url.substr(o.url.length-1,1),o.url+="/"===r?"":"/",o.isTempLayers?(o.url+="tempLayersSet/"+o.resourceID,i="PUT"):(o.url+="tempLayersSet",i="POST"),o.url+=".json?",e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var a=e.subLayers.layers,s=a.length;for(var l in a){if("GRID"===a[l].ugcLayerType){var u={},c=a[l].colorDictionarys;for(var f in c){u[c[f].elevation]=c[f].color}}a[l].colorDictionary=u,delete a[l].colorDictionarys}for(var h=0;h<s;h++)a[h].toJsonObject?n.push(a[h].toJsonObject()):n.push(a[h]);(t=Te.extend(t,e)).subLayers={layers:n},t.object=null;var p=Te.toJSON([t]);o.request({method:i,data:p,scope:o,success:o.serviceProcessCompleted,failure:o.serviceProcessFailed})}}}])&&_g(r.prototype,n),o&&_g(r,o),t}();function Eg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SetLayersInfoService=Pg;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&Te.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],r=0,n=this.layerStatusList.length;r<n;r++)t.push(this.layerStatusList[r].toJSON());return e+=t,e+="]",e+="}"}}])&&Eg(t.prototype,r),n&&Eg(t,n),e}();function Mg(e){return(Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ag(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rg(e,t,r){return(Rg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Lg(e){return(Lg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ig(e,t){return(Ig=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SetLayerStatusParameters=kg;var Ng=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Lg(t).call(this,e,r))||"object"!==Mg(i)&&"function"!=typeof i?Ag(o):i).lastparams=null,n.mapUrl=e,r&&Te.extend(Ag(n),r),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ig(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Rg(Lg(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof kg){var t=this;t.url=t.mapUrl;var r=t.url.substr(t.url.length-1,1);if(t.url+="/"===r?"":"/",null==e.resourceID)t.url+="tempLayersSet",t.url+=".json?",t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url+="tempLayersSet/"+e.resourceID,t.url+=".json?",t.url+="elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString();var n="[{";n+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(n+='"subLayers":'+e.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",t.request({method:"PUT",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=Te.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var r=t.lastIndexOf("/");return t.substring(r+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=Te.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}])&&jg(r.prototype,n),o&&jg(r,o),t}();function Fg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SetLayerStatusService=Ng;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Dg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=m.CONTAIN,this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Fg(t.prototype,r),n&&Fg(t,n),e}();function Gg(e){return(Gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ug(e,t){return!t||"object"!==Gg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vg(e,t,r){return(Vg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hg(e){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zg(e,t){return(zg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SingleObjectQueryJobsParameter=Dg;var qg=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ug(this,Hg(t).call(this,e,r))).url+="/spatialanalyst/query",n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zg(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){Vg(Hg(t.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){Vg(Hg(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){Vg(Hg(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addQueryJob",value:function(e,r){Vg(Hg(t.prototype),"addJob",this).call(this,this.url,e,Dg,r)}}])&&Bg(r.prototype,n),o&&Bg(r,o),t}();function Jg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SingleObjectQueryJobsService=qg;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){Te.reset(this)}}])&&Jg(t.prototype,r),n&&Jg(t,n),e}();function Yg(e){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kg(e,t,r){return(Kg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Zg(e){return(Zg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $g(e,t){return($g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.StopQueryParameters=Wg;var eS=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=Zg(t).call(this,e,r))||"object"!==Yg(i)&&"function"!=typeof i?Qg(o):i,r=r||{},Te.extend(Qg(n),r),n.CLASS_NAME="SuperMap.StopQueryService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$g(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Kg(Zg(t.prototype),"destroy",this).call(this),Te.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Wg){var t,r=this;t=r.url.substr(r.url.length-1,1),r.url+="/"===t?"":"/",r.url+="stops/keyword/"+e.keyWord,r.url+=".json?",r.request({method:"GET",params:{returnPosition:e.returnPosition},scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Xg(r.prototype,n),o&&Xg(r,o),t}();function tS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.StopQueryService=eS;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&tS(t.prototype,r),n&&tS(t,n),e}();function nS(e){return(nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iS(e,t){return!t||"object"!==nS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aS(e,t,r){return(aS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sS(e){return(sS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lS(e,t){return(lS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SummaryAttributesJobsParameter=rS;var uS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=iS(this,sS(t).call(this,e,r))).url+="/spatialanalyst/summaryattributes",n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lS(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){aS(sS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){aS(sS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){aS(sS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryAttributesJob",value:function(e,r){aS(sS(t.prototype),"addJob",this).call(this,this.url,e,rS,r)}}])&&oS(r.prototype,n),o&&oS(r,o),t}();function cS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SummaryAttributesJobsService=uS;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=le.AVERAGE,this.fields="",this.type=ue.SUMMARYMESH,this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!n(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r]);function n(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&cS(t.prototype,r),n&&cS(t,n),e}();function hS(e){return(hS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yS(e,t){return!t||"object"!==hS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dS(e,t,r){return(dS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mS(e){return(mS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vS(e,t){return(vS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SummaryMeshJobParameter=fS;var bS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yS(this,mS(t).call(this,e,r))).url+="/spatialanalyst/aggregatepoints",n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vS(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){dS(mS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){dS(mS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){dS(mS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryMeshJob",value:function(e,r){dS(mS(t.prototype),"addJob",this).call(this,this.url,e,fS,r)}}])&&pS(r.prototype,n),o&&pS(r,o),t}();function gS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SummaryMeshJobsService=bS;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=se.METER,this.type=ue.SUMMARYMESH,this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&gS(t.prototype,r),n&&gS(t,n),e}();function wS(e){return(wS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OS(e,t){return!t||"object"!==wS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xS(e,t,r){return(xS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function CS(e){return(CS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TS(e,t){return(TS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SummaryRegionJobParameter=SS;var PS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=OS(this,CS(t).call(this,e,r))).url+="/spatialanalyst/summaryregion",n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TS(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){xS(CS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){xS(CS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){xS(CS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryRegionJob",value:function(e,r){xS(CS(t.prototype),"addJob",this).call(this,this.url,e,SS,r)}}])&&_S(r.prototype,n),o&&_S(r,o),t}();function ES(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SummaryRegionJobsService=PS;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&ES(t.prototype,r),n&&ES(t,n),e}();function MS(e){return(MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function AS(e,t){return!t||"object"!==MS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RS(e,t,r){return(RS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function LS(e){return(LS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IS(e,t){return(IS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.SupplyCenter=kS;var NS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=AS(this,LS(t).call(this,e,r))).CLASS_NAME="SuperMap.SurfaceAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IS(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){RS(LS(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ya){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="",n={},o=this;if(e instanceof ts)t=o.url.substr(o.url.length-1,1),o.url+="/"===t?"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",ts.toObject(e,n),r=Te.toJSON(n);else{if(!(e instanceof af))return;t=o.url.substr(o.url.length-1,1),o.url+="/"===t?"geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",r=Te.toJSON(e)}return r}}])&&jS(r.prototype,n),o&&jS(r,o),t}();function FS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.SurfaceAnalystService=NS;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,Te.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&FS(t.prototype,r),n&&FS(t,n),e}();function GS(e){return(GS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function US(e,t){return!t||"object"!==GS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VS(e,t,r){return(VS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function HS(e){return(HS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zS(e,t){return(zS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.TerrainCurvatureCalculationParameters=DS;var qS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=US(this,HS(t).call(this,e,r))).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zS(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){VS(HS(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var r={};e instanceof DS&&(t.url+="datasets/"+e.dataset+"/terraincalculation/curvature"),DS.toObject(e,r);var n=c.Util.toJSON(r);t.url+=".json?returnContent=true",t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&BS(r.prototype,n),o&&BS(r,o),t}();function JS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TerrainCurvatureCalculationService=qS;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new vr,this.end=0,this.start=0,this.visible=!0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r.color=vr.fromJson(t.color),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&JS(t.prototype,r),n&&JS(t,n),e}();function YS(e){return(YS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KS(e,t,r){return(KS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ZS(e){return(ZS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $S(e,t){return($S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeGridRangeItem=WS;var ew=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ZS(t).call(this,"GRIDRANGE",e))||"object"!==YS(o)&&"function"!=typeof o?QS(n):o).items=null,r.rangeMode=T.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=E.YELLOW_RED,r.reverseColor=!1,e&&Te.extend(QS(r),e),r.CLASS_NAME="SuperMap.ThemeGridRange",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$S(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;Te.copy(r,e);var n=e.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(WS.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){KS(ZS(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&XS(r.prototype,n),o&&XS(r,o),t}();function tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeGridRange=ew;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new vr,this.unique=null,this.visible=!0,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return Te.copy(r,t),r.color=vr.fromJson(t.color),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=Te.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&tw(t.prototype,r),n&&tw(t,n),e}();function nw(e){return(nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ow(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aw(e,t,r){return(aw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sw(e){return(sw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lw(e,t){return(lw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeGridUniqueItem=rw;var uw=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=sw(t).call(this,"GRIDUNIQUE",e))||"object"!==nw(o)&&"function"!=typeof o?iw(n):o).defaultcolor=new vr,r.items=null,e&&Te.extend(iw(r),e),r.CLASS_NAME="SuperMap.ThemeGridUnique",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lw(e,t)}(t,pp),r=t,o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;Te.extend(r,e),r.items=[],r.defaultcolor=vr.fromJson(e.defaultcolor);for(var i=0;i<o;i++)r.items.push(rw.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){aw(sw(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=Te.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&ow(r.prototype,n),o&&ow(r,o),t}();function cw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeGridUnique=uw;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new dp,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return Te.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&cw(t.prototype,r),n&&cw(t,n),e}();function hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeLabelUniqueItem=fw;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&Te.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.themes){for(var o=0,i=e.themes,a=i.length;o<a;o++)i[o].destroy();e.themes=null}}}])&&hw(t.prototype,r),n&&hw(t,n),e}();function yw(e){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vw(e,t,r){return(vw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function bw(e){return(bw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gw(e,t){return(gw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeParameters=pw;var Sw=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=bw(t).call(this,e,r))||"object"!==yw(i)&&"function"!=typeof i?mw(o):i,r&&c.Util.extend(mw(n),r);var a,s=mw(n);return a=s.url.substr(s.url.length-1,1),s.url+="/"===a?"tempLayersSet.json?":"/tempLayersSet.json?",n.CLASS_NAME="SuperMap.ThemeService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gw(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){vw(bw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pw){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){n=e.themes[a];var s=Te.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=e.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+Te.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(r+="'joinItems':["+Te.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[a]?a:e.datasetNames.length-1,u=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else r+="},"}e.themes&&e.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&dw(r.prototype,n),o&&dw(r,o),t}();function ww(e){return(ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ow(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xw(e,t,r){return(xw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Cw(e){return(Cw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tw(e,t){return(Tw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThemeService=Sw;var Pw=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Cw(t).call(this,e,r))||"object"!==ww(i)&&"function"!=typeof i?Ow(o):i).mode=null,r&&Te.extend(Ow(n),r),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tw(e,t)}(t,bo),r=t,(n=[{key:"destroy",value:function(){xw(Cw(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;"/"!==r.url.substr(r.url.length-1,1)&&(r.url+="/"),e instanceof cs?(r.mode="datasets",r.url+="datasets/"+e.dataset+"/thiessenpolygon",cs.toObject(e,t)):e instanceof pf&&(r.mode="geometry",r.url+="geometry/thiessenpolygon",pf.toObject(e,t));var n=Te.toJSON(t);r.url+=".json?returnContent=true",r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&_w(r.prototype,n),o&&_w(r,o),t}();function Ew(e){return(Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jw(e,t,r){return(jw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Aw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Aw(e){return(Aw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rw(e,t){return(Rw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.ThiessenAnalystService=Pw;var Lw=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=Aw(t).call(this,e,r))||"object"!==Ew(i)&&"function"!=typeof i?Mw(o):i,r&&Te.extend(Mw(n),r),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rw(e,t)}(t,bo),r=t,(n=[{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/"),t.url+="geometry/batchanalyst.json?returnContent=true&ignoreAnalystParam=true";var r=t._processParams(e),n=Te.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(Te.isArray(e)){var r=[];return e.map(function(e){return r.push(t._toJSON(e)),e}),r}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},ti.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},Zc.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},jd.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},jd.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},jd.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},jd.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},pf.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){jw(Aw(t.prototype),"destroy",this).call(this)}}])&&kw(r.prototype,n),o&&kw(r,o),t}();function Iw(e){return(Iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fw(e,t){return!t||"object"!==Iw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dw(e,t,r){return(Dw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gw(e){return(Gw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bw(e,t){return(Bw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.GeometryBatchAnalystService=Lw;var Uw=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fw(this,Gw(t).call(this,e,r))).CLASS_NAME="SuperMap.TilesetsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bw(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Dw(Gw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this,t=e.url.substr(e.url.length-1,1);e.url=e.url+("/"===t?"tilesets":"/tilesets")+".json?",e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&Nw(r.prototype,n),o&&Nw(r,o),t}();function Vw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TilesetsService=Uw;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Hw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=ce.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Vw(t.prototype,r),n&&Vw(t,n),e}();function zw(e){return(zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jw(e,t){return!t||"object"!==zw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ww(e,t,r){return(Ww="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Yw(e){return(Yw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xw(e,t){return(Xw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.TopologyValidatorJobsParameter=Hw;var Qw=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jw(this,Yw(t).call(this,e,r))).url+="/spatialanalyst/topologyvalidator",n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xw(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){Ww(Yw(t.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){Ww(Yw(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){Ww(Yw(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addTopologyValidatorJob",value:function(e,r){Ww(Yw(t.prototype),"addJob",this).call(this,this.url,e,Hw,r)}}])&&qw(r.prototype,n),o&&qw(r,o),t}();function Kw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TopologyValidatorJobsService=Qw;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(r=[{key:"destroy",value:function(){Te.reset(this)}}])&&Kw(t.prototype,r),n&&Kw(t,n),e}();function $w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TransferLine=Zw;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var e_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return Te.toJSON(e)}}],(r=[{key:"destroy",value:function(){Te.reset(this)}}])&&$w(t.prototype,r),n&&$w(t,n),e}();function t_(e){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n_(e,t){return!t||"object"!==t_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o_(e,t,r){return(o_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i_(e){return(i_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a_(e,t){return(a_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.TransferPathParameters=e_;var s_=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n_(this,i_(t).call(this,e,r))).CLASS_NAME="SuperMap.TransferPathService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a_(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){o_(i_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof e_){var t,r,n=this;r=n.url.substr(n.url.length-1,1),n.url+="/"===r?"":"/",n.url+="path.json?",t={points:Te.toJSON(e.points),transferLines:Te.toJSON(e.transferLines)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&r_(r.prototype,n),o&&r_(r,o),t}();function l_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TransferPathService=s_;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var u_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=J.NONE,this.transferTactic=q.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return Te.toJSON(e)}}],(r=[{key:"destroy",value:function(){Te.reset(this)}}])&&l_(t.prototype,r),n&&l_(t,n),e}();function c_(e){return(c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h_(e,t){return!t||"object"!==c_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p_(e,t,r){return(p_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function y_(e){return(y_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d_(e,t){return(d_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.TransferSolutionParameters=u_;var m_=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h_(this,y_(t).call(this,e,r))).CLASS_NAME="SuperMap.TransferSolutionService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d_(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){p_(y_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof u_){var t,r,n=this;r=n.url.substr(n.url.length-1,1),n.url+="/"===r?"":"/",n.url+="solutions.json?",t={points:Te.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=Te.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=Te.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=Te.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=Te.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&f_(r.prototype,n),o&&f_(r,o),t}();function v_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.TransferSolutionService=m_;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var b_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",Te.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&v_(t.prototype,r),n&&v_(t,n),e}();function g_(e){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w_(e,t){return!t||"object"!==g_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function __(e,t,r){return(__="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function O_(e){return(O_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x_(e,t){return(x_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.UpdateEdgeWeightParameters=b_;var C_=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w_(this,O_(t).call(this,e,r))).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x_(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){__(O_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof b_){var t=this,r=t.url.substr(t.url.length-1,1),n=t.parse(e);"/"===r&&t.url.splice(t.url.length-1,1),t.url=t.url+n+".json?";var o=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:o,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"edgeWeight"!==e[r])switch(r){case"edgeId":t+="/edgeweight/"+e[r];break;case"fromNodeId":t+="/fromnode/"+e[r];break;case"toNodeId":t+="/tonode/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&S_(r.prototype,n),o&&S_(r,o),t}();function T_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.UpdateEdgeWeightService=C_;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var P_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",Te.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&T_(t.prototype,r),n&&T_(t,n),e}();function E_(e){return(E_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M_(e,t){return!t||"object"!==E_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j_(e,t,r){return(j_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function A_(e){return(A_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R_(e,t){return(R_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.UpdateTurnNodeWeightParameters=P_;var L_=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=M_(this,A_(t).call(this,e,r))).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R_(e,t)}(t,Fi),r=t,(n=[{key:"destroy",value:function(){j_(A_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof P_){var t=this,r=t.url.substr(t.url.length-1,1),n=t.parse(e);"/"===r&&t.url.splice(t.url.length-1,1),t.url=t.url+n+".json?";var o=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:o,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"turnNodeWeight"!==e[r])switch(r){case"nodeId":t+="/turnnodeweight/"+e[r];break;case"fromEdgeId":t+="/fromedge/"+e[r];break;case"toEdgeId":t+="/toedge/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&k_(r.prototype,n),o&&k_(r,o),t}();function I_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.UpdateTurnNodeWeightService=L_;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var N_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=ie.CLIP,this.output=null,this.mappingParameters=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof ci&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof hi&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&I_(t.prototype,r),n&&I_(t,n),e}();function F_(e){return(F_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G_(e,t){return!t||"object"!==F_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B_(e,t,r){return(B_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function U_(e){return(U_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V_(e,t){return(V_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.VectorClipJobsParameter=N_;var H_=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=G_(this,U_(t).call(this,e,r))).url+="/spatialanalyst/vectorclip",n.CLASS_NAME="SuperMap.VectorClipJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V_(e,t)}(t,wi),r=t,(n=[{key:"destroy",value:function(){B_(U_(t.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){B_(U_(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){B_(U_(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addVectorClipJob",value:function(e,r){B_(U_(t.prototype),"addJob",this).call(this,this.url,e,N_,r)}}])&&D_(r.prototype,n),o&&D_(r,o),t}();function z_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.VectorClipJobsService=H_;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var q_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type=null}}])&&z_(t.prototype,r),n&&z_(t,n),e}();function J_(e){return(J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X_(e,t,r){return(X_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Q_(e){return(Q_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K_(e,t){return(K_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.RasterFunctionParameter=q_;var Z_=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Q_(t).call(this,e))||"object"!==J_(o)&&"function"!=typeof o?Y_(n):o).redIndex=0,r.nirIndex=1,r.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",r.type=ye.NDVI,Te.extend(Y_(r),e),r.CLASS_NAME="SuperMap.NDVIParameter",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K_(e,t)}(t,q_),r=t,(n=[{key:"destroy",value:function(){X_(Q_(t.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&W_(r.prototype,n),o&&W_(r,o),t}();function $_(e){return($_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rO(e,t,r){return(rO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nO(e){return(nO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oO(e,t){return(oO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.NDVIParameter=Z_;var iO=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=nO(t).call(this,e))||"object"!==$_(o)&&"function"!=typeof o?tO(n):o).altitude=45,r.azimuth=315,r.zFactor=1,r.type=ye.HILLSHADE,Te.extend(tO(r),e),r.CLASS_NAME="SuperMap.HillshadeParameter",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oO(e,t)}(t,q_),r=t,(n=[{key:"destroy",value:function(){rO(nO(t.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&eO(r.prototype,n),o&&eO(r,o),t}();c.HillshadeParameter=iO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aO=c.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},sO=c.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},lO=c.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},uO=c.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};function cO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},Te.extend(this,t),this.serverType=h.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=this.createCredentialUrl(t),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,cn.commit(e,t,r,n).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,r=this.getCredential();if(r){var n="key="+r,o=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===o?t+=n:t.indexOf("?")>-1&&"?"!==o?t+="&"+n:t+="?"+n}return t}},{key:"getCredential",value:function(){}}])&&cO(t.prototype,r),n&&cO(t,n),e}();function hO(e){return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yO(e){return(yO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mO(e,t){return(mO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.OnlineServiceBase=fO;var vO=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=yO(t).call(this,e))||"object"!==hO(i)&&"function"!=typeof i?dO(o):i,r=r||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,Te.extend(dO(n),r),n.id&&(n.serviceUrl=e+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mO(e,t)}(t,fO),r=t,(n=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){Te.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&pO(r.prototype,n),o&&pO(r,o),t}();function bO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.OnlineData=vO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,r,n;return t=e,(r=[{key:"load",value:function(){return cn.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){hn.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,r=t.mDatasUrl;return e&&(e=e.toJSON()),cn.get(r,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var r=[],n=e.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new vO(t.mDatasUrl,a);r.push(s)}return r}})}}])&&bO(t.prototype,r),n&&bO(t,n),e}();function SO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Online=gO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var r in t)null==t[r]&&delete t[r];return t}}])&&SO(t.prototype,r),n&&SO(t,n),e}();function _O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.OnlineQueryDatasParameter=wO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OO=function(){function e(t){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=ne.SERVER,this.limitation=null,Te.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&_O(t.prototype,r),n&&_O(t,n),e}();c.KeyServiceParameter=OO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xO=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,Te.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||h.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens.json";this.type===h.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=this.server+n),this.keyServiceUrl||(this.type===h.IPORTAL?this.keyServiceUrl=this.server+"/web/mycontent/keys/register.json":this.type===h.ONLINE&&(this.keyServiceUrl=this.server+"/web/mycontent/keys.json"))};function CO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ServerInfo=xO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var TO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=ne.NONE,this.ip=null,this.referer=null,this.expiration=60,Te.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&CO(t.prototype,r),n&&CO(t,n),e}();c.TokenServiceParameter=TO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PO=r(38),EO=r.n(PO);function kO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MO=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.url=t,this.client=new EO.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Zt(this,null,this.EVENT_TYPES),this.eventListeners=null,Te.extend(this,r),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,r,n;return t=e,(r=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var r=this;return r.client.msearch(e).then(function(e){return r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var r=this;return r.client.search(e).then(function(e){return r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e,t){var r=this;e&&(r.data=e,r.openGeoFence&&r.geoFence&&r._validateDatas(e),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(r){var n=r._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=n.x*o,l=n.y*o;return t._distance(s,l,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),r})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&kO(t.prototype,r),n&&kO(t,n),e}();
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function jO(e){return(jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ElasticSearch=MO;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,r,n;return t=e,(r=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==jO(e)&&null!==e){var r=e;if(e instanceof Array){r=[];for(var n=0,o=e.length;n<o;n++)r[n]=this.clone(e[n])}else if(!t[Object.prototype.toString.call(e)])for(var i in r={},e)e.hasOwnProperty(i)&&(r[i]=this.clone(e[i]));return r}return e}},{key:"mergeItem",value:function(e,t,r,n){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(r)&&("object"!=jO(e[r])||o[Object.prototype.toString.call(e[r])]?!n&&r in e||(e[r]=t[r]):this.merge(e[r],t[r],n))}},{key:"merge",value:function(e,t,r){for(var n in t)this.mergeItem(e,t,n,r);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,l=this._offsetY;e+s>i&&(i=e+s+100,n.width=i,r=!0),t+l>a&&(a=t+l+100,n.height=a,r=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),n.width=i,r=!0),t<-l&&(a+=l=100*Math.ceil(-t/100),n.height=a,r=!0),r&&o.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}},{key:"inherits",value:function(e,t){var r=e.prototype;function n(){}for(var o in n.prototype=t.prototype,e.prototype=new n,r)e.prototype[o]=r[o];e.constructor=e}}])&&AO(t.prototype,r),n&&AO(t,n),e}();function LO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new RO,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,r,n;return t=e,(r=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,r,n,o,i),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,r,n),s=0,l=o.length;s<l;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,r){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var n=[],o=((t=this.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<r;l++)n[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),u+=o,c+=i,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],n[l]=this.toColor([u,c,f,h],"rgba"),n}},{key:"getGradientColors",value:function(e,t){var r=[],n=e.length;if(void 0===t&&(t=20),1===n)r=this.getStepColors(e[0],e[0],t);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],r=0;return e.replace(/[\d.]+/g,function(e){r<3?e|=0:e=+e,t[r++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),e.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):e.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):t.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var n=this.getData(e),o=0;o<3;o++)n[o]=1===r?n[o]*(1-t)|0:(255-n[o])*t+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,r){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=o[c]*s+i[c]*l;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var r,n,o=(t=this.normalize(t)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var l=(o[5]||o[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];n=l[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(u),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var r=this.getData(this.toRGBA(e));return r[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var l=0|s,u=a*(1-i),c=a*(1-i*(s-l)),f=a*(1-i*(1-(s-l))),h=0,p=0,y=0;0===l?(h=a,p=f,y=u):1===l?(h=c,p=a,y=u):2===l?(h=u,p=a,y=f):3===l?(h=u,p=c,y=a):4===l?(h=f,p=u,y=a):(h=a,p=u,y=c),t=255*h,r=255*p,n=255*y}return[t,r,n]}},{key:"_HSL_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s,l=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(l,s,o+1/3),r=255*this._HUE_2_RGB(l,s,o),n=255*this._HUE_2_RGB(l,s,o-1/3)}return[t,r,n]}},{key:"_HUE_2_RGB",value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=s;if(0===l)t=0,r=0;else{r=l/s;var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;n===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=(s+a)/2;if(0===l)t=0,r=0;else{r=u<.5?l/(s+a):l/(2-s-a);var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;n===s?t=h-f:o===s?t=1/3+c-h:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,u*=100]}}])&&LO(t.prototype,r),n&&LO(t,n),e}();function NO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var FO=new IO,DO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.height=e,r.width=t,r.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,r,n),a=o.length,s=1/(a-1),l=0,u=0;u<a;u++)i.addColorStop(l,o[u]),l+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,r){e=FO.toRGBA(e),t=FO.toRGBA(t),e=FO.getData(e);for(var n=[],o=((t=FO.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<r;l++)n[l]=FO.toColor([FO.adjust(Math.floor(u),[0,255]),FO.adjust(Math.floor(c),[0,255]),FO.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),u+=o,c+=i,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],n[l]=FO.toColor([u,c,f,h],"hex"),n}},{key:"getGradientColors",value:function(e,t,r){var n,o,i,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===r)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var l=Math.floor(o/2);if(o%2==0)a.push(e[l]);else{var u=e.length-1-l;a.push(e[u])}}else{for(n=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(e[o],e[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,h=0;h<f;h++)a.splice(2,1)}return a}}}],(r=null)&&NO(t.prototype,r),n&&NO(t,n),e}();function GO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ColorsPickerUtil=DO;var BO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"æ±å"===t?this.getSum(e):"Maximum"===t||"æå¤§å¼"===t?this.getMax(e):"Minimum"===t||"æå°å¼"===t?this.getMin(e):"Average"===t||"å¹³åå¼"===t?this.getMean(e):"Median"===t||"ä¸­ä½æ°"===t?this.getMedian(e):"times"===t||"è®¡æ°"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,r){return"offset"===t?this.getEqInterval(e,r):"jenks"===t?this.getJenks(e,r):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,r):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,r):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(r=null)&&GO(t.prototype,r),n&&GO(t,n),e}();c.ArrayStatistic=BO;var UO=r(39),VO=r.n(UO);
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function HO(e){return(HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JO(e,t,r){return t&&qO(e.prototype,t),r&&qO(e,r),e}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var WO=function(){function e(t){zO(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return JO(e,[{key:"getParser",value:function(e){var t,r,n,o,i,a,s,l,u,f=this;function h(){o=s[n],i=r,l=r}function p(){s[n]=o,l=r=i}function y(){r>l&&(s[n]=s[n].slice(r-l),l=r)}function d(e){var o,i,a,c;if(e instanceof Function)return e.call(u.parsers);if("string"==typeof e)o=t.charAt(r)===e?e:null,i=1,y();else{if(y(),!(o=e.exec(s[n])))return null;i=o[0].length}if(o){var f=r+=i;for(c=r+s[n].length-i;r<c&&(32===(a=t.charCodeAt(r))||10===a||9===a);)r++;return s[n]=s[n].slice(i+(r-f)),l=r,0===s[n].length&&n<s.length-1&&n++,"string"==typeof o?o:1===o.length?o[0]:o}}function m(r){var n,o={index:a,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===r[i]&&(r[i]=o[i]);n=r.filename&&f.env.inputs&&f.env.inputs[r.filename]?f.env.inputs[r.filename]:t,r.line=(n.slice(0,r.index).match(/\n/g)||"").length+1;for(var s=r.index;s>=0&&"\n"!==n.charAt(s);s--)r.column++;return new Error([r.filename,r.line,r.column,r.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},u={parse:function(o){var i,u=null;if(r=n=l=a=0,s=[],t=o.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=t),s=function(e){for(var r,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,c=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=e[0],p=0;p<t.length;)if(s.lastIndex=p,(r=s.exec(t))&&r.index===p&&(p+=r[0].length,h.push(r[0])),o=t.charAt(p),l.lastIndex=c.lastIndex=p,(r=c.exec(t))&&r.index===p)p+=r[0].length,h.push(r[0]);else if(n||"/"!==o||"/"!==(i=t.charAt(p+1))&&"*"!==i||!(r=l.exec(t))||r.index!==p){switch(o){case"{":if(!n){f++,h.push(o);break}case"}":if(!n){f--,h.push(o),e[++a]=h=[];break}case"(":if(!n){n=!0,h.push(o);break}case")":if(n){n=!1,h.push(o);break}default:h.push(o)}p++}else p+=r[0].length,h.push(r[0]);return 0!==f&&(u={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),u)throw m(u);var h=function(e,t){var r=e.specificity,n=t.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(i=new c.CartoCSS.Tree.Ruleset([],d(this.parsers.primary))).root=!0,i.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+m(t).message:e.errors.message=m(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(h),t},i},parsers:{primary:function(){for(var e,t=[];(e=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(e=d(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new c.CartoCSS.Tree.Invalid(e,i)},comment:function(){var e;if("/"===t.charAt(r))return"/"===t.charAt(r+1)?new c.CartoCSS.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new c.CartoCSS.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===t.charAt(r)||"'"===t.charAt(r)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new c.CartoCSS.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new c.CartoCSS.Tree.Field(e[1]):void 0}},comparison:function(){var e=d(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new c.CartoCSS.Tree.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(s[n])){if("url"===(e=e[1]))return null;r+=e.length;if(d("("),t=d(this.entities.arguments),d(")"))return e?new c.CartoCSS.Tree.Call(e,t,r):void 0}},arguments:function(){for(var e,t=[];e=d(this.expression);){t.push(e);if(!d(","))break}return t},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===t.charAt(r)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@$\/.&=:;#+?~]+/)||"";return d(")")?new c.CartoCSS.Tree.URL(void 0!==e.value||e instanceof c.CartoCSS.Tree.Variable?e:new c.CartoCSS.Tree.Quoted(e)):new c.CartoCSS.Tree.Invalid(e,i,"Missing closing ) in URL.")}},variable:function(){var n,o=r;if("@"===t.charAt(r)&&(n=d(/^@[\w-]+/)))return new c.CartoCSS.Tree.Variable(n,o,e.filename)},hexcolor:function(){var e;if("#"===t.charAt(r)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new c.CartoCSS.Tree.Color(e[1])},keywordcolor:function(){var e=s[n].match(/^[a-z]+/);if(e&&e[0]in c.CartoCSS.Tree.Reference.data.colors)return new c.CartoCSS.Tree.Color(c.CartoCSS.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=t.charCodeAt(r);if(!(e>57||e<45||47===e)){var n=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return n?new c.CartoCSS.Tree.Dimension(n[1],n[2],i):void 0}}},variable:function(){var e;if("@"===t.charAt(r)&&(e=d(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=d(this.entities.call)||d(this.entities.literal),t=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return e||t||r},end:function(){var e;return d(";")||("string"==typeof(e="}")?t.charAt(r)===e:!!e.test(s[n]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new c.CartoCSS.Tree.Element(e)},attachment:function(){var e=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var e,n,o,a,s,l=[],u=new c.CartoCSS.Tree.Filterset,f=[],h=0,p=0;(o=d(this.element))||(s=d(this.zoom))||(a=d(this.filter))||(e=d(this.attachment));){if(h++,o)l.push(o);else if(s)f.push(s),p++;else if(a){var y=u.add(a);if(y)throw m({message:y,index:r-1});p++}else{if(n)throw m({message:"Encountered second attachment name.",index:r-1});n=e}var v=t.charAt(r);if("{"===v||"}"===v||";"===v||","===v)break}if(h)return new c.CartoCSS.Tree.Selector(u,f,l,n,p,i)},filter:function(){h();var t,r,n;if(d("[")&&(t=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(t instanceof c.CartoCSS.Tree.Quoted&&(t=new c.CartoCSS.Tree.Field(t.toString())),(r=d(this.entities.comparison))&&(n=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw m({message:"Missing closing ] of filter.",index:i-1});return t.is||(t=new c.CartoCSS.Tree.Field(t)),new c.CartoCSS.Tree.Filter(t,r,n,i,e.filename)}},zoom:function(){h();var e,t;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(t=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new c.CartoCSS.Tree.Zoom(e,t,i);p()},block:function(){var e;if(d("{")&&(e=d(this.primary))&&d("}"))return e},ruleset:function(){var e,t,r=[];for(h();e=d(this.selector);){for(r.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(r.length>0&&(t=d(this.block))){if(1===r.length&&r[0].elements.length&&"Map"===r[0].elements[0].value){var n=new c.CartoCSS.Tree.Ruleset(r,t);return n.isMap=!0,n}return new c.CartoCSS.Tree.Ruleset(r,t)}p()},rule:function(){var n,o,s=t.charAt(r);if(h(),"."!==s&&"#"!==s&&(n=d(this.variable)||d(this.property))){if((o=d(this.value))&&d(this.end))return new c.CartoCSS.Tree.Rule(n,o,i,e.filename);a=r,p()}},font:function(){for(var e,t=[],r=[];e=d(this.entity);)r.push(e);if(t.push(new c.CartoCSS.Tree.Expression(r)),d(","))for(;(e=d(this.expression))&&(t.push(e),d(",")););return new c.CartoCSS.Tree.Value(t)},value:function(){for(var e,t=[];(e=d(this.expression))&&(t.push(e),d(",")););return t.length>1?new c.CartoCSS.Tree.Value(t.map(function(e){return e.value[0]})):1===t.length?new c.CartoCSS.Tree.Value(t):void 0},sub:function(){var e;if(d("(")&&(e=d(this.expression))&&d(")"))return e},multiplication:function(){var e,t,r,n;if(e=d(this.operand)){for(;(r=d("/")||d("*")||d("%"))&&(t=d(this.operand));)n=new c.CartoCSS.Tree.Operation(r,[n||e,t],i);return n||e}},addition:function(){var e,n,o,a;if(e=d(this.multiplication)){for(;(o=d(/^[-+]\s+/)||" "!=t.charAt(r-1)&&(d("+")||d("-")))&&(n=d(this.multiplication));)a=new c.CartoCSS.Tree.Operation(o,[a||e,n],i);return a||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,t=[];e=d(this.addition)||d(this.entity);)t.push(e);if(t.length>0)return new c.CartoCSS.Tree.Expression(t)},property:function(){var e=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var r={},n=[];this._toShaders(r,n,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var l=t[a],u=l.attachment,c=r[n[a]],f=[];if(!i[u]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var y=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[h++]=function(e,t){if(!Array.isArray(e))return e;var r=e.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!t.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,t,r){for(var n=0,o=r.length;n<o;++n){for(var i=r[n],a=[],s=0,l=i.elements.length;s<l;s++)a.push(i.elements[s]);var u=i.filters.filters,f=[];for(var h in u)f.push(u[h].id);var p=a.join("/")+"::"+i.attachment+"_"+f.join("_");t.push(p);var y=e[p]=e[p]||{};y.zoom=c.CartoCSS.Tree.Zoom.all;var d=i.toJS(this.env);for(var m in d)(y[m]=y[m]||[]).push(d[m].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}();c._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},WO.mapnik_reference={version:{latest:c._mapnik_reference_latest,"2.1.1":c._mapnik_reference_latest}},c.CartoCSS=WO,c.CartoCSS.Tree={},c.CartoCSS.Tree.operate=function(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"/":return t/r}},c.CartoCSS.Tree.functions={rgb:function(e,t,r){return this.rgba(e,t,r,1)},rgba:function(e,t,r,n){var o=this,i=[e,t,r].map(function(e){return o.number(e)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new c.CartoCSS.Tree.Color(i,n)},stop:function(e){var t,r;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:e,color:t,mode:r,toString:function(n){return'\n\t<stop value="'+e.ev(n)+'"'+(t?' color="'+t.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(e,t,r){return this.hsla(e,t,r,1)},hsla:function(e,t,r,n){if([e=this.number(e)%360/360,t=this.number(t),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(t+1):r+t-r*t,i=2*r-o;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),n);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new c.CartoCSS.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new c.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new c.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new c.CartoCSS.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s+=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s-=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l+=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l-=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a+=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a-=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL(),n=(r.h+t.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(e,t,r){return"field"===e.is?e.toString+".replace("+t.toString()+", "+r.toString()+")":e.replace(t,r)},mix:function(e,t,r){var n=r.value/100,o=2*n-1,i=e.toHSL().a-t.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,l=[e.rgb[0]*a+t.rgb[0]*s,e.rgb[1]*a+t.rgb[1]*s,e.rgb[2]*a+t.rgb[2]*s],u=e.alpha*n+t.alpha*(1-n);return new c.CartoCSS.Tree.Color(l,u)},greyscale:function(e){return this.desaturate(e,new c.CartoCSS.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),r=e.value,n=0;n<t.length;n++)r=r.replace(/%s/,t[n].value).replace(/%[da]/,t[n].toString());return r=r.replace(/%%/g,"%"),new c.CartoCSS.Tree.Quoted(r)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof c.CartoCSS.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},c.CartoCSS.Tree.Call=function(){function e(t,r,n){zO(this,e),this.is="call",this.name=t,this.args=r,this.index=n}return JO(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),r=0;r<t.length;r++)if("undefined"===t[r].is)return{is:"undefined",value:"undefined"};if(this.name in c.CartoCSS.Tree.functions){if(c.CartoCSS.Tree.functions[this.name].length<=t.length){var n=c.CartoCSS.Tree.functions[this.name].apply(c.CartoCSS.Tree.functions,t);return null===n?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+c.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=c.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=VO()(c.CartoCSS.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(e){return[e[0],c.CartoCSS.Tree.Reference.editDistance(a,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),c.CartoCSS.Tree.Color=function(){function e(t,r){zO(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof r?this.alpha=r:4===t.length?this.alpha=t[3]:this.alpha=1}return JO(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,r){var n=[];r instanceof c.CartoCSS.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=c.CartoCSS.Tree.operate(t,this.rgb[o],r.rgb[o]);return new c.CartoCSS.Tree.Color(n)}},{key:"toHSL",value:function(){var e,t,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case r:e=(n-o)/u+(n<o?6:0);break;case n:e=(o-r)/u+2;break;case o:e=(r-n)/u+4}e/=6}return{h:360*e,s:t,l:l,a:i}}}]),e}(),c.CartoCSS.Tree.Comment=function(){function e(t,r){zO(this,e),this.value=t,this.silent=!!r}return JO(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),c.CartoCSS.Tree.Definition=function(){function e(t,r){zO(this,e),this.elements=t.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return JO(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},r=this.zoom,n=this.filters.toJS(e),o=[r];function i(r){if(r instanceof c.CartoCSS.Tree.Rule)t[r.name]=t[r.name]||[],n?t[r.name].push("if("+n+"){"+r.value.toJS(e)+"}"):t[r.name].push(r.value.toJS(e));else if(r instanceof c.CartoCSS.Tree.Ruleset){var o=r.toJS(e);for(var i in o)for(var a in t[i]=t[i]||[],o[i])t[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return t}}]),e}(),c.CartoCSS.Tree.Dimension=function(){function e(t,r,n){zO(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=r||null,this.index=n}return JO(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new c.CartoCSS.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new c.CartoCSS.Tree.Dimension(c.CartoCSS.Tree.operate(t,this.value,this.value*r.value*.01),this.unit):new c.CartoCSS.Tree.Dimension(c.CartoCSS.Tree.operate(t,this.value,r.value),this.unit||r.unit)}}]),e}(),c.CartoCSS.Tree.Element=function(){function e(t){zO(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return JO(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),c.CartoCSS.Tree.Expression=function(){function e(t){zO(this,e),this.is="expression",this.value=t}return JO(e,[{key:"ev",value:function(e){return this.value.length>1?new c.CartoCSS.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),c.CartoCSS.Tree.Field=function(){function e(t){zO(this,e),this.is="field",this.value=t||""}return JO(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),c.CartoCSS.Tree.Filter=function(){function e(t,r,n,o,i){zO(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return JO(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),c.CartoCSS.Tree.Filterset=function(){function e(){zO(this,e),this.filters={}}return JO(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var r=e.val;void 0!==e._val&&(r=e._val.toString(!0)),e.key&&"scale"===e.key.value?r=+r:"string"!=typeof r&&"object"!==HO(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+e.key+"&&"+n+e.key+" "+t+r}var r=[];for(var n in this.filters)r.push(t(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new c.CartoCSS.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var r in e.filters){var n=this.addable(e.filters[r]);if(!1===n)return!1;!0===n&&t.push(e.filters[r])}if(!t.length)return null;var o=new c.CartoCSS.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=t.shift();)o.add(r);return o}},{key:"addable",value:function(e){var t=e.key.toString(),r=e.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?$/)&&(r=parseFloat(r)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==r&&null:void 0===this.filters[t+"!="+r]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==r&&null:void 0!==this.filters[t+"!="+r]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),r=e.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===e.op&&void 0!==this.filters[t+"="]&&r!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&r==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&r===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var r,n=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=e}else if("!="===o)this.filters[n+"!="+e.val]=e;else if("=~"===o)this.filters[n+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[n+">"]=e}else if(">="===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r<e.val&&delete this.filters[l];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op=">",this.filters[n+">"]=e):this.filters[n+">="]=e}else if("<"===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r>=e.val&&delete this.filters[u];this.filters[n+"<"]=e}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>e.val&&delete this.filters[c];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op="<",this.filters[n+"<"]=e):this.filters[n+"<="]=e}}}]),e}(),c.CartoCSS.Tree.Fontset=function e(t,r){zO(this,e),this.fonts=r,this.name="fontset-"+t.effects.length},c.CartoCSS.Tree.Invalid=function(){function e(t,r,n){zO(this,e),this.is="invalid",this.chunk=t,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return JO(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),c.CartoCSS.Tree.Keyword=function(){function e(t){zO(this,e),this.value=t;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[t]?r[t]:"keyword"}return JO(e,[{key:"ev",value:function(){return this}}]),JO(e,[{key:"toString",value:function(){return this.value}}]),e}(),c.CartoCSS.Tree.Literal=function(){function e(t){zO(this,e),this.value=t||"",this.is="field"}return JO(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),c.CartoCSS.Tree.Operation=function(){function e(t,r,n){zO(this,e),this.is="operation",this.op=t.trim(),this.operands=r,this.index=n}return JO(e,[{key:"ev",value:function(e){var t,r=this.operands[0].ev(e),n=this.operands[1].ev(e);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof c.CartoCSS.Tree.Dimension&&n instanceof c.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(t=n,n=r,r=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof c.CartoCSS.Tree.Quoted&&n instanceof c.CartoCSS.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof c.CartoCSS.Tree.Field||n instanceof c.CartoCSS.Tree.Field||r instanceof c.CartoCSS.Tree.Literal||n instanceof c.CartoCSS.Tree.Literal?"color"===r.is||"color"===n.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new c.CartoCSS.Tree.Literal(r.ev(e).toString(!0)+this.op+n.ev(e).toString(!0)):void 0===r.operate?(e.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(e,this.op,n))}}]),e}(),c.CartoCSS.Tree.Quoted=function(){function e(t){zO(this,e),this.is="string",this.value=t||""}return JO(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),r=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+r+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,r){return new c.CartoCSS.Tree.Quoted(c.CartoCSS.Tree.operate(t,this.toString(),r.toString(this.contains_field)))}}]),e}(),c.CartoCSS.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])e.symbolizers[r][n].hasOwnProperty("css")&&(t[e.symbolizers[r][n].css]=[e.symbolizers[r][n],r,n]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])if("functions"===e.symbolizers[r][n].type)for(var o=0;o<e.symbolizers[r][n].functions.length;o++){var i=e.symbolizers[r][n].functions[o];t[i[0]]=i[1]}return t}(e),this.required_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in t[r]=[],e.symbolizers[r])e.symbolizers[r][n].required&&t[r].push(e.symbolizers[r][n].css);return t}(e)},setVersion:function(e){return!!c.CartoCSS.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(c.CartoCSS.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var r=this.required_cache[e];for(var n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var r=[],n=0;n<=t.length;n++)r[n]=[n];for(var o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)===e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]},validValue:function(e,t,r){var n;if(this.selector(t)){if("keyword"===r.value[0].is)return function(e,t){return"object"===HO(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(r,t);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(t).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(t).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var r in e.value)for(var n in e.value[r].value){if("call"!==e.value[r].value[n].is)return!1;var o=find(this.selector(t).functions,function(t){return t[0]===e.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===e.value[r].value[n].args.length))return!1}return!0}(r,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(t).validate){for(n=0;n<r.value.length;n++)if(this.selector(t).type===r.value[n].is&&this._validateValue[this.selector(t).validate](e,r.value[n].value))return!0;return!1}return this.selector(t).type===r.value[0].is}return!1}},c.CartoCSS.Tree.Reference.setVersion("latest"),c.CartoCSS.Tree.Rule=function(){function e(t,r,n,o){zO(this,e),this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof c.CartoCSS.Tree.Value?r:new c.CartoCSS.Tree.Value([r]),this.index=n,this.symbolizer=c.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)}return JO(e,[{key:"clone",value:function(){var e=Object.create(c.CartoCSS.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+c.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new c.CartoCSS.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),c.CartoCSS.Tree.Ruleset=function(){function e(t,r){zO(this,e),this.is="ruleset",this.selectors=t,this.rules=r,this._lookups={}}return JO(e,[{key:"ev",value:function(e){var t,r,n=new c.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0;t<n.rules.length;t++)r=n.rules[t],n.rules[t]=r.ev?r.ev(e):r;return e.frames.shift(),n}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof c.CartoCSS.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof c.CartoCSS.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var r=[],n=e.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==t)for(var o=0;o<n.selectors.length;o++)if(e.match(n.selectors[o])){e.elements.length>1?Array.prototype.push.apply(r,n.find(new c.CartoCSS.Tree.Selector(null,null,e.elements.slice(1)),t)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var r=c.CartoCSS.Tree.Zoom.all,n=0;n<this.selectors[t].zoom.length;n++)r=this.selectors[t].zoom[n].ev(e).zoom;this.selectors[t].zoom=r}}},{key:"flatten",value:function(e,t,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(t.length)for(o=0;o<t.length;o++){var s=t[o],l=s.filters.cloneWith(a.filters);if(null===l){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}l=s.filters}else if(!l)continue;var u=Object.create(c.CartoCSS.Tree.Selector.prototype);u.filters=l,u.zoom=a.zoom,u.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?u.attachment=s.attachment+"/"+a.attachment:u.attachment=a.attachment||s.attachment,u.conditions=s.conditions+a.conditions,u.index=a.index,i.push(u)}else i.push(a)}var f=[];for(n=0;n<this.rules.length;n++){var h=this.rules[n];h instanceof c.CartoCSS.Tree.Ruleset?h.flatten(e,i,r):h instanceof c.CartoCSS.Tree.Rule?f.push(h):h instanceof c.CartoCSS.Tree.Invalid&&r.error(h)}var p=!!f.length&&f[0].index;for(n=0;n<i.length;n++)!1!==p&&(i[n].index=p),e.push(new c.CartoCSS.Tree.Definition(i[n],f.slice()));return e}}]),e}(),c.CartoCSS.Tree.Selector=function(){function e(t,r,n,o,i,a){zO(this,e),this.elements=n||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==r?r:c.CartoCSS.Tree.Zoom.all,this.conditions=i,this.index=a}return JO(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var r=t.specificity();return e[0]+=r[0],e[1]+=r[1],e},[0,0,this.conditions,this.index])}}]),e}(),c.CartoCSS.Tree.URL=function(){function e(t,r){zO(this,e),this.is="uri",this.value=t,this.paths=r}return JO(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new c.CartoCSS.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),c.CartoCSS.Tree.Value=function(){function e(t){zO(this,e),this.is="value",this.value=t}return JO(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new c.CartoCSS.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),r=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?r="'"+r+"'":"field"===t.is?r=r.replace(/\[(.*)\]/g,"attributes['$1']"):t.value&&"object"===HO(t.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(e,t,r,n){return this.value.map(function(t){return t.toString(e,n)}).join(r||", ")}},{key:"clone",value:function(){var e=Object.create(c.CartoCSS.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),c.CartoCSS.Tree.Variable=function(){function e(t,r,n){zO(this,e),this.is="variable",this.name=t,this.index=r,this.filename=n}return JO(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),c.CartoCSS.Tree.Zoom=function(){function e(t,r,n){zO(this,e),this.op=t,this.value=r,this.index=n}return JO(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>c.CartoCSS.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+c.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t;break;default:return this}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=c.CartoCSS.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),c.CartoCSS.Tree.Zoom.all=23,c.CartoCSS.Tree.Zoom.maxZoom=22,c.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};function YO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.ThemeStyle=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,Te.extend(this,t)};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XO=function(){function e(){!
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&YO(t.prototype,r),n&&YO(t,n),e}();function QO(e){return(QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZO(e,t){return!t||"object"!==QO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $O(e,t,r){return($O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ex(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ex(e){return(ex=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tx(e,t){return(tx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters=XO;var rx=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ZO(this,ex(t).call(this,e,r))).x=isNaN(e)?0:e,n.y=isNaN(r)?0:r,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,$O(ex(t.prototype),"destroy",this).call(this)}}])&&KO(r.prototype,n),o&&KO(r,o),t}();function nx(e){return(nx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ox(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ix(e,t){return!t||"object"!==nx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ax(e,t,r){return(ax="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sx(e){return(sx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lx(e,t){return(lx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Point=rx;var ux=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ix(this,sx(t).call(this,e))).pointList=e,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.pointList=null,ax(sx(t.prototype),"destroy",this).call(this)}}])&&ox(r.prototype,n),o&&ox(r,o),t}();function cx(e){return(cx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hx(e,t){return!t||"object"!==cx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function px(e,t,r){return(px="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function yx(e){return(yx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dx(e,t){return(dx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Line=ux;var mx=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hx(this,yx(t).call(this,e))).pointList=e,r.holePolygonPointLists=null,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,px(yx(t.prototype),"destroy",this).call(this)}}])&&fx(r.prototype,n),o&&fx(r,o),t}();function vx(e){return(vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gx(e,t){return!t||"object"!==vx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sx(e,t,r){return(Sx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function wx(e){return(wx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _x(e,t){return(_x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Polygon=mx;var Ox=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=gx(this,wx(t).call(this,e,r,n,o))).x=isNaN(e)?0:e,i.y=isNaN(e)?0:r,i.width=isNaN(n)?0:n,i.height=isNaN(o)?0:o,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_x(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,Sx(wx(t.prototype),"destroy",this).call(this)}}])&&bx(r.prototype,n),o&&bx(r,o),t}();function xx(e){return(xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tx(e,t){return!t||"object"!==xx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Px(e,t,r){return(Px="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ex(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ex(e){return(Ex=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kx(e,t){return(kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Rectangle=Ox;var Mx=function(e){function t(e,r,n,o,i,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=Tx(this,Ex(t).call(this,e,r,n,o,i,a,s))).x=isNaN(e)?0:e,l.y=isNaN(r)?0:r,l.r=isNaN(n)?0:n,l.startAngle=isNaN(o)?0:o,l.endAngle=isNaN(i)?0:i,l.r0=isNaN(a)?0:a,l.clockWise=s,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",l}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,Px(Ex(t.prototype),"destroy",this).call(this)}}])&&Cx(r.prototype,n),o&&Cx(r,o),t}();function jx(e){return(jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ax(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rx(e,t){return!t||"object"!==jx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lx(e,t,r){return(Lx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ix(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ix(e){return(Ix=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nx(e,t){return(Nx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Sector=Mx;var Fx=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Rx(this,Ix(t).call(this,e,r,n))).x=e,o.y=r,o.text=n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,Lx(Ix(t.prototype),"destroy",this).call(this)}}])&&Ax(r.prototype,n),o&&Ax(r,o),t}();function Dx(e){return(Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bx(e,t){return!t||"object"!==Dx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ux(e,t,r){return(Ux="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Vx(e){return(Vx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hx(e,t){return(Hx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Label=Fx;var zx=function(e){function t(e,r,n,o,i,a,s,l,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=Bx(this,Vx(t).call(this,e,r,n,o,i,a,s,l,u))).x=e,c.y=r,c.image=n,c.width=o,c.height=i,c.sx=a,c.sy=s,c.sWidth=l,c.sHeight=u,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,Ux(Vx(t.prototype),"destroy",this).call(this)}}])&&Gx(r.prototype,n),o&&Gx(r,o),t}();function qx(e){return(qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wx(e,t){return!t||"object"!==qx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yx(e,t,r){return(Yx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xx(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Xx(e){return(Xx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qx(e,t){return(Qx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.ShapeParameters.Image=zx;var Kx=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Wx(this,Xx(t).call(this,e,r,n))).x=isNaN(e)?0:e,o.y=isNaN(r)?0:r,o.r=isNaN(n)?0:n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qx(e,t)}(t,XO),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Yx(Xx(t.prototype),"destroy",this).call(this)}}])&&Jx(r.prototype,n),o&&Jx(r,o),t}();function Zx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Feature=c.Feature||{},c.Feature.ShapeParameters.Circle=Kx;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(e,t){var r=this._handlers;if(!e)return this._handlers={},this;if(t){if(r[e]){for(var n=[],o=0,i=r[e].length;o<i;o++)r[e][o].h!=t&&n.push(r[e][o]);r[e]=n}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>3&&(t=Array.prototype.slice.call(t,1));for(var n=this._handlers[e],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,t[1]);break;case 3:n[i].h.call(n[i].ctx,t[1],t[2]);break;default:n[i].h.apply(n[i].ctx,t)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var n=t[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,t[1]);break;case 3:o[a].h.call(n,t[1],t[2]);break;default:o[a].h.apply(n,t)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&Zx(t.prototype,r),n&&Zx(t,n),e}();function eC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var tC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,r,n;return t=e,(r=[{key:"create",value:function(e,t){var r=new(0,this.ArrayCtor)(2);return r[0]=e||0,r[1]=t||0,r}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"add",value:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}},{key:"scaleAndAdd",value:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}},{key:"sub",value:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}},{key:"div",value:function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}},{key:"normalize",value:function(e,t){var r=this.len(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,r,n){return e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e}},{key:"min",value:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}},{key:"max",value:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&eC(t.prototype,r),n&&eC(t,n),e}();function rC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new tC,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,r,n;return t=e,(r=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,r,n,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(e,t,r,n,o){var i=1-o;return 3*(((t-e)*i+2*(r-t)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(e,t,r,n,o,i){var a=n+3*(t-r)-e,s=3*(r-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-l/s;y>=0&&y<=1&&(i[p++]=y)}else{var d=f*f-4*c*h;if(this.isAroundZero(d)){var m=f/c,v=-s/a+m,b=-m/2;v>=0&&v<=1&&(i[p++]=v),b>=0&&b<=1&&(i[p++]=b)}else if(d>0){var g=Math.sqrt(d),S=c*s+1.5*a*(-f+g),w=c*s+1.5*a*(-f-g),_=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))))/(3*a);_>=0&&_<=1&&(i[p++]=_)}else{var O=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),x=Math.acos(O)/3,C=Math.sqrt(c),T=Math.cos(x),P=(-s-2*C*T)/(3*a),E=(-s+C*(T+this.THREE_SQRT*Math.sin(x)))/(3*a),k=(-s+C*(T-this.THREE_SQRT*Math.sin(x)))/(3*a);P>=0&&P<=1&&(i[p++]=P),E>=0&&E<=1&&(i[p++]=E),k>=0&&k<=1&&(i[p++]=k)}}return p}},{key:"cubicExtrema",value:function(e,t,r,n,o){var i=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var u=-s/i;u>=0&&u<=1&&(o[l++]=u)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-i+f)/(2*a),p=(-i-f)/(2*a);h>=0&&h<=1&&(o[l++]=h),p>=0&&p<=1&&(o[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(e,t,r,n,o,i){var a=(t-e)*o+e,s=(r-t)*o+t,l=(n-r)*o+r,u=(s-a)*o+a,c=(l-s)*o+s,f=(c-u)*o+u;i[0]=e,i[1]=a,i[2]=u,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=n}},{key:"cubicProjectPoint",value:function(e,t,r,n,o,i,a,s,l,u,c){var f,h=this.vector.create(),p=this.vector.create(),y=this.vector.create(),d=.005,m=1/0;h[0]=l,h[1]=u;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(e,r,o,a,v),p[1]=this.cubicAt(t,n,i,s,v);var b=this.vector.distSquare(h,p);b<m&&(f=v,m=b)}m=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var S=f-d,w=f+d;p[0]=this.cubicAt(e,r,o,a,S),p[1]=this.cubicAt(t,n,i,s,S);var _=this.vector.distSquare(p,h);if(S>=0&&_<m)f=S,m=_;else{y[0]=this.cubicAt(e,r,o,a,w),y[1]=this.cubicAt(t,n,i,s,w);var O=this.vector.distSquare(y,h);w<=1&&O<m?(f=w,m=O):d*=.5}}return c&&(c[0]=this.cubicAt(e,r,o,a,f),c[1]=this.cubicAt(t,n,i,s,f)),Math.sqrt(m)}},{key:"quadraticAt",value:function(e,t,r,n){var o=1-n;return o*(o*e+2*n*t)+n*n*r}},{key:"quadraticDerivativeAt",value:function(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}},{key:"quadraticRootAt",value:function(e,t,r,n,o){var i=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(o[l++]=u)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[l++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*i),y=(-a-h)/(2*i);p>=0&&p<=1&&(o[l++]=p),y>=0&&y<=1&&(o[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(e,t,r){var n=e+r-2*t;return 0===n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,r,n,o,i,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(e,r,o,d),f[1]=this.quadraticAt(t,n,i,d);var m=this.vector.distSquare(c,f);m<y&&(u=d,y=m)}y=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var b=u-p,g=u+p;f[0]=this.quadraticAt(e,r,o,b),f[1]=this.quadraticAt(t,n,i,b);var S=this.vector.distSquare(f,c);if(b>=0&&S<y)u=b,y=S;else{h[0]=this.quadraticAt(e,r,o,g),h[1]=this.quadraticAt(t,n,i,g);var w=this.vector.distSquare(h,c);g<=1&&w<y?(u=g,y=w):p*=.5}}return l&&(l[0]=this.quadraticAt(e,r,o,u),l[1]=this.quadraticAt(t,n,i,u)),Math.sqrt(y)}}])&&rC(t.prototype,r),n&&rC(t,n),e}();function oC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new RO,this.curve=new nC,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,r,n;return t=e,(r=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,r,n){if(!t||!e)return!1;var o=e.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(e,t,r,n);if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,r,n,a);case"rose":return this.isInsideCircle(t,r,n,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,r,n){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,r,n):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,r,n);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return e.refOriginalPosition&&(o=r-e.refOriginalPosition[0],i=n-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,r,n);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,r,n);case"circle":return this.isInsideCircle(t.x,t.y,t.r,r,n);case"smicpoint":var l=r,u=n;return e.refOriginalPosition&&(l=r-e.refOriginalPosition[0],u=n-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,r,n);case"smicsector":var h=t.startAngle*Math.PI/180,p=t.endAngle*Math.PI/180;t.clockWise||(h=-h,p=-p);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,h,p,!t.clockWise,r,n);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,r,n);case"smicpolygon":var m=r,v=n;if(e.refOriginalPosition&&(m=r-e.refOriginalPosition[0],v=n-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var b=this.isInsidePolygon(t.pointList,m,v),g=e.holePolygonPointLists,S=!1,w=0,_=g.length;w<_;w++){var O=g[w];!0===this.isInsidePolygon(O,m,v)&&(S=!0)}return!0===b&&!1===S}return this.isInsidePolygon(t.pointList,m,v);case"text":var x=t.__rect||e.getRect(t);return this.isInsideRect(x.x,x.y,x.width,x.height,r,n);case"smictext":var C=e.getTextBackground(t);return this.isInsidePolygon(C,r,n);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,r,n);case"smicimage":var T=t.x,P=t.y;return e.refOriginalPosition&&(T=t.x+e.refOriginalPosition[0],P=t.y+e.refOriginalPosition[1]),this.isInsideRect(T,P,t.width,t.height,r,n)}}},{key:"_buildPathMethod",value:function(e,t,r,n,o){return t.beginPath(),e.buildPath(t,r),t.closePath(),t.isPointInPath(n,o)}},{key:"isOutside",value:function(e,t,r,n){return!this.isInside(e,t,r,n)}},{key:"isInsideLine",value:function(e,t,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),l=0;if(a>t+s&&a>n+s||a<t-s&&a<n-s||i>e+s&&i>r+s||i<e-s&&i<r-s)return!1;if(e===r)return Math.abs(i-e)<=s/2;var u=(l=(t-n)/(e-r))*i-a+(e*n-r*t)/(e-r);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,r,n,o,i,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>t+f&&c>n+f&&c>i+f&&c>s+f||c<t-f&&c<n-f&&c<i-f&&c<s-f||u>e+f&&u>r+f&&u>o+f&&u>a+f||u<e-f&&u<r-f&&u<o-f&&u<a-f)&&this.curve.cubicProjectPoint(e,t,r,n,o,i,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,r,n,o,i,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>t+u&&l>n+u&&l>i+u||l<t-u&&l<n-u&&l<i-u||s>e+u&&s>r+u&&s>o+u||s<e-u&&s<r-u&&s<o-u)&&this.curve.quadraticProjectPoint(e,t,r,n,o,i,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,r,n,o,i,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,l-=t;var f=Math.sqrt(s*s+l*l);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=u)return!0;if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),p>=n&&p<=o||p+u>=n&&p+u<=o}},{key:"isInsideBrokenLine",value:function(e,t,r,n){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],l=e[i][1],u=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,l,u,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(e,t,r,n,o,i){var a=(o-e)*(o-e)+(i-t)*(i-t);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(e,t,r,n,o,i){return o>=e&&o<=e+r&&i>=t&&i<=t+n}},{key:"isInsideCircle",value:function(e,t,r,n,o){return(n-e)*(n-e)+(o-t)*(o-t)<r*r}},{key:"isInsideSector",value:function(e,t,r,n,o,i,a,s,l){return this.isInsideArcStroke(e,t,(r+n)/2,o,i,a,n-r,s,l)}},{key:"isInsidePolygon",value:function(e,t,r){for(var n=e.length,o=0,i=0,a=n-1;i<n;i++){var s=e[a][0],l=e[a][1],u=e[i][0],c=e[i][1];o+=this.windingLine(s,l,u,c,t,r),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,r,n,o,i){return i>t&&i>n||i<t&&i<n?0:n==t?0:(i-t)/(n-t)*(r-e)+e>o?n<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,r,n,o,i,a,s,l,u){var c=this.curve,f=this.roots,h=this.extrema;if(u>t&&u>n&&u>i&&u>s||u<t&&u<n&&u<i&&u<s)return 0;var p=c.cubicRootAt(t,n,i,s,u,f);if(0===p)return 0;for(var y,d,m=0,v=-1,b=0;b<p;b++){var g=f[b];c.cubicAt(e,r,o,a,g)<l||(v<0&&(v=c.cubicExtrema(t,n,i,s,h),h[1]<h[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(t,n,i,s,h[0]),v>1&&(d=c.cubicAt(t,n,i,s,h[1]))),2==v?g<h[0]?m+=y<t?1:-1:g<h[1]?m+=d<y?1:-1:m+=s<d?1:-1:g<h[0]?m+=y<t?1:-1:m+=s<y?1:-1)}return m}},{key:"windingQuadratic",value:function(e,t,r,n,o,i,a,s){var l=this.curve,u=this.roots;if(s>t&&s>n&&s>i||s<t&&s<n&&s<i)return 0;var c=l.quadraticRootAt(t,n,i,s,u);if(0===c)return 0;var f=l.quadraticExtremum(t,n,i);if(f>=0&&f<=1){for(var h=0,p=l.quadraticAt(t,n,i,f),y=0;y<c;y++){l.quadraticAt(e,r,o,u[y])>a||(u[y]<f?h+=p<t?1:-1:h+=i<p?1:-1)}return h}return l.quadraticAt(e,r,o,u[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,r,n,o,i,a,s){var l=this.roots,u=this.PI2;if((s-=t)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(l[0]=-c,l[1]=c,Math.abs(n-o)>=u){n=0,o=u;var f=i?1:-1;return a>=l[0]+e&&a<=l[1]+e?f:0}if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);for(var p=0,y=0;y<2;y++){var d=l[y];if(d+e>a){var m=Math.atan2(s,d),v=i?1:-1;m<0&&(m=u+m),(m>=n&&m<=o||m+u>=n&&m+u<=o)&&(m>Math.PI/2&&m<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(e,t,r,n,o){for(var i=0,a=0,s=0,l=0,u=0,c=!0,f=!0,h="stroke"===(r=r||"fill")||"both"===r,p="fill"===r||"both"===r,y=0;y<e.length;y++){var d=e[y],m=d.points;if(c||"M"===d.command){if(y>0&&(p&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i))return!0;l=m[m.length-2],u=m[m.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=l,s=u)}switch(d.command){case"M":a=m[0],s=m[1];break;case"L":if(h&&this.isInsideLine(a,s,m[0],m[1],t,n,o))return!0;p&&(i+=this.windingLine(a,s,m[0],m[1],n,o)),a=m[0],s=m[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,m[0],m[1],m[2],m[3],m[4],m[5],t,n,o))return!0;p&&(i+=this.windingCubic(a,s,m[0],m[1],m[2],m[3],m[4],m[5],n,o)),a=m[4],s=m[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,m[0],m[1],m[2],m[3],t,n,o))return!0;p&&(i+=this.windingQuadratic(a,s,m[0],m[1],m[2],m[3],n,o)),a=m[2],s=m[3];break;case"A":var v=m[0],b=m[1],g=m[2],S=m[3],w=m[4],_=m[5],O=Math.cos(w)*g+v,x=Math.sin(w)*S+b;f?(f=!1,l=O,u=x):i+=this.windingLine(a,s,O,x);var C=(n-v)*S/g+v;if(h&&this.isInsideArcStroke(v,b,S,w,w+_,1-m[7],t,C,o))return!0;p&&(i+=this.windingArc(v,b,S,w,w+_,1-m[7],C,o)),a=Math.cos(w+_)*g+v,s=Math.sin(w+_)*S+b;break;case"z":if(h&&this.isInsideLine(a,s,l,u,t,n,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var r=e+":"+t;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var n=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(e[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(e,t){var r=e+":"+t;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&oC(t.prototype,r),n&&oC(t,n),e}();function aC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,r,n;return t=e,(r=[{key:"computeBoundingBox",value:function(e,t,r){if(0!==e.length){for(var n=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<n&&(n=l[0]),l[0]>o&&(o=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1])}t[0]=n,t[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(e,t,r,n,o,i){var a=new nC,s=[];a.cubicExtrema(e[0],t[0],r[0],n[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(e[0],t[0],r[0],n[0],s[l]);var u=[];a.cubicExtrema(e[1],t[1],r[1],n[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(e[1],t[1],r[1],n[1],u[c]);s.push(e[0],n[0]),u.push(e[1],n[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,u),y=Math.max.apply(null,u);o[0]=f,o[1]=p,i[0]=h,i[1]=y}},{key:"quadraticBezier",value:function(e,t,r,n,o){var i=new nC,a=i.quadraticExtremum(e[0],t[0],r[0]),s=i.quadraticExtremum(e[1],t[1],r[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*a*t[0]+a*a*r[0],f=l*l*e[1]+2*l*a*t[1]+a*a*r[1],h=u*u*e[0]+2*u*s*t[0]+s*s*r[0],p=u*u*e[1]+2*u*s*t[1]+s*s*r[1];n[0]=Math.min(e[0],r[0],c,h),n[1]=Math.min(e[1],r[1],f,p),o[0]=Math.max(e[0],r[0],c,h),o[1]=Math.max(e[1],r[1],f,p)}},{key:"arc",value:function(e,t,r,n,o,i,a,s){var l=new tC,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(n)*r+e,u[1]=Math.sin(n)*r+t,c[0]=Math.cos(o)*r+e,c[1]=Math.sin(o)*r+t,l.min(a,u,c),l.max(s,u,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var h=o;o=n,n=h}for(var p=0;p<o;p+=Math.PI/2)p>n&&(f[0]=Math.cos(p)*r+e,f[1]=Math.sin(p)*r+t,l.min(a,f,a),l.max(s,f,s))}}])&&aC(t.prototype,r),n&&aC(t,n),e}();function lC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,r,n,o,i,a,s,l,u,c,f,h,p,y,d,m,v,b,g,S,w,_=this;return t=navigator.userAgent,r=_.os={},n=_.browser={},o=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),y=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),b=t.match(/Firefox\/([\d.]+)/),g=t.match(/MSIE ([\d.]+)/),S=o&&t.match(/Mobile\//)&&!v,w=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),l&&!s&&(r.ios=r.iphone=!0,r.version=l[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),u&&(r.webos=!0,r.version=u[2]),c&&(r.touchpad=!0),p&&(r.blackberry=!0,r.version=p[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),m&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),h&&(n.silk=!0,n.version=h[1]),!h&&r.android&&t.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),b&&(n.firefox=!0,n.version=b[1]),g&&(n.ie=!0,n.version=g[1]),S&&(t.match(/Safari/)||r.ios)&&(n.safari=!0),w&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||m||i&&!t.match(/Mobile/)||b&&t.match(/Tablet/)||g&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||l||u||p||y||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||b&&t.match(/Mobile/)||g&&t.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&lC(t.prototype,r),n&&lC(t,n),e}();function cC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,r,n;return t=e,(r=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&cC(t.prototype,r),n&&cC(t,n),e}();function hC(e){return(hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,r,n;return t=e,(r=[{key:"get",value:function(e,t,r){if("object"===hC(e)){var n=e;e=n.url,t=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?t&&t(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&pC(t.prototype,r),n&&pC(t,n),e}();
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dC=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function mC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}dC.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},dC.catchBrushException=!1,dC.debugMode=0;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vC=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==dC.debugMode)if(1==dC.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(dC.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&mC(t.prototype,r),n&&mC(t,n),e}();function bC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,r,n;return t=e,(r=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&bC(t.prototype,r),n&&bC(t,n),e}();function SC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,r,n;return t=e,(r=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0]+t[2]*r[1],e[1]=t[1]*r[0]+t[3]*r[1],e[2]=t[0]*r[2]+t[2]*r[3],e[3]=t[1]*r[2]+t[3]*r[3],e[4]=t[0]*r[4]+t[2]*r[5]+t[4],e[5]=t[1]*r[4]+t[3]*r[5]+t[5],e}},{key:"translate",value:function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}},{key:"rotate",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*i+u*l,e[5]=c*l-u*i,e}},{key:"scale",value:function(e,t,r){var n=r[0],o=r[1];return e[0]=t[0]*n,e[1]=t[1]*o,e[2]=t[2]*n,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*o,e}},{key:"invert",value:function(e,t){var r=t[0],n=t[2],o=t[4],i=t[1],a=t[3],s=t[5],l=r*a-i*n;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*o)*l,e[5]=(i*o-r*s)*l,e):null}},{key:"mulVector",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5];return e[0]=r[0]*n+r[1]*o+i,e[1]=r[0]*a+r[1]*s+l,e}}])&&SC(t.prototype,r),n&&SC(t,n),e}();function _C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"SUtil_smoothBezier",value:function(t,r,n,o,i){i&&2===i||(i=[0,0]);var a,s,l=i,u=[],c=[],f=[],h=[],p=!!o;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=t.length,d=0;d<y;d++)e.Util_vector.min(a,a,[t[d][0]+l[0],t[d][1]+l[1]]),e.Util_vector.max(s,s,[t[d][0]+l[0],t[d][1]+l[1]]);e.Util_vector.min(a,a,o[0]),e.Util_vector.max(s,s,o[1])}for(var m=t.length,v=0;v<m;v++){var b=[t[v][0]+l[0],t[v][1]+l[1]],g=void 0,S=void 0;if(n)g=[t[v?v-1:m-1][0]+l[0],t[v?v-1:m-1][1]+l[1]],S=[t[(v+1)%m][0]+l[0],t[(v+1)%m][1]+l[1]];else{if(0===v||v===m-1){u.push([t[v][0]+l[0],t[v][1]+l[1]]);continue}g=[t[v-1][0]+l[0],t[v-1][1]+l[1]],S=[t[v+1][0]+l[0],t[v+1][1]+l[1]]}e.Util_vector.sub(c,S,g),e.Util_vector.scale(c,c,r);var w=e.Util_vector.distance(b,g),_=e.Util_vector.distance(b,S),O=w+_;0!==O&&(w/=O,_/=O),e.Util_vector.scale(f,c,-w),e.Util_vector.scale(h,c,_);var x=e.Util_vector.add([],b,f),C=e.Util_vector.add([],b,h);p&&(e.Util_vector.max(x,x,a),e.Util_vector.min(x,x,s),e.Util_vector.max(C,C,a),e.Util_vector.min(C,C,s)),u.push(x),u.push(C)}return n&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(t,r,n,o){o&&2===o||(o=[0,0]);for(var i=o,a=t.length,s=[],l=0,u=1;u<a;u++)l+=e.Util_vector.distance([t[u-1][0]+i[0],t[u-1][1]+i[1]],[t[u][0]+i[0],t[u][1]+i[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(r?a:a-1),p=Math.floor(h),y=h-p,d=void 0,m=[t[p%a][0]+i[0],t[p%a][1]+i[1]],v=void 0,b=void 0;r?(d=[t[(p-1+a)%a][0]+i[0],t[(p-1+a)%a][1]+i[1]],v=[t[(p+1)%a][0]+i[0],t[(p+1)%a][1]+i[1]],b=[t[(p+2)%a][0]+i[0],t[(p+2)%a][1]+i[1]]):(d=[t[0===p?p:p-1][0]+i[0],t[0===p?p:p-1][1]+i[1]],v=[t[p>a-2?a-1:p+1][0]+i[0],t[p>a-2?a-1:p+1][1]+i[1]],b=[t[p>a-3?a-1:p+2][0]+i[0],t[p>a-3?a-1:p+2][1]+i[1]]);var g=y*y,S=y*g;s.push([w(d[0],m[0],v[0],b[0],y,g,S),w(d[1],m[1],v[1],b[1],y,g,S)])}return s;function w(e,t,r,n,o,i,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*i+s*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,r),void e.lineTo(n,o);var l=n-t,u=o-r,c=Math.floor(Math.sqrt(l*l+u*u)/i);l/=c,u/=c;for(var f=!0,h=0;h<c;++h)f?e.moveTo(t,r):e.lineTo(t,r),f=!f,t+=l,r+=u;e.lineTo(n,o)}}],(r=null)&&_C(t.prototype,r),n&&_C(t,n),e}();function xC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}OC.Util_area=new iC,OC.Util_color=new IO,OC.Util_computeBoundingBox=new sC,OC.Util_curve=new nC,OC.Util_env=new uC,OC.Util_event=new fC,OC.Util_http=new yC,OC.Util_log=new vC,OC.Util_math=new gC,OC.Util_matrix=new wC,OC.Util=new RO,OC.Util_vector=new tC;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var CC=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=OC.Util_vector.create(),function(e){this.transform||(this.transform=OC.Util_matrix.create());var r=this.transform;function n(e){return e>-5e-5&&e<5e-5}OC.Util_vector.sub(t,e,this.position),n(t[0])&&n(t[1])||(OC.Util_vector.normalize(t,t),r[2]=t[0]*this.scale[1],r[3]=t[1]*this.scale[1],r[0]=t[1]*this.scale[0],r[1]=-t[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||OC.Util_matrix.create();if(OC.Util_matrix.identity(t),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var r=o(e[0])||o(e[1]);r&&OC.Util_matrix.translate(t,t,e),OC.Util_matrix.scale(t,t,this.scale),r&&(e[0]=-e[0],e[1]=-e[1],OC.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var n=o(e[0])||o(e[1]);n&&OC.Util_matrix.translate(t,t,e),OC.Util_matrix.rotate(t,t,this.rotation[0]),n&&(e[0]=-e[0],e[1]=-e[1],OC.Util_matrix.translate(t,t,e))}}else 0!==this.rotation&&OC.Util_matrix.rotate(t,t,this.rotation);(o(this.position[0])||o(this.position[1]))&&OC.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?OC.Util_matrix.mul(this.transform,this.parent.transform,this.transform):OC.Util_matrix.copy(this.transform,this.parent.transform))}function o(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],r=this.position,n=this.scale,o=this.rotation;a(t-1)&&(t=Math.sqrt(t));var i=e[2]*e[2]+e[3]*e[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=e[4],r[1]=e[5],n[0]=t,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&xC(t.prototype,r),n&&xC(t,n),e}();function TC(e){return(TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kC(e,t,r){return(kC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function MC(e){return(MC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jC(e,t){return(jC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var AC=function(e){function t(e){var r,n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=MC(t).call(this,e))||"object"!==TC(o)&&"function"!=typeof o?EC(n):o,e=e||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,Te.extend(EC(r),e),r.id=r.id||Te.createUniqueID("smShape_"),r.CLASS_NAME="SuperMap.LevelRenderer.Shape",r.getTansform=(i=[],function(e,t){var r=[e,t];return this.needTransform&&this.transform&&(OC.Util_matrix.invert(i,this.transform),OC.Util_matrix.mulVector(r,i,[e,t,1]),e==r[0]&&t==r[1]&&this.updateNeedTransform()),r}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jC(e,t)}(t,c.mixin($x,CC)),r=t,o=[{key:"_fillText",value:function(e,r,n,o,i,a,s){i&&(e.font=i),e.textAlign=a,e.textBaseline=s;var l=t._getTextRect(r,n,o,i,a,s);r=(r+"").split("\n");var u=OC.Util_area.getTextHeight("ZH",i);switch(s){case"top":o=l.y;break;case"bottom":o=l.y+u;break;default:o=l.y+u/2}for(var c=0,f=r.length;c<f;c++)e.fillText(r[c],n,o),o+=u}},{key:"_getTextRect",value:function(e,t,r,n,o,i){var a=OC.Util_area.getTextWidth(e,n),s=OC.Util_area.getTextHeight("ZH",n);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":r-=s*e.length;break;default:r-=s*e.length/2}return{x:t,y:r,width:a,height:s*e.length}}}],(n=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,kC(MC(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var r=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,r),r.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",r),e.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",r),e.stroke()),this.setCtxGlobalAlpha(e,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",r);break;default:this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)}this.drawText(e,r,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),t&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=t[r[n][0]],a=r[n][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=OC.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;OC.Util_matrix.invert(t,o),e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(e.beginPath(),n.buildPath(e,n.style),e.clip(),n.needTransform){var i=t;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(e,t,r){var n={};for(var o in e)n[o]=e[o];var i=OC.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(n.strokeColor=i,n.lineWidth=e.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=e.lineWidth||1):n.strokeColor=t.strokeColor||OC.Util_color.mix(e.strokeColor,OC.Util_color.toRGB(i)),t)void 0!==t[a]&&(n[a]=t[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){OC.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){OC.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var r=this.getTansform(e,t);e=r[0],t=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&OC.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,r,n){if(void 0!==r.text&&!1!==r.text){var o=r.textColor||r.color||r.strokeColor;e.fillStyle=o;var i,a,s,l,u=10,c=r.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(n||r).__rect||this.getRect(n||r);switch(c){case"inside":s=h.x+h.width/2,l=h.y+h.height/2,i="center",a="middle","stroke"!=r.brushType&&o==r.color&&(e.fillStyle="#fff");break;case"left":s=h.x-u,l=h.y+h.height/2,i="end",a="middle";break;case"right":s=h.x+h.width+u,l=h.y+h.height/2,i="start",a="middle";break;case"top":s=h.x+h.width/2,l=h.y-u,i="center",a="bottom";break;case"bottom":s=h.x+h.width/2,l=h.y+h.height+u,i="center",a="top"}}break;case"start":case"end":var p=0,y=0,d=0,m=0;if(void 0!==r.pointList){var v=r.pointList;if(v.length<2)return;var b=v.length;switch(c){case"start":p=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],m=v[1][1]+f[1];break;case"end":p=v[b-2][0]+f[0],y=v[b-1][0]+f[0],d=v[b-2][1]+f[1],m=v[b-1][1]+f[1]}}else p=r.xStart+f[0]||0,y=r.xEnd+f[0]||0,d=r.yStart+f[1]||0,m=r.yEnd+f[1]||0;switch(c){case"start":i=p<y?"end":"start",a=d<m?"bottom":"top",s=p,l=d;break;case"end":i=p<y?"start":"end",a=d<m?"top":"bottom",s=y,l=m}u-=4,p&&y&&p!=y?s-="end"==i?u:-u:i="center",d!=m?l-="bottom"==a?u:-u:a="middle";break;case"specific":s=r.textX||0,l=r.textY||0,i="start",a="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(s+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(l+=r.labelYOffset),null!=s&&null!=l&&t._fillText(e,r.text,s,l,r.textFont,r.textAlign||i,r.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,r){e.globalAlpha="fill"===t?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===t?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&PC(r.prototype,n),o&&PC(r,o),t}();function RC(e){return(RC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IC(e,t){return!t||"object"!==RC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NC(e,t,r){return(NC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function FC(e){return(FC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DC(e,t){return(DC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GC=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=IC(this,FC(t).call(this,e))).type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DC(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,NC(FC(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&LC(r.prototype,n),o&&LC(r,o),t}();function BC(e){return(BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VC(e,t){return!t||"object"!==BC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HC(e,t,r){return(HC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function zC(e){return(zC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qC(e,t){return(qC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var JC=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=VC(this,zC(t).call(this,e))).type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qC(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,HC(zC(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont&&(e.font=n.textFont),e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=OC.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),l=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var u=n.x+r[0],c=n.y+r[1],f=0,h=i.length;f<h;f++){switch(n.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*f,n.maxWidth):e.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.strokeText(i[f],l,o,n.maxWidth):e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n)),e.restore()):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n));break;default:this.setCtxGlobalAlpha(e,"fill",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*f,n.maxWidth):e.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.fillText(i[f],l,o,n.maxWidth):e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n)}o+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,r,n,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var l=i[a];0==a?(t=l[0],n=l[0],r=l[1],o=l[1]):(l[0]<t&&(t=l[0]),l[0]>n&&(n=l[0]),l[1]<r&&(r=l[1]),l[1]>o&&(o=l[1]))}return e.__rect={x:t,y:r,width:n-t,height:o-r},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=OC.Util_area.getTextHeight("ZH",e.textFont),o=OC.Util_area.getTextWidth(e.text,e.textFont),i=OC.Util_area.getTextHeight(e.text,e.textFont),a=e.x+r[0];"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2),t="top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-i:e.y+r[1]-i/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<o&&(s=o,l=!0,o=u),a=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===l?n/3*(o/s):n/3));return{x:a,y:t,width:o,height:i}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var n=this.getRectNoRotation(e),o=e.x+r[0],i=e.y+r[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(n.x,n.y,o,i,s),u=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var h=[n.x,n.y],p=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(h),a.push(p),a.push(y),a.push(d)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s=new Array;return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&UC(r.prototype,n),o&&UC(r,o),t}();function WC(e){return(WC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XC(e,t){return!t||"object"!==WC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QC(e,t,r){return(QC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function KC(e){return(KC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZC(e,t){return(ZC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $C=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=XC(this,KC(t).call(this,e))).type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZC(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,QC(KC(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1];return e.moveTo(n+t.r,o),e.arc(n,o,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(n-i-t/2),y:Math.round(o-i-t/2),width:2*i+t,height:2*i+t},e.__rect}}])&&YC(r.prototype,n),o&&YC(r,o),t}();function eT(e){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rT(e,t){return!t||"object"!==eT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nT(e,t,r){return(nT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function oT(e){return(oT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iT(e,t){return(iT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var aT=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=rT(this,oT(t).call(this,e))).type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iT(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,nT(oT(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),e.save(),this.setContext(e,r),this.setTransform(e);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(e.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(e,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(e,r),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(e.beginPath(),this.buildPath(e,r)),this.setCtxGlobalAlpha(e,"stroke",r),e.stroke(),this.setCtxGlobalAlpha(e,"reset",r)),this.drawText(e,r,this.style);var o=Te.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var l=i[s];o.pointList=l,e.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=OC.SUtil_smoothBezier(n,t.smooth,!0,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=n.length,u=0;u<l;u++)o=s[2*u],i=s[2*u+1],a=[n[(u+1)%l][0]+r[0],n[(u+1)%l][1]+r[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(n=OC.SUtil_smoothSpline(n,!0,null,r)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,h=f,p=f;"dashed"===t.lineType&&(h*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f)),"dash"===t.lineType&&(h*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"longdash"===t.lineType&&(h*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)OC.SUtil_dashedLineTo(e,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[h,p]);OC.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[h,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var m=t.lineWidth||1,v=m,b=m,g=m,S=m;"dashdot"===t.lineType&&(v*=4,b*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=m,b+=m,g=1,S+=m)),"longdashdot"===t.lineType&&(v*=8,b*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=m,b+=m,g=1,S+=m)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<n.length;w++)OC.SUtil_dashedLineTo(e,n[w-1][0]+r[0],n[w-1][1]+r[1],n[w][0]+r[0],n[w][1]+r[1],m,[v,b,g,S]);OC.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],m,[v,b,g,S])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var _=1;_<n.length;_++)e.lineTo(n[_][0]+r[0],n[_][1]+r[1]);e.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(e,t){var r;if(t?r=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),e.__rect)return e.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+r[0]<o&&(o=l[u][0]+r[0]),l[u][0]+r[0]>i&&(i=l[u][0]+r[0]),l[u][1]+r[1]<a&&(a=l[u][1]+r[1]),l[u][1]+r[1]>s&&(s=l[u][1]+r[1]);return n="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},e.__rect}}])&&tT(r.prototype,n),o&&tT(r,o),t}();function sT(e){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uT(e,t){return!t||"object"!==sT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cT(e,t,r){return(cT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fT(e){return(fT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hT(e,t){return(hT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pT=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=uT(this,fT(t).call(this,e))).brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hT(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,cT(fT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,l=OC.SUtil_smoothBezier(n,t.smooth,!1,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=0;u<o-1;u++)i=l[2*u],a=l[2*u+1],s=[n[u+1][0]+r[0],n[u+1][1]+r[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(n=OC.SUtil_smoothSpline(n,null,null,r)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,h=c;"dashed"===t.lineType&&(f*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c)),"dash"===t.lineType&&(f*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"longdash"===t.lineType&&(f*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var p=1;p<o;p++)OC.SUtil_dashedLineTo(e,n[p-1][0]+r[0],n[p-1][1]+r[1],n[p][0]+r[0],n[p][1]+r[1],c,[f,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,m=y,v=y,b=y;"dashdot"===t.lineType&&(d*=4,m*=4,b*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,v=1,b+=y)),"longdashdot"===t.lineType&&(d*=8,m*=4,b*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,v=1,b+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)OC.SUtil_dashedLineTo(e,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,m,v,b])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<o;S++)e.lineTo(n[S][0]+r[0],n[S][1]+r[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return aT.prototype.getRect.apply(this,[e,t])}}])&&lT(r.prototype,n),o&&lT(r,o),t}();function yT(e){return(yT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mT(e,t){return!t||"object"!==yT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vT(e,t,r){return(vT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function bT(e){return(bT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gT(e,t){return(gT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ST=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=mT(this,bT(t).call(this,e))).type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gT(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,vT(bT(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,r,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var o=this.refOriginalPosition,i=this.style||{};r&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(t._refreshTimeout),t._needsRefresh.push(s),t._refreshTimeout=setTimeout(function(){n&&n(t._needsRefresh),t._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=i.width||a.width,c=i.height||a.height,f=i.x+o[0],h=i.y+o[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,i),this.setTransform(e),i.sWidth&&i.sHeight){var p=i.sx+o[0]||0,y=i.sy+o[1]||0;e.drawImage(a,p,y,i.sWidth,i.sHeight,f,h,u,c)}else if(i.sx&&i.sy){var d=i.sx+o[0],m=i.sy+o[1],v=u-d,b=c-m;e.drawImage(a,d,m,v,b,f,h,u,c)}else e.drawImage(a,f,h,u,c);i.width||(i.width=u),i.height||(i.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(e,i,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&dT(r.prototype,n),o&&dT(r,o),t}();function wT(e){return(wT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OT(e,t){return!t||"object"!==wT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xT(e,t,r){return(xT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function CT(e){return(CT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TT(e,t){return(TT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ST._needsRefresh=[],ST._refreshTimeout=null;var PT=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=OT(this,CT(t).call(this,e))).type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TT(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,xT(CT(t.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,f=t.height,h=t.radius;"number"==typeof h?r=n=o=i=h:h instanceof Array?1===h.length?r=n=o=i=h[0]:2===h.length?(r=o=h[0],n=i=h[1]):3===h.length?(r=h[0],n=i=h[1],o=h[2]):(r=h[0],n=h[1],o=h[2],i=h[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),e.moveTo(l+r,u),e.lineTo(l+c-n,u),0!==n&&e.quadraticCurveTo(l+c,u,l+c,u+n),e.lineTo(l+c,u+f-o),0!==o&&e.quadraticCurveTo(l+c,u+f,l+c-o,u+f),e.lineTo(l+i,u+f),0!==i&&e.quadraticCurveTo(l,u+f,l,u+f-i),e.lineTo(l,u+r),0!==r&&e.quadraticCurveTo(l,u,l+r,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+r[0],t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-t/2),y:Math.round(e.y+r[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&_T(r.prototype,n),o&&_T(r,o),t}();function ET(e){return(ET="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function MT(e,t){return!t||"object"!==ET(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jT(e,t,r){return(jT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function AT(e){return(AT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RT(e,t){return(RT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var LT=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=MT(this,AT(t).call(this,e))).type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RT(e,t)}(t,AC),r=t,(n=[{key:"destroy",value:function(){this.type=null,jT(AT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r0||0,a=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=OC.Util_math.degreeToRadian(s),l=OC.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=OC.Util_math.cos(s),f=OC.Util_math.sin(s);e.moveTo(c*i+n,f*i+o),e.lineTo(c*a+n,f*a+o),e.arc(n,o,a,s,l,!u),e.lineTo(OC.Util_math.cos(l)*i+n,OC.Util_math.sin(l)*i+o),0!==i&&e.arc(n,o,i,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,r=OC.Util_vector.create(),n=OC.Util_vector.create(),o=OC.Util_vector.create(),i=OC.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=OC.Util_math.degreeToRadian(e.startAngle),f=OC.Util_math.degreeToRadian(e.endAngle),h=e.clockWise;return h||(c=-c,f=-f),l>1?OC.Util_computeBoundingBox.arc(a,s,l,c,f,!h,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),OC.Util_computeBoundingBox.arc(a,s,u,c,f,!h,n,i),OC.Util_vector.min(r,r,n),OC.Util_vector.max(o,o,i),e.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},e.__rect}}])&&kT(r.prototype,n),o&&kT(r,o),t}();function IT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,r,n;return t=e,n=[{key:"transformStyle",value:function(e){var t={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in e)switch(o){case"fill":n[0]=e[o];break;case"fillColor":t.color=e[o];break;case"stroke":n[1]=e[o];break;case"strokeWidth":t.lineWidth=e[o];break;case"strokeLinecap":t.lineCap=e[o];break;case"strokeLineJoin":t.lineJoin=e[o];break;case"strokeDashstyle":t.lineType=e[o];break;case"pointRadius":t.r=e[o];break;case"label":t.text=e[o];break;case"labelRect":t.labelRect=e[o];break;case"fontColor":t.textColor=e[o];break;case"fontStyle":r[0]=e[o];break;case"fontVariant":r[1]=e[o];break;case"fontWeight":r[2]=e[o];break;case"fontSize":var i="";e[o]&&e[o].toString().indexOf("px")<0&&(i="px"),r[3]=e[o]+i;break;case"fontFamily":r[4]=e[o];break;case"fontOpacity":t.opacity=e[o];break;case"labelPosition":t.textPosition=e[o];break;case"labelAlign":t.textAlign=e[o];break;case"labelBaseline":t.textBaseline=e[o];break;case"labelRotation":t.textRotation=e[o];break;default:t[o]=e[o]}return t.textFont=r.join(" "),!0===n[0]&&!1===n[1]?t.brushType="fill":!1===n[0]&&!0===n[1]?t.brushType="stroke":!0===n[0]&&!0===n[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,r){var n=r||{},o=new Ox(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&Te.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,e.createShape(o)}},{key:"GraphAxis",value:function(e,t,r,n){var o=t,i=r||{},a=[],s=[],l=!!i.useXReferenceLine&&i.useXReferenceLine,u=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==u){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var h=parseInt(i.axis3DParameter),p=[o[0]-h,o[1]+h];i.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/u,d=o[3];f.push([o[0],d-5]);for(var m=0;m<u;m++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),l){var v=new ux([[o[0],d],[o[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,i.xReferenceLineStyle&&Te.copyAttributesWithClip(v.style,i.xReferenceLineStyle),a.push(e.createShape(v))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var b=parseInt(i.axis3DParameter),g=[o[0]-b,o[1]+b];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var S=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],w=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],_=new mx(S);_.style={fillColor:"#008acd"},Te.copyAttributesWithClip(_.style,i.axisStyle),s.push(e.createShape(_));var O=new mx(w);if(O.style={fillColor:"#008acd"},Te.copyAttributesWithClip(O.style,i.axisStyle),s.push(e.createShape(O)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var x=new mx(c);x.style={fillColor:"#008acd"},Te.copyAttributesWithClip(x.style,i.axisStyle),s.push(e.createShape(x))}}var C=new ux(f);C.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&Te.copyAttributesWithClip(C.style,i.axisStyle),C.clickable=!1,C.hoverable=!1;var T=[e.createShape(C)],P=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var E=i.axisYLabels,k=E.length,M=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(M=i.axisYLabelsOffset),1==k){var j=new Fx(o[0]-5+M[0],o[3]+M[1],E[0]);j.style={labelAlign:"right"},i.axisYLabelsStyle&&Te.copyAttributesWithClip(j.style,i.axisYLabelsStyle),j.clickable=!1,j.hoverable=!1,P.push(e.createShape(j))}else for(var A=o[3],R=Math.abs(o[1]-o[3])/(k-1),L=0;L<k;L++){var I=new Fx(o[0]-5+M[0],A+M[1],E[L]);I.style={labelAlign:"right"},i.axisYLabelsStyle&&Te.copyAttributesWithClip(I.style,i.axisYLabelsStyle),I.clickable=!1,I.hoverable=!1,P.push(e.createShape(I)),A+=R}}var N=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var F=i.axisXLabels,D=F.length,G=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(G=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==D)for(var B=n.xPositions,U=0;U<D;U++){var V=new Fx(B[U]+G[0],o[1]+G[1],F[U]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&Te.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,N.push(e.createShape(V))}else if(1==D){var H=new Fx(o[0]-5+G[0],o[1]+G[0],F[0]);H.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&Te.copyAttributesWithClip(H.style,i.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,N.push(e.createShape(H))}else for(var z=o[0],q=Math.abs(o[2]-o[0])/(D-1),J=0;J<D;J++){var W=new Fx(z+G[0],o[1]+G[1],F[J]);W.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&Te.copyAttributesWithClip(W.style,i.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,N.push(e.createShape(W)),z+=q}}return a.concat(T).concat(P).concat(N).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,r,n,o,i){var a=e||{};if(t&&Te.copyAttributesWithClip(a,t),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&Te.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,l=s.length,u=parseFloat(i),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){Te.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof rx){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=Te.copyAttributesWithClip(n,r.style,["x","y"]);var o=new GC;return o.style=e.transformStyle(n),o.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof ux){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=Te.copyAttributesWithClip(i,r.style,["pointList"]);var a=new pT;return a.style=e.transformStyle(i),a.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof mx){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=Te.copyAttributesWithClip(s,r.style,["pointList"]);var l=new aT;return l.style=e.transformStyle(s),l.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(l,r,["pointList","style","highlightStyle"]),l}if(r instanceof Ox){if(!r.x&&!r.y&!r.width&!r.height)return null;var u=new Object;u.x=r.x,u.y=r.y,u.width=r.width,u.height=r.height,u=Te.copyAttributesWithClip(u,r.style,["x","y","width","height"]);var c=new PT;return c.style=e.transformStyle(u),c.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof Mx){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=Te.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new LT;return h.style=e.transformStyle(f),h.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(h,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(r instanceof Fx){var p=new Object;p.x=r.x,p.y=r.y,p.text=r.text,p=Te.copyAttributesWithClip(p,r.style,["x","y","text"]);var y=new JC;return y.style=e.transformStyle(p),y.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof zx){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=Te.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var m=new ST;return m.style=e.transformStyle(d),m.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(m,r,["x","y","image","width","height","style","highlightStyle"]),m}if(r instanceof Kx){var v=new Object;v.x=r.x,v.r=r.r,v.y=r.y,v=Te.copyAttributesWithClip(v,r.style,["x","y","r"]);var b=new $C;return b.style=e.transformStyle(v),b.highlightStyle=e.transformStyle(r.highlightStyle),Te.copyAttributesWithClip(b,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),b}return null}}])&&IT(t.prototype,r),n&&IT(t,n),e}();function FT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Feature=c.Feature||{},c.Feature.ShapeFactory=NT;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DT=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&r&&r.map&&r.renderer&&(this.id=Te.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),r=this.layer.map.getExtent();return e instanceof nt||e instanceof vt?[e.x/t+-r.left/t,r.top/t-e.y/t]:e instanceof Ee?[e.lon/t+-r.left/t,r.top/t-e.lat/t]:null}}])&&FT(t.prototype,r),n&&FT(t,n),e}();function GT(e){return(GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function UT(e,t){return!t||"object"!==GT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VT(e,t,r){return(VT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function HT(e){return(HT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zT(e,t){return(zT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature=c.Feature||{},c.Feature.Theme=DT;var qT=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=UT(this,HT(t).call(this,e,r,n,o,i,a))).shapeFactory=new NT,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),o&&o.width&&o.height&&o.codomain&&(s.setting=o),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zT(e,t)}(t,DT),r=t,(n=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,VT(HT(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=DT.getDataValues(this.data,this.fields,t);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new Me(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,r=0,n=e.length;r<n;r++){e[r].refOriginalPosition=t;var o=e[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,l=a.length;s<l;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":o[i]-=t[0];break;case"y":o[i]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&BT(r.prototype,n),o&&BT(r,o),t}();function JT(e){return(JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function YT(e,t){return!t||"object"!==JT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XT(e,t,r){return(XT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function QT(e){return(QT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KT(e,t){return(KT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/DT.getDataValues=function(e,t,r){if(!e.attributes)return!1;for(var n=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return n.length===t.length&&n},c.Feature.Theme.Graph=qT;var ZT=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=YT(this,QT(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KT(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){XT(QT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(NT.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(NT.GraphAxis(this.shapeFactory,n,t,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,h=[[l[c]-u/2,n[1]-1],[l[c]+u/2,n[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],p=new mx(h);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}p.style={},Te.copyAttributesWithClip(p.style,e)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(p.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(p.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,r=-1,n=0;n<e;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=t.length&&(r%=t.length);var l=t[r][0],u=t[r][1],c=(new IO).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);o.style.color=c}}}}])&&WT(r.prototype,n),o&&WT(r,o),t}();function $T(e){return($T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tP(e,t){return!t||"object"!==$T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rP(e,t,r){return(rP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nP(e){return(nP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oP(e,t){return(oP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Bar=ZT;var iP=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=tP(this,nP(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oP(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){rP(nP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<t[0]||n[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(NT.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(NT.GraphAxis(this.shapeFactory,r,e,a)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-t[0])/this.DVBUnitValue,h=s[c]-l/2,p=s[c]+l/2,y=[[h,f],[p,f],[p-u,f+u],[h-u,f+u]],d=[[p,f],[p-u,f+u],[p-u,r[1]+u],[p,r[1]]],m=[[h-u,r[1]+u],[p-u,r[1]+u],[p-u,f+u],[h-u,f+u]];u<=0&&(m=[[h,r[1]],[p,r[1]],[p,f],[h,f]]);var v=new mx(y),b=new mx(d),g=new mx(m);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,g.style=NT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,n[c]),b.style=NT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,n[c]),v.style=NT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,n[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,g.highlightStyle=NT.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),b.highlightStyle=NT.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),v.highlightStyle=NT.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),v.refDataID=b.refDataID=g.refDataID=this.data.id,v.isHoverByRefDataID=b.isHoverByRefDataID=g.isHoverByRefDataID=!0,v.refDataHoverGroup=b.refDataHoverGroup=g.refDataHoverGroup=Te.createUniqueID("lr_shg"),v.dataInfo=b.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==e.barHoverAble&&(v.hoverable=b.hoverable=g.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(v.clickable=b.clickable=g.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}}])&&eP(r.prototype,n),o&&eP(r,o),t}();function aP(e){return(aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lP(e,t){return!t||"object"!==aP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uP(e,t,r){return(uP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function cP(e){return(cP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fP(e,t){return(fP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Bar3D=iP;var hP=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=lP(this,cP(t).call(this,e,r,n,o,i,a))).setting=null,o&&o.codomain&&(s.setting=o,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fP(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){this.setting=null,uP(cP(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-t/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+t,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&sP(r.prototype,n),o&&sP(r,o),t}();function pP(e){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dP(e,t){return!t||"object"!==pP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mP(e,t,r){return(mP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vP(e){return(vP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bP(e,t){return(bP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.RankSymbol=hP;var gP=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=dP(this,vP(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bP(e,t)}(t,hP),r=t,(n=[{key:"destroy",value:function(){mP(vP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=DT.getDataValues(this.data,this.fields,t);this.dataValues=r||[];var n=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var i=this.DVBUnitValue,a=n[0]*i+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,l=new Kx(s[0],s[1],a);l.style=NT.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=NT.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&yP(r.prototype,n),o&&yP(r,o),t}();function SP(e){return(SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _P(e,t){return!t||"object"!==SP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OP(e,t,r){return(OP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function xP(e){return(xP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CP(e,t){return(CP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Circle=gP;var TP=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=_P(this,xP(t).call(this,e,r,n,o,i,a))).CLASS_NAME="SuperMap.Feature.Theme.Line",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CP(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){OP(xP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(NT.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(NT.GraphAxis(this.shapeFactory,t,e,i));for(var u=[],c=[],f=0,h=o.length;f<h;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=l[f],s=t[1]-(o[f]-r[0])/n;var p=new rx(a,s);p.style=NT.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]),p.highlightStyle=NT.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(p));var y=[a,s];u.push(y)}var d=new ux(u);d.style=NT.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var m=this.shapeFactory.createShape(d);this.shapes.push(m),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&wP(r.prototype,n),o&&wP(r,o),t}();function PP(e){return(PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kP(e,t){return!t||"object"!==PP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MP(e,t,r){return(MP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jP(e){return(jP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AP(e,t){return(AP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Line=TP;var RP=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=kP(this,jP(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AP(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){MP(jP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(NT.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<r.length;p++){var y=Math.abs(r[p]);(c=0===p?u+y*s:p===y.length-1?f:u+y*s)-u>=360&&(c=359.9999999);var d=new Mx(l[0],l[1],h,u,c);if(void 0===e.sectorStyleByFields){var m=p%t.length;d.style=NT.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else d.style=NT.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,r[p]);d.highlightStyle=NT.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:r[p]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&EP(r.prototype,n),o&&EP(r,o),t}();function LP(e){return(LP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NP(e,t){return!t||"object"!==LP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FP(e,t,r){return(FP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function DP(e){return(DP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GP(e,t){return(GP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Pie=RP;var BP=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=NP(this,DP(t).call(this,e,r,n,o,i,a))).CLASS_NAME="SuperMap.Feature.Theme.Point",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GP(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){FP(DP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(NT.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(NT.GraphAxis(this.shapeFactory,t,e,i));for(var u=0,c=o.length;u<c;u++){if(o[u]<r[0]||o[u]>r[1])return null;a=l[u],s=t[1]-(o[u]-r[0])/n;var f=new rx(a,s);f.style=NT.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,o[u]),f.highlightStyle=NT.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:o[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&IP(r.prototype,n),o&&IP(r,o),t}();function UP(e){return(UP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HP(e,t){return!t||"object"!==UP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zP(e,t,r){return(zP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qP(e){return(qP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JP(e,t){return(JP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Point=BP;var WP=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=HP(this,qP(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JP(e,t)}(t,qT),r=t,(n=[{key:"destroy",value:function(){zP(qP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(NT.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=t.innerRingRadius>=0&&t.innerRingRadius<h,y=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&p?t.innerRingRadius:0,d=0;d<r.length;d++){var m=Math.abs(r[d]);c=0===d?u+m*s:d===m.length-1?f:u+m*s;var v=new Mx(l[0],l[1],h,u,c,y);if(void 0===t.sectorStyleByFields){var b=d%e.length;v.style=NT.ShapeStyleTool(null,t.sectorStyle,e,null,b)}else v.style=NT.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,r[d]);v.highlightStyle=NT.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(v)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&VP(r.prototype,n),o&&VP(r,o),t}();function YP(e){return(YP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QP(e,t){return!t||"object"!==YP(t)&&"function"!=typeof t?KP(e):t}function KP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZP(e,t,r){return(ZP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$P(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $P(e){return($P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eE(e,t){return(eE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.Ring=WP;var tE=function(e){function t(e,r,n,o,i){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=QP(this,$P(t).call(this,e,r)),!e.geometry)return QP(a);if(!(e.geometry instanceof Ae))return QP(a);a.dataBounds=e.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=n||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=n||{},o&&Te.copyAttributesWithClip(KP(a),o,["shapeOptions","dataBounds"]),i&&Te.copyAttributesWithClip(a.shapeOptions,i);var s=e.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof xt?a.lineToTF(s):s instanceof ct?a.lineToTF(s):s instanceof Qe||(s instanceof qe?a.multiPointToTF(s):s instanceof kt?a.multiLineStringToTF(s):s instanceof Lt?a.multiPolygonToTF(s):s instanceof Bt?a.polygonToTF(s):s instanceof Ge||(s instanceof nt?a.pointToTF(s):s instanceof Jt?a.rectangleToTF(s):s instanceof vt&&a.geoTextToTF(s))),a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eE(e,t)}(t,DT),r=t,(n=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,ZP($P(t.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=Te.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new pT({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Te.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=Te.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new GC({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Te.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=Te.copyAttributesWithClip(n,this.style)).x=r[0]-t[0],n.y=r[1]-t[1];var o=new GC({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Te.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var h=i[i.length-1];if(Math.abs(h[0]-n[0])<=l&&Math.abs(h[1]-n[1])<=l)continue}i.push(n)}}else{a=[];for(var p=0;p<c.length;p++){if(n=[],r=this.getLocalXY(c[p]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=l&&Math.abs(y[1]-n[1])<=l)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=Te.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var m=new aT({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(m.highlightStyle=this.highlightStyle),m.refOriginalPosition=this.location,m.refDataID=this.data.id,m.isHoverByRefDataID=this.isMultiHover,s.length>0&&(m.holePolygonPointLists=s),this.shapeOptions&&Te.copyAttributesWithClip(m,this.shapeOptions),this.shapes.push(m)}}},{key:"rectangleToTF",value:function(e){var t=this.location,r=new Ee(e.x,e.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=Te.copyAttributesWithClip(i,this.style)).x=o[0]-t[0],i.y=o[1]-t[1]-2*e.width/n,i.width=e.width/n,i.height=e.height/n;var a=new PT({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Te.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=Te.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-t[0],n.y=r[1]-t[1],n.text=e.text;var o=new JC({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&Te.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&XP(r.prototype,n),o&&XP(r,o),t}();
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function rE(e){return(rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iE(e,t,r){return(iE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function aE(e){return(aE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sE(e,t){return(sE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Feature.Theme.ThemeVector=tE;var lE=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=aE(t).call(this,e))||"object"!==rE(o)&&"function"!=typeof o?oE(n):o,e=e||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,Te.extend(oE(r),e),r.id=r.id||Te.createUniqueID("smShapeGroup_"),r.CLASS_NAME="SuperMap.LevelRenderer.Group",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sE(e,t)}(t,c.mixin($x,CC)),r=t,(n=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,iE(aE(t.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof t&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var r=Te.indexOf(this._children,e);this._children.splice(r,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof t&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.addToMap(r),"group"===r.type&&r.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&nE(r.prototype,n),o&&nE(r,o),t}();function uE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,r,n;return t=e,n=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),e(o))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,l=(i=i instanceof Array?i:[i]).length;s<l;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(e.shapeCompareFunc),t)for(var u=0,c=r.length;u<c;u++)r[u].updateTransform();return r}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,r=0;r<t;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var r=0;r<e._children.length;r++){var n=e._children[r];n.__dirty=e.__dirty||n.__dirty,this._updateAndAddShape(n,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var r=this._elements[e];if(r&&(r.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n={};for(var o in t)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&t.hasOwnProperty(o)&&(n[o]=t[o]);(new RO).merge(r,n,!0)}else(new RO).merge(r,t,!0);return this}},{key:"drift",value:function(e,t,r){var n=this._elements[e];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(t=0),(!n.ondrift||n.ondrift&&!n.ondrift(t,r))&&n.drift(t,r)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof lE&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var r=this._roots[t];r instanceof lE&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var n=e.length,o=0;o<n;o++)this.delRoot(e[o]);else{var i;i="string"==typeof e?this._elements[e]:e;var a=(new RO).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof lE&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof lE&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof lE&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&uE(t.prototype,r),n&&uE(t,n),e}();function fE(e){return(fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hE(e,t){return!t||"object"!==fE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pE(e){return(pE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yE(e,t){return(yE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vE(e,t,r){return t&&mE(e.prototype,t),r&&mE(e,r),e}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bE=function(){function e(t,r){dE(this,e),this.root=t,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(Te.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new gE(Te.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return vE(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var r=this.storage.getShapeList(!0);return this._paintList(r,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var r,n,o;for(var i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(n!==u.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(u.zlevel)).ctx,n=u.zlevel,r.unusedCount=0,(r.dirty||t)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&u.__startClip){var c=u.__startClip;if(o.save(),c.needTransform){var f=c.transform;OC.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var h=a;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((r&&r.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(o,!1)))if(dC.catchBrushException)try{u.brush(o,!1,this.updatePainter)}catch(e){OC.Util_log(e,"brush error of "+u.type,u)}else u.brush(o,!1,this.updatePainter);o&&u.__stopClip&&o.restore(),u.__dirty=!1}for(var p in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==p){var y=this._layers[p];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&e>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<e&&this._zlevelList[o+1]>e);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e),t=new gE(Te.createUniqueID("_levelLayer_"+e),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(t.dom,i.nextSibling):i.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new RO).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,r={};for(var n in t)"hover"!==n&&(r[n]=t[n].elCount,t[n].elCount=0);for(var o=0;o<e.length;o++){var i=e[o],a=t[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in t)"hover"!==s&&r[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new RO).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(new RO).merge(r,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new RO).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,r=e.length;t<r;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),r=this._getHeight();if(e.style.display="",this._width!=t||r!=this._height){for(var n in this._width=t,this._height=r,e.style.width=t+"px",e.style.height=r+"px",this._layers)this._layers[n].resize(t,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,r,n){var o=e.createDom(Te.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=e.devicePixelRatio&&i.scale(e.devicePixelRatio,e.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(dC.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){OC.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(t,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var r=this.getLayer(e.zlevel);if(r.needTransform&&(t.save(),r.setTransform(t)),dC.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){OC.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);r.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var u=new ST({id:e,style:{x:0,y:0,image:i}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(r,n,o,i){return t._shapeToImage(r,n,o,i,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*e.devicePixelRatio),o.setAttribute("height",a*e.devicePixelRatio),o.setAttribute("id",t),o}}]),e}(),gE=function(e){function t(e,r){var n;return dE(this,t),(n=hE(this,pE(t).call(this,e,r))).dom=null,n.domBack=null,n.ctxBack=null,n.painter=r,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=bE.createDom(Te.createUniqueID("SuperMap.Theme"+e),"canvas",r),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yE(e,t)}(t,CC),vE(t,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,CC.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=bE.devicePixelRatio&&this.ctx.scale(bE.devicePixelRatio,bE.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=bE.createDom(Te.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=bE.devicePixelRatio&&this.ctxBack.scale(bE.devicePixelRatio,bE.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*bE.devicePixelRatio),this.dom.setAttribute("height",t*bE.devicePixelRatio),1!=bE.devicePixelRatio&&this.ctx.scale(bE.devicePixelRatio,bE.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*bE.devicePixelRatio),this.domBack.setAttribute("height",t*bE.devicePixelRatio),1!=bE.devicePixelRatio&&this.ctxBack.scale(bE.devicePixelRatio,bE.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,r=e.width,n=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/bE.devicePixelRatio,n/bE.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,r/bE.devicePixelRatio,n/bE.devicePixelRatio),t.restore()):t.clearRect(0,0,r/bE.devicePixelRatio,n/bE.devicePixelRatio),i){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,r/bE.devicePixelRatio,n/bE.devicePixelRatio),t.restore()}}}]),t}();function SE(e){return(SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _E(e){return(_E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xE(e,t){return(xE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var CE=function(e){function t(e,r,n){var o,i,a,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(o=!(a=_E(t).call(this,e,r,n))||"object"!==SE(a)&&"function"!=typeof a?OE(i):a).root=e,o.storage=r,o.painter=n,o._lastX=0,o._lastY=0,o._mouseX=0,o._mouseY=0,o._findHover=null,o._domHover=null,o._findHover=(s=function(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==e.id||e.isSilent())return!1;var o=n._event;if(e.isCover(t,r)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=n.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=e&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=e,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},l=OE(o),function(e,t,r){return s.call(l,e,t,r)}),o._domHover=n.getDomHover(),o.CLASS_NAME="SuperMap.LevelRenderer.Handler";var u={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(dC.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,dC.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,dC.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=t,t=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),i.scale[0]*=t,i.scale[1]*=t,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,dC.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=OC.Util_event.getX(e),this._mouseY=OC.Util_event.getY(e);var t=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=t,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,dC.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(dC.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,dC.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,dC.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&OC.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<dC.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<dC.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&OC.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function c(e,t){return function(r){return e.call(t,r)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=t.length;for(;r--;){var n=t[r];e["_"+n+"Handler"]=c(u[n],e)}}(OE(o)),window.addEventListener?(window.addEventListener("resize",o._resizeHandler),OC.Util_env.os.tablet||OC.Util_env.os.phone?(e.addEventListener("touchstart",o._touchstartHandler),e.addEventListener("touchmove",o._touchmoveHandler),e.addEventListener("touchend",o._touchendHandler)):(e.addEventListener("click",o._clickHandler),e.addEventListener("dblclick",o._dblclickHandler),e.addEventListener("mousewheel",o._mousewheelHandler),e.addEventListener("mousemove",o._mousemoveHandler),e.addEventListener("mousedown",o._mousedownHandler),e.addEventListener("mouseup",o._mouseupHandler)),e.addEventListener("DOMMouseScroll",o._mousewheelHandler),e.addEventListener("mouseout",o._mouseoutHandler)):(window.attachEvent("onresize",o._resizeHandler),e.attachEvent("onclick",o._clickHandler),e.ondblclick=o._dblclickHandler,e.attachEvent("onmousewheel",o._mousewheelHandler),e.attachEvent("onmousemove",o._mousemoveHandler),e.attachEvent("onmouseout",o._mouseoutHandler),e.attachEvent("onmousedown",o._mousedownHandler),e.attachEvent("onmouseup",o._mouseupHandler)),o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xE(e,t)}(t,$x),r=t,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,$x.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var r=dC.EVENT;switch(e){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),OC.Util_env.os.tablet||OC.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var r=t;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,dC.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,dC.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,dC.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,dC.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,dC.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,dC.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,dC.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,dC.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,r,n){var o="on"+t,i={type:t,event:r,target:e,cancelBubble:!1},a=e;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):n||this.dispatch(t,{type:t,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=OC.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),n[0]=this._mouseX,n[1]=this._mouseY,e.needTransform&&(OC.Util_matrix.invert(t,e.transform),OC.Util_vector.applyTransform(n,n,t))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<t.length;r++){var n=t[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var r="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();e.zrenderX=r.clientX-n.left,e.zrenderY=r.clientY-n.top}}else{var o=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;o&&o!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+o.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+o.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&wE(r.prototype,n),o&&wE(r,o),t}();function TE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&TE(t.prototype,r),n&&TE(t,n),e}();function EE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new PE,r=(e-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?t[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+e]&&this["on"+e](this._targetPool[r],t)}}])&&EE(t.prototype,r),n&&EE(t,n),e}();function ME(e){return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RE(e,t,r){return t&&AE(e.prototype,t),r&&AE(e,r),e}function LE(e){return(LE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NE(e,t){return(NE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var FE=function(e){function t(e){var r,n,o;return jE(this,t),n=this,r=!(o=LE(t).call(this,e))||"object"!==ME(o)&&"function"!=typeof o?IE(n):o,e=e||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,Te.extend(IE(r),e),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NE(e,t)}(t,$x),RE(t,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new RO).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],l=s.step(e);l&&(o.push(l),i.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<n;)r[u]._needsRemove?(r[u]=r[n-1],r.pop(),n--):u++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function r(){t._running&&(t._update(),e(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var r=new DE(e,(t=t||{}).loop,t.getter,t.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(e,t,r){return(t-e)*r+e}},{key:"_interpolateArray",value:function(e,r,n,o,i){var a=e.length;if(1==i)for(var s=0;s<a;s++)o[s]=t._interpolateNumber(e[s],r[s],n);else for(var l=e[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)o[u][c]=t._interpolateNumber(e[u][c],r[u][c],n)}},{key:"_isArrayLike",value:function(e){switch(ME(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,r,n,o,i,a,s,l,u){var c=e.length;if(1==u)for(var f=0;f<c;f++)l[f]=t._catmullRomInterpolate(e[f],r[f],n[f],o[f],i,a,s);else for(var h=e[0].length,p=0;p<c;p++)for(var y=0;y<h;y++)l[p][y]=t._catmullRomInterpolate(e[p][y],r[p][y],n[p][y],o[p][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,r,n,o,i,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*i+s*o+t}},{key:"_cloneValue",value:function(e){var r=Array.prototype.slice;if(t._isArrayLike(e)){var n=e.length;if(t._isArrayLike(e[0])){for(var o=[],i=0;i<n;i++)o.push(r.call(e[i]));return o}return r.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),t}(),DE=function(){function e(t,r,n,o){jE(this,e),this._tracks={},this._target=t,this._loop=r||!1,this._getter=n||function(e,t){return e[t]},this._setter=o||function(e,t,r){e[t]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return RE(e,[{key:"when",value:function(e,t){for(var r in t)this._tracks[r]||(this._tracks[r]=[],0!==e&&this._tracks[r].push({time:0,value:FE._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(e,10),value:t[r]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,r=this._setter,n=this._getter,o=t._onframeList.length,i="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,r=0;r<e;r++)t._doneList[r].call(t)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=FE._isArrayLike(c),h=!1,p=f&&FE._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var y=s[u-1].time,d=[],m=[],v=0;v<u;v++){d.push(s[v].time/y);var b=s[v].value;"string"==typeof b&&(0===(b=OC.Util_color.toArray(b)).length&&(b[0]=b[1]=b[2]=0,b[3]=1),h=!0),m.push(b)}var g,S,w,_,O,x,C,T=0,P=0;if(h)var E=[0,0,0,0];var k=new kE({target:t._target,life:y,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<P){for(g=Math.min(T+1,u-1),S=g;S>=0&&!(d[S]<=a);S--);S=Math.min(S,u-2)}else{for(S=T;S<u&&!(d[S]>a);S++);S=Math.min(S-1,u-2)}T=S,P=a;var s=d[S+1]-d[S];if(0!==s){var c,y;for(w=(a-d[S])/s,i?(O=m[S],_=m[0===S?S:S-1],x=m[S>u-2?u-1:S+1],C=m[S>u-3?u-1:S+2],f?FE._catmullRomInterpolateArray(_,O,x,C,w,w*w,w*w*w,n(e,l),p):(c=h?FE.rgba2String(E):FE._catmullRomInterpolate(_,O,x,C,w,w*w,w*w*w),r(e,l,c))):f?FE._interpolateArray(m[S],m[S+1],w,n(e,l),p):(h?(FE._interpolateArray(m[S],m[S+1],w,E,1),y=FE.rgba2String(E)):y=FE._interpolateNumber(m[S],m[S+1],w),r(e,l,y)),S=0;S<o;S++)t._onframeList[S](e,a)}},ondestroy:a});e&&"spline"!==e&&(k.easing=e),t._clipList.push(k),t._clipCount++,t.animation.add(k)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function GE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BE=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new cE,this.painter=new bE(r,this.storage),this.handler=new CE(r,this.storage,this.painter),this.animatingElements=[],this.animation=new FE({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,r,n;return t=e,n=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)e.storage.mod(t[r].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,r){if("string"==typeof e&&(e=this.storage.get(e)),e){var n;if(t){for(var o=t.split("."),i=e,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=e;if(!n)return void OC.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new RO).indexOf(l,e);l.splice(t,1)}})}OC.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,r){return this.painter.toDataURL(e,t,r)}},{key:"shapeToImage",value:function(e,t,r){var n=Te.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,e,t,r)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&GE(t.prototype,r),n&&GE(t,n),e}();function UE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var r=new BE(Te.createUniqueID("LRenderer_"),t);return e._instances[r.id]=r,r}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var r in e._instances)e._instances[r].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&UE(t.prototype,r),n&&UE(t,n),e}();c.LevelRenderer=VE;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HE={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},zE={fileMaxSize:10485760};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function qE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JE=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.FileTypes=HE,this.FileConfig=zE,this.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[]}var t,r,n;return t=e,(r=[{key:"set",value:function(e,t){this[e]=t}},{key:"get",value:function(e){return this[e]}}])&&qE(t.prototype,r),n&&qE(t,n),e}();function WE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var YE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,r,n;return t=e,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",e.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),e.appendChild(n),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&WE(t.prototype,r),n&&WE(t,n),e}();c.Components.MessageBox=YE;var XE=r(40),QE=r.n(XE),KE={code:null,defaultCode:"en-US",getCode:function(){return c.Lang.code||c.Lang.setCode(),c.Lang.code},setCode:function(){var e=this.getLanguageFromCookie();e?c.Lang.code=e:(e=c.Lang.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),c.Lang.code=e)},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var r=e[t];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(e){var t=c.Lang[c.Lang.getCode()],r=t&&t[e];return r||(r=e),r}};c.Lang=KE,c.i18n=c.Lang.i18n;var ZE=r(31),$E=r.n(ZE),ek={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,r,n,o){HE.JSON===e||HE.GEOJSON===e?this.readTextFile(t,r,n,o):HE.EXCEL!==e&&HE.CSV!==e||this.readXLSXFile(t,r,n,o)},readTextFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){t&&t.call(n,e.target.result)},o.onerror=function(e){r&&r.call(n,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){var o=new Uint8Array(e.target.result),i=$E.a.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=$E.a.utils.sheet_to_csv(i.Sheets[a]);t&&t.call(n,s)}}catch(e){r&&r.call(n,e)}},o.onerror=function(e){r&&r.call(n,e)},this.rABF&&o.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,r,n,o){var i=null;if("EXCEL"===e||"CSV"===e)i=this.processExcelDataToGeoJson(t),r&&r.call(o,i);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,KE.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,KE.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),r=t.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],l=0,u=t.rows.length;l<u;l++){var c=t.rows[l],f=Number(c[n]),h=Number(c[o]),p={};for(var y in t.colTitles){p[t.colTitles[y]]=t.rows[l][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(d)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"xåæ "===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t||"yåæ "===t},string2Csv:function(e,t){var r=e.split("\n"),n={};n.colTitles=t?[]:r[0].split(","),n.rows=[];for(var o=t?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function tk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Components.FileReaderUtil=ek;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Zt(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,r=this;cn.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var n=t.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:t.name},e({result:r.datasetsInfo})}}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new c.FilterParameter(i),n=new c.GetFeaturesBySQLParameters({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new c.GetFeaturesBySQLService(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getLayerFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new c.FilterParameter(i),n=new c.QueryBySQLParameters({queryParams:[r],expectCount:1e5}),new c.QueryBySQLService(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(n)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var r=this;cn.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(e,t);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,t)):r.getDatafromContent(e,t):r._fireFailedEvent(n)}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var r=this,n={result:{}},o=this;e+="/content.json?pageSize=9999999&currentPage=1",cn.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(KE.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(e.content);n.result.features={type:e.content.type,features:i}}else if("EXCEL"===e.type||"CSV"===e.type){var a=r._excelData2Feature(e.content);n.result.features={type:"FeatureCollection",features:a}}t(n,"content")}}else o._fireFailedEvent(e)},this).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===e){var i,a,s="".concat(t,"/data/datasources");cn.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){i=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(i,"/datasets"),cn.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],n.getDatafromRestData("".concat(t,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}else{var l,u,c,f="".concat(t,"/maps");cn.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){l=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(l,"/layers"),cn.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return u=e[0].subLayers.layers[0].caption,n.getDatafromRestMap(u,c,r),u}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){r(e,"RESTDATA")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){r(e,"RESTMAP")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,r,n,o){var i,a,s={name:t.join().replace(":","@")};Object.assign(s,r),i=new Uo(s),a=new Bh({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Wh(e,{eventListeners:{processCompleted:function(e){n&&n(e)},processFailed:function(e){o&&o(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,l,u){var c,f,h={name:t};Object.assign(h,r),c=new Uo(h),n&&(c.fields=n);var p={queryParams:[c]};u&&(p.queryOption=y.ATTRIBUTE),s&&(p.startRecord=s),l&&(p.expectCount=l),o&&(p.prjCoordSys={epsgCode:o}),f=new Nb(p),this._queryBySQL(e,f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,r,n){new Hb(e,{eventListeners:{scope:this,processCompleted:r,processFailed:r},format:this._processFormat(n)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)ek.isXField(t[o])&&(r=o),ek.isYField(t[o])&&(n=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[r]),f=Number(u[n]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:KE.i18n("msg_getdatafailed")}:{message:KE.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&tk(t.prototype,r),n&&tk(t,n),e}();function nk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ok=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Zt(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new rk(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,r=t.indexOf("rest");if(r>0){var n=t.indexOf("/",r+5),o=t.substring(r+5,n),i=t.substring(0,r+4)+"/data";if("maps"===o){var a=t.indexOf("/",n+1),s=t.substring(n+1,a);i=t.substring(0,r+4)+"/maps/"+s,e.result.dataUrl=i,this._getLayerFeatures(e)}else"data"===o&&(e.result.dataUrl=i,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,r={};if(t.length){var n=t[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:t,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var l=[];for(var u in t){var c=t[u],f=r.fieldCaptions[s],h=c.properties[f];l.push(h)}r.fieldValues.push(l)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],r=t.features.features;this.features=t.features;var n={};if(r.length){for(var o in(n={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],l=n.fieldCaptions[o],u=s.properties[l];i.push(u)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,e),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return t&&(t.grid&&(r=t.grid),t.tooltip&&(l=t.tooltip),t.backgroundColor&&(u=t.backgroundColor)),{backgroundColor:u,grid:r,series:n,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(e){var t=0,r=[],n=e.fieldCaptions,o=this;n.forEach(function(e,r){o.xField[0]&&e===o.xField[0].field&&(t=r)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+e.name,n.forEach(function(t,n){t===e.field&&r.push(n)})});var i=this._getAttrData(e,t),a=[];if(r.length>0)r.forEach(function(t){var r=[];for(var n in e.fieldValues[t])r.push({value:e.fieldValues[t][n]});a.push(r)});else{for(var s=[],l=[],u=i.length,c=0;c<u;c++){for(var f=!1,h=0,p=l.length;h<p;h++)if(i[c].fieldsData===l[h].fieldsData){s[h].value++,l[h].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(l.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=l,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var r=[],n=0,o=e.fieldValues[t].length;n<o;n++){var i=e.fieldValues[t][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(e,t){var r=[];return e.YData.forEach(function(e){var n=0,o=[],i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){n=l.value.value,o.push({value:n})}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var c={type:t,data:o,name:"y"};r.push(c)}),r}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&nk(t.prototype,r),n&&nk(t,n),e}();function ik(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Components.ChartViewModel=ok;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ak=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new ok(r),this._fillDataToView()}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new YE;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var r=this;this.viewModel.updateData(e,t,function(e){r._updateChart(e),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(e){this.echart=QE.a.init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&ik(t.prototype,r),n&&ik(t,n),e}();function sk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}c.Components.Chart=ak;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,r,n;return t=e,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&sk(t.prototype,r),n&&sk(t,n),e}();function uk(e){return(uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ck(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fk(e,t){return!t||"object"!==uk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hk(e){return(hk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pk(e,t){return(pk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.TemplateBase=lk;var yk=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=fk(this,hk(t).call(this,e));var n=e.title?e.title:"";return r._initView(n),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pk(e,t)}(t,lk),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=e,r.appendChild(n),t.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),t.appendChild(o),this.content=o,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&ck(r.prototype,n),o&&ck(r,o),t}();function dk(e){return(dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vk(e,t){return!t||"object"!==dk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bk(e){return(bk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gk(e,t){return(gk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.CommonContainer=yk;var Sk=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vk(this,bk(t).call(this,e)))._initView(e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gk(e,t)}(t,lk),r=t,(n=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var r=this._createElement("div","component-selecttool--chart",t);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=e.optionsArr[0],n.innerHTML=e.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,n,e.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var r in t){var n=this._createElement("div","component-selecttool__option",e);n.title=t[r],n.innerHTML=t[r]}}},{key:"_selectClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(e,t,r){for(var n=function(n){var o=e.children[n];o.onclick=function(){t.innerHTML=o.innerHTML,t.title=o.title,o.getAttribute("data-value")&&t.setAttribute("data-value",o.getAttribute("data-value")),r&&r(o)}},o=0;o<e.children.length;o++)n(o)}}])&&mk(r.prototype,n),o&&mk(r,o),t}();function wk(e){return(wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ok(e,t){return!t||"object"!==wk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xk(e){return(xk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ck(e,t){return(Ck=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.Select=Sk;var Tk=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ok(this,xk(t).call(this,e)))._initView(e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ck(e,t)}(t,lk),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",t.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(e[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,r=e.dropDownTopContainer,n=document.createElement("div");n.className=e.dropDownContent[0],t.appendChild(n);var o=document.createElement("div");o.className=e.scrollareaContent,n.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=e.triangleBtn;this._dropDownClickEvent(t,n,s),this._eleOnblur(t,n,s);for(var l=o.children,u=function(e){l[e].onclick=function(){r.innerHTML=l[e].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(e,t){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=e;n.dataValue&&r.setAttribute("data-value",n.dataValue),t.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,r){e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}}])&&_k(r.prototype,n),o&&_k(r,o),t}();function Pk(e){return(Pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ek(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kk(e,t){return!t||"object"!==Pk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mk(e){return(Mk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jk(e,t){return(jk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.DropDownBox=Tk;var Ak=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},r=kk(this,Mk(t).call(this,e)),e.title=e.title?e.title:"",r._initView(e.title),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jk(e,t)}(t,lk),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),t.appendChild(o),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,t.appendChild(i),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&Ek(r.prototype,n),o&&Ek(r,o),t}();function Rk(e){return(Rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ik(e,t){return!t||"object"!==Rk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nk(e){return(Nk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fk(e,t){return(Fk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.PopContainer=Ak;var Dk=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title=e.title?e.title:"å±æ§",(r=Ik(this,Nk(t).call(this,e))).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],r._createAttributesTable(e.attributes),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fk(e,t)}(t,Ak),r=t,(n=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in e){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var l=document.createElement("td");l.innerHTML=e[o],i.appendChild(a),i.appendChild(l),r.appendChild(i),n=!n}t.appendChild(r),this.appendContent(t)}}])&&Lk(r.prototype,n),o&&Lk(r,o),t}();function Gk(e){return(Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uk(e,t){return!t||"object"!==Gk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vk(e){return(Vk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hk(e,t){return(Hk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.AttributesPopContainer=Dk;var zk=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Uk(this,Vk(t).call(this,e)))._initView(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hk(e,t)}(t,lk),r=t,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,e.appendChild(t),e.appendChild(r),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===t&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&Bk(r.prototype,n),o&&Bk(r,o),t}();function qk(e){return(qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wk(e,t){return!t||"object"!==qk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yk(e){return(Yk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xk(e,t){return(Xk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.IndexTabsPageContainer=zk;var Qk=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Wk(this,Yk(t).call(this,e))).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),r.config=e.config,Te.isArray(r.config)?(r.header.hidden=!0,r._createCityItem("åå¸",r.config),r.content.style.border="none"):(r._createTabs(),r.header.onclick=function(e){for(var t=0;t<r.header.children.length;t++)r.header.children[t].setAttribute("class","");e.target.setAttribute("class","on"),r._createCityContent(e.target.innerHTML)}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xk(e,t)}(t,zk),r=t,(n=[{key:"_createTabs",value:function(){if(Te.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var r in this.config[e])t+=r;var n=document.createElement("li");n.innerHTML=t,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var r=this.config[e];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(e,t){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&Jk(r.prototype,n),o&&Jk(r,o),t}();function Kk(e){return(Kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $k(e,t){return!t||"object"!==Kk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eM(e){return(eM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tM(e,t){return(tM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.CityTabsPage=Qk;var rM=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=$k(this,eM(t).call(this,e))).navTabsTitle=null,r.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],r._initView(e.tabs),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tM(e,t)}(t,lk),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),t.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),t.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),t.appendChild(o),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===t&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&Zk(r.prototype,n),o&&Zk(r,o),t}();function nM(e){return(nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iM(e,t){return!t||"object"!==nM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aM(e){return(aM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sM(e,t){return(sM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Components.NavTabsPage=rM;var lM=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=iM(this,aM(t).call(this,e))).currentPage=0,r.pageNumberLis=[],r.currentPageNumberLis=[],r.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,r._initView(e.contents,e.pageCounts),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sM(e,t)}(t,lk),r=t,(n=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=r}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var r=document.createElement("li");r.innerHTML=t+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===t?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===t?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===t?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===t&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),e.appendChild(r)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var r;if(t.id)r=t.id;else{if(!Number(t.innerHTML))return;r=Number(t.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);t.length>0&&(this.currentPageNumberLis=t)}}])&&oM(r.prototype,n),o&&oM(r,o),t}();c.Components.PaginationContainer=lM;
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uM={getFileType:function(e){return/^.*\.(?:xls|xlsx)$/i.test(e)?HE.EXCEL:/^.*\.(?:csv)$/i.test(e)?HE.CSV:/^.*\.(?:geojson|json)$/i.test(e)?HE.GEOJSON:null}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Lang["en-US"]={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function cM(e){return(cM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hM(e,t){return!t||"object"!==cM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pM(e){return(pM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yM(e,t){return(yM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/c.Lang["zh-CN"]={title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"};var dM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hM(this,pM(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yM(e,t)}(t,u),r=t,(n=[{key:"getMapInfo",value:function(e){var t=this;new Xm(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e},projection:t.options.projection}).processAsync()}},{key:"getTilesets",value:function(e){var t=this;new Uw(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}])&&fM(r.prototype,n),o&&fM(r,o),t}(),mM=r(25),vM=r.n(mM);function bM(e){return(bM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SM(e){return(SM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _M(e,t){return(_M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var OM=function(e){function t(e){var r,n,o;function i(e,t,r){var n=document.createElement(e);return n.className=t||"",r&&r.appendChild(n),n}function a(e,t,r,n){var o=function(t){if(r)return r.call(n||e,t||window.event)},i=o;return"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,function(e,t){var r=t.relatedTarget;if(!r)return!0;try{for(;r&&r!==e;)r=r.parentNode}catch(e){return!1}return r!==e}(e,t)&&i(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):e.addEventListener(t,o,!1):"attachEvent"in e&&e.attachEvent("on"+t,o),this}function s(){this._container.classList.add("ol-control-ctv-expanded")}function l(){this._container.classList.remove("ol-control-ctv-expanded")}function u(){var e=this.getVersion();this.tilesVersion(e)}return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).title||(e.title="switch tile version"),e.tooltip||(e.tooltip="top"),e.collapsed||(e.collapsed=!0),e.lastText||(e.lastText="-"),e.nextText||(e.nextText="+"),e.ico||(e.ico="V"),"vertical"!==e.orientation&&(e.orientation="horizontal"),e.switch||(e.switch=!0),n=this,(r=!(o=SM(t).call(this,e))||"object"!==bM(o)&&"function"!=typeof o?wM(n):o).options=e,r.element=e.element=function(){var t="ol-control-ctv";this._container=i("div",t+" "+t+"-"+e.orientation+" ol-unselectable ol-control"),this._sliderBtn=i("button",t+"-toggle",this._container),this._sliderBtn.setAttribute("title",e.title),this._sliderBtn.innerHTML=e.ico,this._sliderValue=i("p",t+"-value",this._container),this._sliderValue.innerHTML=e.ico,this._sliderValue.setAttribute("title",e.title);this._sliderContent=i("div","ol-ctv-slider-main  tooltip",this._container),"vertical"===e.orientation&&"top"===e.tooltip&&(e.tooltip="right");this.tooltip=i("span","tooltip-text  tooltip-"+e.tooltip,this._sliderContent),this.tooltip.innerHTML=e.ico,e.switch&&(this._next=i("a","ol-ctv-slider-incdec ol-ctv-slider-next",this._sliderContent),this._next.innerHTML=e.nextText,a(this._next,"click",this.nextTilesVersion,this),this._container.classList.add(t+"-incdec"));this._sliderContainer=i("div","ol-ctv-slider-container",this._sliderContent),this.slider=i("input","ol-ctv-slider",this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",e.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?a(this.slider,"change",u,this):this.slider.onpropertychange=u;e.switch&&(this._last=i("a","ol-ctv-slider-incdec ol-ctv-slider-last",this._sliderContent),this._last.innerHTML=e.lastText,a(this._last,"click",this.lastTilesVersion,this));"vertical"==e.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px";a(this._container,"click",function(e){e.preventDefault(),e.stopPropagation()},this),e.collapsed?(a(this._container,"mouseenter",s,this),a(this._container,"mouseleave",l,this),a(this._sliderBtn,"click",function(e){e.preventDefault(),e.stopPropagation()}),a(this._sliderBtn,"click",s,this),a(this._sliderBtn,"focus",s,this)):s();return this._container}.call(wM(r)),e.layer&&r.setLayer(e.layer),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_M(e,t)}(t,vM.a),r=t,(n=[{key:"setContent",value:function(e){var t=e||{};this.setVersionName(t.desc).setToolTip(t.desc)}},{key:"setVersionName",value:function(e){var t=e;return e||(t=this.getValue()),this._sliderValue.innerHTML=t,this}},{key:"setToolTip",value:function(e){return this.tooltip.innerHTML=e,this}},{key:"updateLength",value:function(e){e>0&&(this.length=e,this.max=this.length-1,this.slider.setAttribute("max",this.max))}},{key:"setLayer",value:function(e){e&&(this.options.layer=e);var t=this,r=t.options.layer;r.on("tilesetsinfoloaded",function(e){var r=e.value&&e.value.tileVersions;t.update(r)}),r.on("tileversionschanged",function(e){var r=e.value&&e.value.tileVersion;t.setContent(r)}),t.getTileSetsInfo()}},{key:"update",value:function(e){this.tileVersions=e,this.updateLength(this.tileVersions.length)}},{key:"getTileSetsInfo",value:function(){var e=this;e.options.layer&&new dM(e.options.layer._url).getTilesets(function(t){e.options.layer.setTileSetsInfo(t.result)})}},{key:"removeLayer",value:function(){this.options.layer=null}},{key:"nextTilesVersion",value:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1,this):parseInt(this.slider.value)>this.max-1?this:(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion(),this)}},{key:"lastTilesVersion",value:function(){return parseInt(this.slider.value)<this.min+1?this:(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion(),this)}},{key:"tilesVersion",value:function(e){for(var t=this.options.layer,r=this.tileVersions,n=r.length,o=0;o<n;o++)if(r[o].name==e){t.updateCurrentTileSetsIndex(o),t.changeTilesVersion();break}}},{key:"getValue",value:function(){return this.slider.value}},{key:"getVersion",value:function(){var e=this.tileVersions[this.getValue()];return e&&e.name}}])&&gM(r.prototype,n),o&&gM(r,o),t}(),xM=r(41),CM=r.n(xM),TM=r(8),PM=r(42),EM=r.n(PM);function kM(e){return(kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jM(e,t){return!t||"object"!==kM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AM(e){return(AM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RM(e,t){return(RM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var LM=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElementRepair()},jM(this,AM(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RM(e,t)}(t,CM.a),r=t,(n=[{key:"updateElementRepair",value:function(){var e=this.viewState_||this.o;if(!e)return this.renderedVisible_=this.renderedVisible_||this.j,void(this.renderedVisible_&&(this.element_=this.element_||this.c,this.element.style.display="none",this.renderedVisible_=!1));var t=e.center,r=e.projection,n=this.getUnits(),o="degrees"==n?"degrees":"m",i=TM.getPointResolution(r,e.resolution,t,o);this.minWidth_=this.minWidth_||this.v;var a=this.minWidth_*i,s="";if("degrees"==n){var l=TM.METERS_PER_UNIT.degrees;(a*=l)<l/60?(s="â³",i*=3600):a<l?(s="â²",i*=60):s="Â°"}else if("imperial"==n)a<.9144?(s="in",i/=.0254):a<1609.344?(s="ft",i/=.3048):(s="mi",i/=1609.344);else if("nautical"==n)i/=1852,s="nm";else if("metric"==n)a<.001?(s="Î¼m",i*=1e6):a<1?(s="mm",i*=1e3):a<1e3?s="m":(s="km",i/=1e3);else{if("us"!=n)throw new EM.a(33);a<.9144?(s="in",i*=39.37):a<1609.344?(s="ft",i/=.30480061):(s="mi",i/=1609.3472)}for(var u,c,f,h=[1,2,5],p=3*Math.floor(Math.log(this.minWidth_*i)/Math.log(10));;){f=Math.floor(p/3);var y=Math.pow(10,f);if(u=h[(p%3+3)%3]*y,c=Math.round(u/i),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;++p}this.renderedHTML_=this.renderedHTML_||this.D,this.innerElement_=this.innerElement_||this.l,this.renderedWidth_=this.renderedWidth_||this.B,this.renderedVisible_=this.renderedVisible_||this.j,this.element_=this.element_||this.c;var d=u.toFixed(f<0?-f:0)+" "+s;this.renderedHTML_!=d&&(this.innerElement_.innerHTML=d,this.renderedHTML_=d),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}}])&&MM(r.prototype,n),o&&MM(r,o),t}();function IM(e){return(IM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DM(e,t){return(DM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GM=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=e||{}).imageUrl=e.imageUrl||null,e.width=e.width||null,e.height=e.height||null,e.link=e.link||"https://iclient.supermap.io",e.alt=e.alt||"SuperMap iClient",n=this,(r=!(o=NM(t).call(this,e))||"object"!==IM(o)&&"function"!=typeof o?FM(n):o).options=e,r.element=e.element=function(){var e=document.createElement("div");e.className="ol-control-logo ol-unselectable ol-control",function(e){var t=document.getElementsByClassName("ol-attribution"),r=(t=t&&t[0])&&t.clientHeight||29;e.style.bottom=parseInt(r)+6+"px",e.style.right="4px",e.style.marginTop=0,e.style.marginLeft=0,e.style.marginBottom=0,e.style.marginRight=0;var n=document.createElement("style");n.type="text/css",n.innerHTML=".ol-control-logo,.ol-control-logo:hover {background-color: rgba(255,255,255,0);}",document.getElementsByTagName("head")[0].appendChild(n)}.call(this,e);var t=Wr;this.options.imageUrl&&(t=this.options.imageUrl);var r=this.options.alt,n=this.options.link,o="94px",i="29px",a="width:"+o+";height:"+i+";";this.options.imageUrl&&(o=this.options.width,i=this.options.height,a="width:"+o+";height:"+i+";",o&&i||(a=""));return e.innerHTML="<a href='"+n+"' target='_blank' style='border: none;display: block;'><img src="+t+" alt='"+r+"'  style='border: none;"+a+"white-space: nowrap;margin-bottom: 2px'></a>",e}.call(FM(r)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DM(e,t)}(t,vM.a),t}(),BM={"point-file":"pointFile","point-fill":"fillStyle","point-radius":"pointRadius","point-halo-radius":"pointHaloRadius","point-halo-color":"pointHaloColor","point-dx":"offsetX","point-dy":"offsetY","point-opacity":"globalAlpha","point-comp-op":"globalCompositeOperation"},UM={"line-color":"strokeStyle","line-width":"lineWidth","line-cap":"lineCap","line-join":"lineJoin","line-miterlimit":"miterLimit","line-dash-offset":"lineDashOffset","line-opacity":"strokeOpacity","line-dasharray":"lineDasharray","line-offset":"offset","line-comp-op":"globalCompositeOperation"},VM={"line-color":"strokeStyle","line-width":"lineWidth","line-cap":"lineCap","line-join":"lineJoin","line-miterlimit":"miterLimit","line-dash-offset":"lineDashOffset","line-opacity":"strokeOpacity","line-dasharray":"lineDasharray","polygon-fill":"fillStyle","polygon-dx":"offsetX","polygon-dy":"offsetY","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"},HM={CartoStyleMap:{TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-vertical-alignment":"textBaseline","text-horizontal-alignment":"textAlign","text-bold":"bold","text-weight":"fontWeight","text-name":"textName","text-halo-radius":"haloRadius","text-halo-color":"backColor","text-fill":"foreColor","text-opacity":"globalAlpha","text-dx":"offsetX","text-dy":"offsetY","text-comp-op":"globalCompositeOperation"},POINT:BM,MULTIPOINT:BM,LINE:UM,LINESTRING:UM,MULTILINESTRING:UM,REGION:VM,POLYGON:VM,MULTIPOLYGON:VM},ServerStyleMap:{fillBackOpaque:{canvasStyle:"",type:"bool",defaultValue:!0},lineWidth:{canvasStyle:"lineWidth",type:"number",unit:"mm",defaultValue:.1},fillBackColor:{canvasStyle:"",type:"color",defaultValue:"rgba(0,0,0,0)"},markerWidth:{canvasStyle:"",type:"number",unit:"mm",defaultValue:""},markerAngle:{canvasStyle:"",type:"number",unit:"degree",defaultValue:""},fillForeColor:{canvasStyle:"fillStyle",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{canvasStyle:"fillStyle",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{canvasStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},fillGradientOffsetRatioX:{canvasStyle:"",type:"number",defaultValue:0},fillGradientOffsetRatioY:{canvasStyle:"",type:"number",defaultValue:0},lineColor:{canvasStyle:"strokeStyle",type:"color",defaultValue:"rgba(0,0,0,0)"},fillOpaqueRate:{canvasStyle:"",type:"number",defaultValue:100},markerHeight:{canvasStyle:"",type:"number",unit:"mm",defaultValue:0},fillGradientMode:{canvasStyle:"",type:"string",defaultValue:"NONE"},fillSymbolID:{canvasStyle:"",type:"number",defaultValue:0},fillGradientAngle:{canvasStyle:"",type:"number",unit:"degree",defaultValue:0},markerSymbolID:{canvasStyle:"",type:"number",defaultValue:0},lineSymbolID:{canvasStyle:"",type:"number",defaultValue:0}},CartoCompOpMap:{clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""}},zM={pointFile:"",pointRadius:3,pointHaloRadius:1,pointHaloColor:"#c33",offsetX:0,offsetY:0,fillStyle:"#fc0",globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0},qM={strokeStyle:"rgba(0,0,0,0)",lineWidth:1,lineCap:"butt",lineJoin:"round",miterLimit:10,lineDashOffset:0,lineDasharray:[],strokeOpacity:1,offset:0,globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0},JM={strokeStyle:"rgba(0,0,0,0)",lineWidth:1,lineCap:"butt",lineJoin:"round",miterLimit:10,lineDashOffset:0,lineOpacity:1,fillOpacity:1,lineDasharray:[],fillStyle:"rgba(0,0,0,0)",polygonOpacity:1,offsetX:0,offsetY:0,globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0},WM={TEXT:{font:"10px sans-serif",textAlign:"middle",textBaseline:"center",direction:"ltr",bold:!1,haloRadius:0,backColor:"rgba(255,255,255,1)",foreColor:"rgba(0,0,0,1)",offsetX:0,offsetY:0,textHeight:0,globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0},POINT:zM,MULTIPOINT:zM,LINE:qM,LINESTRING:qM,MULTILINESTRING:qM,REGION:JM,POLYGON:JM,MULTIPOLYGON:JM,SHADOW:{shadowBlur:0,shadowColor:"rgba(0,0,0,0)",shadowOffsetX:0,shadowOffsetY:0},GLOBAL:{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0}},YM=r(3),XM=r.n(YM),QM=r(1),KM=r.n(QM);
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function ZM(e){return(ZM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ej(e,t){return!t||"object"!==ZM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tj(e){return(tj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rj(e,t){return(rj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nj=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ej(this,tj(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rj(e,t)}(t,u),r=t,(n=[{key:"queryByBounds",value:function(e,t,r){var n=this;new Zv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryByDistance",value:function(e,t,r){var n=this;new pb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryBySQL",value:function(e,t,r){var n=this;new Hb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryByGeometry",value:function(e,t,r){var n=this;new Eb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!aj.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds=new Me(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.geometry&&(e.geometry instanceof XM.a?e.geometry=new nt(e.geometry.getCoordinates()[0],e.geometry.getCoordinates()[1]):e.geometry=aj.toSuperMapGeometry(JSON.parse((new KM.a).writeGeometry(e.geometry)))),e):{}}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}}])&&$M(r.prototype,n),o&&$M(r,o),t}(),oj=r(28);function ij(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"getOlVersion",value:function(){if(oj&&oj.VERSION)return oj.VERSION.split(".")[0];if(window&&window.ol){if(window.ol.util)return"6";if(window.ol.WebGLMap)return"5"}return"4"}},{key:"toGeoJSON",value:function(e){if(e)return(new Br).toGeoJSON(e)}},{key:"toSuperMapGeometry",value:function(e){if(e&&e.type)return(new Br).read(e,"FeatureCollection")[0].geometry}},{key:"resolutionToScale",value:function(e,t,r){var n=e*t*(1/.0254)*this.getMeterPerMapUnit(r);return n=1/n}},{key:"toSuperMapBounds",value:function(e){return new Me(e[0],e[1],e[2],e[3])}},{key:"toProcessingParam",value:function(e){var t={};if(e.length<1)t="";else{for(var r=[],n=0;n<e.length;n++){var o={};o.x=e[n][0],o.y=e[n][1],r.push(o)}r.push(r[0]),t.type="REGION",t.points=r}return t}},{key:"scaleToResolution",value:function(e,t,r){var n=e*t*(1/.0254)*this.getMeterPerMapUnit(r);return n=1/n}},{key:"getMeterPerMapUnit",value:function(e){var t;if(e===g.METER)t=1;else if(e===g.DEGREE)t=2*Math.PI*6378137/360;else if(e===g.KILOMETER)t=.001;else if(e===g.INCH)t=1/.025399999918;else{if(e!==g.FOOT)return t;t=.3048}return t}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"Csv2GeoJSON",value:function(e,t){t=t||{titles:["lon","lat"],latitudeTitle:"lat",longitudeTitle:"lon",fieldSeparator:",",lineSeparator:"\n",deleteDoubleQuotes:!0,firstLineTitles:!1};var r=[];if("string"==typeof e){var n=t.titles;if(t.firstLineTitles){if((e=e.split(t.lineSeparator)).length<2)return;n=e[0],e.splice(0,1),e=e.join(t.lineSeparator),n=n.trim().split(t.fieldSeparator);for(var o=0;o<n.length;o++)n[o]=s(n[o]);t.titles=n}for(var i=0;i<n.length;i++){var a=n[i].toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"_");""!=a&&"_"!=a||(a="prop-"+i),r[i]=a}e=function(e){var n={type:"FeatureCollection",features:[]},o=t.titles;e=e.split(t.lineSeparator);for(var i=0;i<e.length;i++){var a=e[i].trim().split(t.fieldSeparator),l=parseFloat(a[o.indexOf(t.longitudeTitle)]),u=parseFloat(a[o.indexOf(t.latitudeTitle)]),c=l<180&&l>-180&&u<90&&u>-90;if(a.length==o.length&&c){var f={type:"Feature",geometry:{},properties:{}};f.geometry.type="Point",f.geometry.coordinates=[l,u];for(var h=0;h<o.length;h++)o[h]!=t.latitudeTitle&&o[h]!=t.longitudeTitle&&(f.properties[r[h]]=s(a[h]));n.features.push(f)}}return n}(e)}return e;function s(e){return t.deleteDoubleQuotes&&(e=e.trim().replace(/^"/,"").replace(/"$/,"")),e}}},{key:"createCanvasContext2D",value:function(e,t){var r=document.createElement("CANVAS");return e&&(r.width=e),t&&(r.height=t),r.getContext("2d")}},{key:"supportWebGL2",value:function(){var e=document.createElement("canvas");return Boolean(e&&e.getContext("webgl2"))}},{key:"isString",value:function(e){return"string"==typeof e&&e.constructor===String}},{key:"trim",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/(^\s*)|(\s*$)/g,"")}},{key:"newGuid",value:function(e){for(var t=e||32,r="",n=1;n<t;n++){r+=Math.floor(16*Math.random()).toString(16)}return r}},{key:"isNumber",value:function(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)}},{key:"getFeatureBySQL",value:function(e,t,r,n){var o,i;o=new Uo({name:t.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new Bh({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,maxFeatures:1e5,returnContent:!0}),new Wh(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){n&&n(e)}},withCredentials:!0}).processAsync(i)}},{key:"queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,l,u){var c,f;c=new Uo({name:t,attributeFilter:r}),n&&(c.fields=n);var h={queryParams:[c]};u&&(h.queryOption=y.ATTRIBUTE),s&&(h.startRecord=s),l&&(h.expectCount=l),o&&(h.prjCoordSys={epsgCode:o}),f=new Nb(h),new nj(e).queryBySQL(f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"getFeatureProperties",value:function(t){var r=[];return e.isArray(t)&&t.length&&t.forEach(function(e){var t=e.get("attributes");t&&r.push(t)}),r}},{key:"isMatchAdministrativeName",value:function(t,r){if(e.isString(r)){var n=t.substr(0,2);return"å¼ å®¶"===n&&(n=t.substr(0,3)),!!r.match(new RegExp(n))}return!1}}],(r=null)&&ij(t.prototype,r),n&&ij(t,n),e}(),sj=r(43),lj=r.n(sj),uj=r(0),cj=r.n(uj),fj=r(12),hj=r.n(fj),pj=r(9),yj=r.n(pj),dj=r(2),mj=r.n(dj),vj=r(4),bj=r.n(vj),gj=r(13),Sj=r.n(gj);function wj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _j,Oj=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"getValidStyleFromLayerInfo",value:function(e,t,r){var n=t.getGeometry().getType().toUpperCase(),o=e.layerStyle,i=this.getDefaultStyle(n);if(!("POINT"!==n&&"MULTIPOINT"!==n||t.getProperties().textStyle||"LABEL"===e.type||t.getProperties().TEXT_FEATURE_CONTENT)){if(o){var a={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:Math.ceil(o.markerSize*c.DOTS_PER_INCH*c.INCHES_PER_UNIT.mm)||13,picHeight:Math.ceil(o.markerSize*c.DOTS_PER_INCH*c.INCHES_PER_UNIT.mm)||13,style:JSON.stringify(o)},s=Te.urlAppend(r+"/symbol.png",Te.getParameterString(a));return i.pointFile=s,new cj.a({image:new hj.a({src:i.pointFile})})}return this.toOLPointStyle(i)}if(("POINT"===n||"MULTIPOINT"===n)&&(t.getProperties().textStyle||"LABEL"===e.type||t.getProperties().TEXT_STYLE_INFO)){if(i=this.getDefaultStyle("TEXT"),t.getProperties().textStyle&&(o=t.getProperties().textStyle),t.getProperties().TEXT_STYLE_INFO&&(o=JSON.parse(t.getProperties().TEXT_STYLE_INFO).textStyle),o&&"{}"!==o){var l="";i.fontStyle=o.italic?"italic":"normal",i.fontWeight=o.bold?o.fontWeight:"normal";var u=o.fontHeight*c.DOTS_PER_INCH*c.INCHES_PER_UNIT.mm*.85;i.fontSize=u+"px",l=o.fontName.indexOf("@")?o.fontName.replace(/@/g,""):o.fontName,i.fontFamily=l,i.textHeight=u;var f=o.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");i.textAlign=f.toLowerCase();var h=o.align.replace(/LEFT|RIGHT|CENTER/,"");"BASELINE"===h&&(h="alphabetic"),i.textBaseline=h.toLowerCase(),i.haloRadius=o.outline?o.outlineWidth:0,i.backColor="rgba("+o.backColor.red+","+o.backColor.green+","+o.backColor.blue+",1)",i.foreColor="rgba("+o.foreColor.red+","+o.foreColor.green+","+o.foreColor.blue+",1)",i.rotation=o.rotation}var p;if(t.getProperties().textStyle&&t.getProperties().texts&&(p=t.getProperties().texts[0]),"LABEL"===e.type){var y=e.textField;if(y&&y.indexOf(".")){var d=y.split(".");y=d&&d.length>0&&d[d.length-1]}p=t.getProperties().attributes?t.getProperties().attributes[y]:t.getProperties()[y]}return t.getProperties().TEXT_FEATURE_CONTENT&&(p=t.getProperties().TEXT_FEATURE_CONTENT),p?this.toOLTextStyle(i,p):this.toOLPointStyle(this.getDefaultStyle("POINT"))}if(o){var m=o.fillSymbolID>7?0:o.fillSymbolID,v=o.lineSymbolID>5?0:o.lineSymbolID;for(var b in o){var g,S=HM.ServerStyleMap[b],w=S.canvasStyle;if(w&&""!=w)switch(S.type){case"number":g=o[b],S.unit&&(g=g*c.DOTS_PER_INCH*c.INCHES_PER_UNIT[S.unit]*2.5),i[w]=g;break;case"color":var _=o[b],O=o.fillBackColor,x=1;if("fillStyle"===w)if(0===m||1===m)x=1-m,g="rgba("+_.red+","+_.green+","+_.blue+","+x+")";else try{var C=document.createElement("canvas");C.height=8,C.width=8;var T=C.getContext("2d"),P=new Image;this.layer&&this.layer.fillImages&&T.drawImage(this.layer.fillImages["System "+m],0,0);for(var E=T.getImageData(0,0,C.width,C.height),k=E.data,M=0,j=k.length;M<j;M+=4){var A=k[M],R=k[M+1],L=k[M+2];A<225&&R<225&&L<225?(k[M]=_.red,k[M+1]=_.green,k[M+2]=_.blue):O&&(k[M]=O.red,k[M+1]=O.green,k[M+2]=O.blue)}T.putImageData(E,0,0),P.src=C.toDataURL(),this.context&&(g=this.context.createPattern(P,"repeat"))}catch(e){throw Error(e.message)}else if("strokeStyle"===w){if(0===v||5===v)x=0===v?1:0;else{var I=[1,0];switch(v){case 1:I=[9.7,3.7];break;case 2:I=[3.7,3.7];break;case 3:I=[9.7,3.7,2.3,3.7];break;case 4:I=[9.7,3.7,2.3,3.7,2.3,3.7]}i.lineDasharray=I}g="rgba("+_.red+","+_.green+","+_.blue+","+x+")"}i[w]=g}}}return"LINESTRING"===n||"MULTILINESTRING"===n?this.toOLLineStyle(i):"POLYGON"===n||"MULTIPOLYGON"===n?this.toOLPolygonStyle(i):void 0}},{key:"getStyleFromCarto",value:function(e,t,r,n,o,i){var a=n.getGeometry().getType().toUpperCase(),s={},l=this.getDefaultStyle(a);s.FEATUREID=n.getProperties().id,s.SCALE=t;var u,c,f="TEXT"===n.getProperties().type?"TEXT":a,h=HM.CartoStyleMap[f];if(r)for(var p=0,y=r.length;p<y;p++){var d=r[p],m=h[d.property],v=d.getValue(s,e,!0);if(null!==v&&m)if("fontSize"===m)o&&(v*=.8),u=v+"px",l.fontSize=u;else if("fontName"===m)c=v,l.fontName=c;else{if("globalCompositeOperation"===m){if(!(v=HM.CartoCompOpMap[v]))continue}else o&&"pointFile"===m&&(v=(v=i+"/tileFeature/symbols/"+v.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"));"lineWidth"===m&&v<1&&(v=Math.ceil(v)),l[m]=v}}if("TEXT"===n.getProperties().type){var b;if(n.getProperties().texts&&(b=n.getProperties().texts[0]),null==b&&l.textName){var g=l.textName.substring(1,l.textName.length-1);if(null!=(b=n.getProperties().attributes?n.getProperties().attributes[g]:n.getProperties()[g])){var S=n.getProperties().texts||[];S.push(b),n.setProperties({texts:S})}}return this.toOLTextStyle(l,b)}return"POINT"===a||"MULTIPOINT"===a?this.toOLPointStyle(l):"LINESTRING"===a||"MULTILINESTRING"===a?this.toOLLineStyle(l):"POLYGON"===a||"MULTIPOLYGON"===a?this.toOLPolygonStyle(l):void 0}},{key:"toOLPointStyle",value:function(e){return""!==e.pointFile?new cj.a({image:new hj.a({src:e.pointFile})}):new cj.a({image:new yj.a({radius:e.pointRadius,fill:new mj.a({color:e.fillStyle}),stroke:new bj.a({color:e.pointHaloColor,width:e.pointHaloRadius})})})}},{key:"toOLLineStyle",value:function(e){return new cj.a({stroke:new bj.a({color:e.strokeStyle,width:e.lineWidth,lineCap:e.lineCap,lineDash:e.lineDasharray,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,miterLimit:e.miterLimit})})}},{key:"toOLPolygonStyle",value:function(e){var t=new mj.a({color:e.fillStyle}),r=new bj.a({color:e.strokeStyle,width:e.lineWidth,lineCap:e.lineCap,lineDash:e.lineDasharray,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,miterLimit:e.miterLimit});return new cj.a({fill:t,stroke:r})}},{key:"toOLTextStyle",value:function(e,t){return new cj.a({text:new Sj.a({font:(e.fontStyle||"")+" "+(e.fontWeight||"")+" "+(e.fontSize||"")+" "+e.fontFamily,text:t,textAlign:e.textAlign,textBaseline:e.textBaseline,fill:new mj.a({color:e.foreColor}),stroke:new bj.a({color:e.backColor}),offsetX:e.offsetX,offsetY:e.offsetY})})}},{key:"dashStyle",value:function(e,t){if(!e)return[];var r=e.strokeWidth*t,n=e.strokeDashstyle||e.lineDash;switch(n){case"solid":return[0];case"dot":return[1,4*r];case"dash":return[4*r,4*r];case"dashdot":return[4*r,4*r,1,4*r];case"longdash":return[8*r,4*r];case"longdashdot":return[8*r,4*r,1,4*r];default:return n?Te.isArray(n)?n:(n=ge.trim(n).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getStyleFromiPortalMarker",value:function(e){return 0==e.indexOf("./")?null:(0==e.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(e=e.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),new cj.a({image:new hj.a({src:e,opacity:1,size:[48,43],anchor:[.5,1]})}))}},{key:"getStyleFromiPortalStyle",value:function(e,t,r){var n=r?JSON.parse(r):null,o=this;if("Point"===t||"MultiPoint"===t){var i=n||e.pointStyle;return i.externalGraphic?0==i.externalGraphic.indexOf("./")?null:(0==i.externalGraphic.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(i.externalGraphic=i.externalGraphic.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),new cj.a({image:new hj.a({src:i.externalGraphic,opacity:i.graphicOpacity,size:[i.graphicWidth,i.graphicHeight]})})):new cj.a({image:new yj.a({fill:new mj.a({color:o.hexToRgba(i.fillColor,i.fillOpacity)}),stroke:new bj.a({color:o.hexToRgba(i.strokeColor,i.strokeOpacity),lineCap:i.strokeLineCap,lineDash:this.dashStyle(i,1),width:i.strokeWidth}),radius:i.pointRadius})})}if("LineString"===t||"MultiLineString"===t||"Box"===t){var a=n||e.lineStyle;return new cj.a({stroke:new bj.a({color:o.hexToRgba(a.strokeColor,a.strokeOpacity),lineCap:a.strokeLineCap,lineDash:this.dashStyle(a,1),width:a.strokeWidth})})}if("Polygon"===t||"MultiPolygon"===t){var s=n||e.polygonStyle;return new cj.a({fill:new mj.a({color:o.hexToRgba(s.fillColor,s.fillOpacity)}),stroke:new bj.a({color:o.hexToRgba(s.strokeColor,s.strokeOpacity),lineCap:s.strokeLineCap,lineDash:this.dashStyle(s,1),width:s.strokeWidth})})}}},{key:"hexToRgba",value:function(e,t){var r=[],n=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+e.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(t),"rgba("+n.join(",")+")"}},{key:"getDefaultStyle",value:function(e){var t={},r=WM[e];for(var n in r){var o=r[n];t[n]=o}return t}},{key:"toOpenLayersStyle",value:function(e,t){e=e||this.getDefaultStyle();var r,n,o,i=new cj.a,a=e,s=a.fillColor,l=a.fillOpacity,u=a.strokeColor,c=a.strokeWidth,f=a.strokeOpacity,h=a.radius,p=a.lineCap,y=a.src,d=a.scale,m=a.anchor,v=this.hexToRgb(s);v&&v.push(l);var b=this.hexToRgb(u);if(b&&b.push(f),"POINT"===t)y?/.+(\.svg$)/.test(y)?(this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this.getCanvasFromSVG(y,this.svgDiv,function(e){r=new hj.a({img:e,scale:h/e.width,imgSize:[e.width,e.height],anchor:[.5,.5]})})):r=new hj.a({src:y,scale:d,anchor:m}):r=new yj.a({radius:h,fill:new mj.a({color:v}),stroke:new bj.a({width:c||1e-7,color:b})}),i.setImage(r);else if("LINE"===t||"LINESTRING"===t||"MULTILINESTRING"===t||"LINEARRING"===t)o=new bj.a({width:c||1e-7,color:b,lineCap:p||"round",lineDash:this.dashStyle(e,1)}),i.setStroke(o);else if("POLYGON"===t||"MULTIPOLYGON"===t||"REGION"===t)n=new mj.a({color:v}),o=new bj.a({width:c||1e-7,color:b,lineCap:p||"round",lineDash:this.dashStyle(e,1)}),i.setFill(n),i.setStroke(o);else{var g=this.getCanvas(e);r=new hj.a({img:g.canvas,imgSize:[g.width,g.height],scale:1,anchor:[.5,.5]}),i.setImage(r)}return i}},{key:"getCanvas",value:function(e){var t;e.canvas?t=document.querySelector("#"+e.canvas)?document.getElemntById(e.canvas):this.createCanvas(e):(t=this.createCanvas(e),e.canvas=t.id),t.style.display="none";var r=t.getContext("2d"),n=Number(e.font.replace(/[^0-9]/gi,"")),o=e.text.split("\r\n"),i=o.length;r.font=e.font;var a=this.drawRect(r,e,o,n,t);return this.positionY=8,i>1?o.forEach(function(t,o){0!==o&&(this.positionY=this.positionY+n),this.canvasTextAutoLine(t,e,r,n,a.width)},this):this.canvasTextAutoLine(o[0],e,r,n,a.width),{canvas:t,width:a.width,height:a.height}}},{key:"createCanvas",value:function(e){var t=document.createElement("div");document.body.appendChild(t);var r=document.createElement("canvas");return r.id=e.canvas?e.canvas:"textCanvas"+aj.newGuid(8),t.appendChild(r),r}},{key:"drawRect",value:function(e,t,r,n,o){var i,a=t.backgroundFill,s=t.maxWidth-16,l=0,u=0,c=[];return r.forEach(function(t){var r,n="";u++;for(var o=0;o<t.length;o++){var a=n+t[o],l=e.measureText(a).width;l>s&&o>0||"\n"===t[o]?(n=t[o],u++,r=!0):(n=a,i=l)}r?c.push(s):c.push(i)},this),i=this.getCanvasWidth(c,s),l=u*n,l+=16,o.width=i,o.height=l,e.fillStyle=a,e.fillRect(0,0,i,l),{width:i,height:l}}},{key:"getCanvasWidth",value:function(e,t){for(var r=0,n=0;n<e.length;n++){var o=e[n];if(o>=t)return t+16;o>r&&(r=o)}return r+16}},{key:"canvasTextAutoLine",value:function(e,t,r,n,o){r.font=t.font;for(var i=t.textAlign,a=this.getPositionX(i,o),s=e.split(""),l="",u=t.fillColor,c=t.maxWidth-16,f=0;f<s.length;f++){var h=l+s[f];r.measureText(h).width>c&&f>0||"\n"===s[f]?(r.fillStyle=u,r.textAlign=i,r.textBaseline="top",r.fillText(l,a,this.positionY),l=s[f],this.positionY+=n):l=h}r.fillStyle=u,r.textAlign=i,r.textBaseline="top",r.fillText(l,a,this.positionY)}},{key:"getPositionX",value:function(e,t){var r,n=t-16;switch(e){case"center":r=n/2;break;case"right":r=n;break;default:r=8}return r}},{key:"hexToRgb",value:function(e){if(e){var t=e.replace("#","").split(""),r=[t[0]+t[1],t[2]+t[3],t[4]+t[5]];return r=r.map(function(e){return parseInt(e,16)})}}},{key:"formatRGB",value:function(e){var t;return 3===e.length?(t="rgb(",e.forEach(function(e,r){t+=2===r?e:e+","})):(t="rgba(",e.forEach(function(e,r){t+=3===r?e:e+","})),t}},{key:"getCanvasFromSVG",value:function(e,t,r){var n=window.canvg?window.canvg:lj.a,o=document.createElement("canvas");o.id="dataviz-canvas-"+aj.newGuid(8),o.style.display="none",t.appendChild(o);try{n(o.id,e,{ignoreMouse:!0,ignoreAnimation:!0,renderCallback:function(){o.width>300||o.height>300||r(o)},forceRedraw:function(){return!1}})}catch(e){return}}},{key:"getMarkerDefaultStyle",value:function(e,t){var r;switch(e){case"POINT":r={src:"".concat(t,"apps/dataviz/static/imgs/markers/mark_red.png"),scale:1,anchor:[.5,1]};break;case"LINE":case"LINESTRING":case"MULTILINESTRING":r={strokeColor:"#3498db",strokeOpacity:1,strokeWidth:5,lineCap:"round",lineDash:"solid"};break;case"REGION":case"POLYGON":case"MULTIPOLYGON":r={fillColor:"#1abd9c",fillOpacity:1,strokeColor:"#3498db",strokeOpacity:1,strokeWidth:3,lineCap:"round",lineDash:"solid"}}return r}},{key:"getOpenlayersStyle",value:function(e,t,r){var n;return"BASIC_POINT"===e.type?n=this.toOpenLayersStyle(e,t):"SYMBOL_POINT"===e.type?n=this.getSymbolStyle(e,r):"SVG_POINT"===e.type?n=this.getSVGStyle(e):"IMAGE_POINT"===e.type&&(n=this.getImageStyle(e)),n}},{key:"getSymbolStyle",value:function(t,r){var n="";t.unicode&&(n=String.fromCharCode(parseInt(t.unicode.replace(/^&#x/,""),16)));var o=e.hexToRgb(t.fillColor);o.push(t.fillOpacity);var i=e.hexToRgb(t.strokeColor);i.push(t.strokeOpacity);var a=r?2*t.radius+"px":t.fontSize;return new cj.a({text:new Sj.a({text:n,font:a+" supermapol-icons",placement:"point",textAlign:"center",fill:new mj.a({color:o}),backgroundFill:new mj.a({color:[0,0,0,0]}),stroke:new bj.a({width:t.strokeWidth||1e-6,color:i})})})}},{key:"getSVGStyle",value:function(t){var r,n=this;return n.svgDiv||(n.svgDiv=document.createElement("div"),document.body.appendChild(n.svgDiv)),e.getCanvasFromSVG(t.url,n.svgDiv,function(e){r=new cj.a({image:new hj.a({img:n.setColorToCanvas(e,t),scale:t.radius/e.width,imgSize:[e.width,e.height],anchor:[.5,.5],opacity:t.fillOpacity})})}),r}},{key:"setColorToCanvas",value:function(t,r){var n=t.getContext("2d"),o=e.hexToRgb(r.fillColor);o&&o.push(r.fillOpacity);var i=e.hexToRgb(r.strokeColor);return i&&i.push(r.strokeOpacity),n.fillStyle=e.formatRGB(o),n.fill(),n.strokeStyle=e.formatRGB(i),n.lineWidth=r.strokeWidth,n.stroke(),t}},{key:"getImageStyle",value:function(e){var t=e.imageInfo.size,r=2*e.radius/t.w,n=e.imageInfo,o=n.img;return o&&o.src||((o=new Image).src=n.url),new cj.a({image:new hj.a({img:o,scale:r,imgSize:[t.w,t.h],anchor:[.5,.5]})})}}],(r=null)&&wj(t.prototype,r),n&&wj(t,n),e}(),xj=r(18),Cj=r.n(xj),Tj=r(44),Pj=r.n(Tj),Ej=(_j=function e(t,r,n,o,i,a){t instanceof Pj.a?t.getLayers().forEach(function(t){e(t,r,n,o,i,a)}):t.getSource()._forEachFeatureAtCoordinate&&t.getSource()._forEachFeatureAtCoordinate(r,n,function(e){o(e,t)},i,a)},Cj.a.prototype.forEachFeatureAtPixelDefault=Cj.a.prototype.forEachFeatureAtPixel,void(Cj.a.prototype.forEachFeatureAtPixel=Cj.a.prototype.Tc=function(e,t,r,n){for(var o=r&&r.layerFilter?r.layerFilter:function(){return!0},i=this.getLayers().getArray(),a=this.getView().getResolution(),s=this.getCoordinateFromPixel(e),l=0;l<i.length;l++){var u=i[l];u.getVisible()&&o.call(null,u)&&_j(u,s,a,t,e,n)}return this.forEachFeatureAtPixelDefault(e,t,r)})),kj=r(19),Mj=r.n(kj),jj=r(45),Aj=r(7),Rj=r.n(Aj);function Lj(e){return(Lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ij(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nj(e){return(Nj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dj(e,t){return(Dj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Gj=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,i=e||{},a=i.attributions||"Map Data Â© 2018 Baidu - GS(2016)2089å· - Data Â© é¿å°ä¸æ¹ with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",s=t.defaultTileGrid(),l=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",u=void 0!==i.url?i.url:"http://online1.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20170408",c=i.hidpi||(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1;u=u.replace("{styles}",c?"ph":"pl"),n=this,r=!(o=Nj(t).call(this,{attributions:a,cacheSize:i.cacheSize,crossOrigin:l,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:u,projection:"EPSG:3857",wrapX:i.wrapX,tilePixelRatio:c?2:1,tileGrid:s,tileUrlFunction:function(e,t,r){var n=u.replace("{z}",e[0].toString()).replace("{x}",e[1].toString()).replace("{y}",function(){var t=["4","5"].includes(aj.getOlVersion())?e[2]:-e[2]-1;return t.toString()}).replace("{-y}",function(){var t=e[0],r=s.getFullTileRange(t);jj.assert(r,55);var n=r.getHeight()+e[2];return n.toString()});f.tileProxy&&(n=f.tileProxy+encodeURIComponent(n));return n}}))||"object"!==Lj(o)&&"function"!=typeof o?Fj(n):o,i.tileProxy&&(r.tileProxy=i.tileProxy);var f=Fj(r);return r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dj(e,t)}(t,Mj.a),r=t,o=[{key:"defaultTileGrid",value:function(){return new Rj.a({extent:[-33554432,-33554432,33554432,33554432],resolutions:[262144,131072,65536,32768,16284,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1,.5],origin:[0,0],minZoom:3})}}],(n=null)&&Ij(r.prototype,n),o&&Ij(r,o),t}(),Bj=r(15),Uj=r.n(Bj),Vj=r(20),Hj=r(26);function zj(e){return(zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jj(e,t){return!t||"object"!==zj(t)&&"function"!=typeof t?Yj(e):t}function Wj(e){return(Wj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xj(e,t){return(Xj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Qj=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e.url)return Jj(r);e.attributions=e.attributions||"Map Data <span>Â© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <a href='https://iclient.supermap.io/'>Â© SuperMap iClient</a>",e.format=e.format?e.format:"png";var n=e.url+"/image."+e.format+"?";e.serverType=e.serverType||h.ISERVER,n=function(e,t,r){var n,o,i=t;switch(r){case h.IPORTAL:o=hn.getToken(e),(n=o?new Yt(o,"token"):null)||(o=hn.getKey(e),n=o?new Yt(o,"key"):null);break;case h.ONLINE:o=hn.getKey(e),n=o?new Yt(o,"key"):null;break;default:o=hn.getToken(e),n=o?new Yt(o,"token"):null}n&&(i+="&"+n.getUrlParameters());return i}(e.url,n,e.serverType);var o=void 0===e.transparent||e.transparent;n+="&transparent="+o;var i=void 0===e.cacheEnabled||e.cacheEnabled;n+="&cacheEnabled="+i,void 0!==e.layersID&&(n+="&layersID="+e.layersID);var a=!1;void 0!==e.redirect&&(a=e.redirect),n+="&redirect="+a,e.prjCoordSys&&(n+="&prjCoordSys="+JSON.stringify(e.prjCoordSys)),e.clipRegionEnabled&&e.clipRegion instanceof Uj.a&&(e.clipRegion=aj.toSuperMapGeometry((new KM.a).writeGeometryObject(e.clipRegion)),e.clipRegion=Te.toJSON(Rr.fromGeometry(e.clipRegion)),n+="&clipRegionEnabled="+e.clipRegionEnabled+"&clipRegion="+JSON.stringify(e.clipRegion)),e.overlapDisplayed&&e.overlapDisplayedOptions&&(n+="&overlapDisplayed="+e.overlapDisplayed+"&overlapDisplayedOptions="+e.overlapDisplayedOptions.toString()),!0===i&&e.tileversion&&(n+="&tileversion="+e.tileversion),e.rasterfunction&&(n+="&rasterfunction="+JSON.stringify(e.rasterfunction)),(r=Jj(this,Wj(t).call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:"4"===aj.getOlVersion()?e.logo:null,opaque:e.opaque,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:function(r,o,i){this.tileGrid||(this.tileGrid=this.getTileGridForProjection&&this.getTileGridForProjection(i));this.tileGrid||(e.extent?(this.tileGrid=t.createTileGrid(e.extent),this.resolutions&&(this.tileGrid.resolutions=s.resolutions)):("EPSG:3857"===i.getCode()&&(this.tileGrid=t.createTileGrid([-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),this.extent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),"EPSG:4326"===i.getCode()&&(this.tileGrid=t.createTileGrid([-180,-90,180,90]),this.extent=[-180,-90,180,90])));var a=this.tileGrid.getTileCoordExtent(r,this.tmpExtent_),l=Vj.toSize(this.tileGrid.getTileSize(r[0]),this.tmpSize),u=encodeURI(n+"&width="+l[0]+"&height="+l[1]+'&viewBounds={"leftBottom" : {"x":'+a[0]+',"y":'+a[1]+'},"rightTop" : {"x":'+a[2]+',"y":'+a[3]+"}}");s.tileProxy&&(u=s.tileProxy+encodeURIComponent(u));s.cacheEnabled||(u+="&_t="+(new Date).getTime());return u},url:e.url,urls:e.urls,wrapX:void 0!==e.wrapX&&e.wrapX,cacheEnabled:e.cacheEnabled,layersID:e.layersID}))).cacheEnabled=i,e.tileProxy&&(r.tileProxy=e.tileProxy);var s=Yj(r);return r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xj(e,t)}(t,Mj.a),r=t,o=[{key:"optionsFromMapJSON",value:function(e,t){var r={};r.url=e,r.crossOrigin="anonymous";var n=[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top],o=function(){var e,r=n[2]-n[0],o=n[3]-n[1],i=r>=o?r:o;e=i===r?i/t.viewer.width:i/t.viewer.height;var a=[],s=g.METER;t.coordUnit===g.DEGREE&&(s=g.DEGREE);if(t.visibleScales.length>0)for(var l=0;l<t.visibleScales.length;l++)a.push(aj.scaleToResolution(t.visibleScales[l],96,s));else for(var u=0;u<17;u++)a.push(e/Math.pow(2,u));return a.sort(function(e,t){return t-e})}();return r.tileGrid=new Rj.a({extent:n,resolutions:o}),r}},{key:"createTileGrid",value:function(e,t,r,n,o){var i=Hj.createXYZ({extent:e,maxZoom:t,minZoom:r,tileSize:n});return new Rj.a({extent:e,minZoom:r,origin:o,resolutions:i.getResolutions(),tileSize:i.getTileSize()})}}],(n=null)&&qj(r.prototype,n),o&&qj(r,o),t}(),Kj=r(46),Zj=r.n(Kj);function $j(e){return($j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eA(e){return(eA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rA(e,t){return(rA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nA=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{},o=n.attributions||"Map Data Â©2014 SuperMap - GS(2014)6070å·-dataÂ©Navinfo with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",i=n.mapName||"quanguo",a=n.mapType||"web",s=n.url||"http://t2.supermapcloud.com/FileService/image?map={mapName}&type={type}&x={x}&y={y}&z={z}";s=s.replace("{mapName}",i).replace("{type}",a);var l,u,c={attributions:o,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:void 0===n.opaque||n.opaque,maxZoom:n.maxZoom||18,reprojectionErrorThreshold:n.reprojectionErrorThreshold,url:s,wrapX:n.wrapX};n.tileProxy&&(c.tileLoadFunction=function(e,t){e.getImage().src=f.tileProxy+encodeURIComponent(t)}),l=this,r=!(u=eA(t).call(this,c))||"object"!==$j(u)&&"function"!=typeof u?tA(l):u,n.tileProxy&&(r.tileProxy=n.tileProxy);var f=tA(r);return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rA(e,t)}(t,Zj.a),t}(),oA=r(47),iA=r.n(oA),aA=r(23),sA=r.n(aA);function lA(e){return(lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cA(e){return(cA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hA(e,t){return(hA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pA=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{},o=n.attributions||"Map Data <a href='http://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='http://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a> with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>";n.layerType=n.layerType||"vec",n.layerType=n.isLabel?{vec:"cva",ter:"cta",img:"cia"}[n.layerType]:n.layerType,n.matrixSet="EPSG:4326"===n.projection||"EPSG:4490"===n.projection?"c":"w",n.url||n.urls||(n.url="http://t{0-7}.tianditu.gov.cn/{layer}_{proj}/wmts?"),n.key&&(n.url="".concat(n.url,"tk=").concat(n.key)),n.url=n.url.replace("{layer}",n.layerType).replace("{proj}",n.matrixSet);var i,a,s=n.tileGrid||t.getTileGrid(n.projection||"EPSG:3857"),l=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",u={version:n.version||"1.0.0",format:n.format||"tiles",dimensions:n.dimensions||{},layer:n.layerType,matrixSet:n.matrixSet,tileGrid:s,style:n.style||"default",attributions:o,cacheSize:n.cacheSize,crossOrigin:l,opaque:void 0===n.opaque||n.opaque,maxZoom:{vec:18,ter:14,img:18}[n.layerType],reprojectionErrorThreshold:n.reprojectionErrorThreshold,url:n.url,urls:n.urls,projection:n.projection||"EPSG:3857",wrapX:n.wrapX};n.tileProxy&&(u.tileLoadFunction=function(e,t){e.getImage().src=c.tileProxy+encodeURIComponent(t)}),i=this,r=!(a=cA(t).call(this,u))||"object"!==lA(a)&&"function"!=typeof a?fA(i):a,n.tileProxy&&(r.tileProxy=n.tileProxy);var c=fA(r);return r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hA(e,t)}(t,iA.a),r=t,o=[{key:"getTileGrid",value:function(e){return"EPSG:4326"===e||"EPSG:4490"===e?t.default4326TileGrid():t.default3857TileGrid()}},{key:"default4326TileGrid",value:function(){for(var e=[],t=[],r=1;r<19;r++)e.push(1.40625/Math.pow(2,r)),t.push(r);return new sA.a({extent:[-180,-90,180,90],resolutions:e,origin:[-180,90],matrixIds:t,minZoom:1})}},{key:"default3857TileGrid",value:function(){for(var e=[],t=[],r=1;r<19;r++)e.push(156543.03392804062/Math.pow(2,r)),t.push(r);return new sA.a({extent:[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],resolutions:e,matrixIds:t,origin:[-20037508.3427892,20037508.3427892],minZoom:1})}}],(n=null)&&uA(r.prototype,n),o&&uA(r,o),t}();function yA(e){return(yA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mA(e,t){return!t||"object"!==yA(t)&&"function"!=typeof t?bA(e):t}function vA(e){return(vA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gA(e,t){return(gA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var SA=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===(e=e||{}).url)return mA(r);e.attributions=e.attributions||"Map Data <span>Â© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",e.format=e.format?e.format:"png";var n=e.url+"/tileImage."+e.format+"?";e.serverType=e.serverType||h.ISERVER,r=mA(this,vA(t).call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:"4"===aj.getOlVersion()?e.logo:null,opaque:e.opaque,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:function(r,n,a){o.tileGrid||(e.extent?(o.tileGrid=t.createTileGrid(e.extent),o.resolutions&&(o.tileGrid.resolutions=o.resolutions)):("EPSG:3857"===a.getCode()&&(o.tileGrid=t.createTileGrid([-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),o.extent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]),"EPSG:4326"===a.getCode()&&(o.tileGrid=t.createTileGrid([-180,-90,180,90]),o.extent=[-180,-90,180,90])));o.origin=o.tileGrid.getOrigin(0);var s=r[0],l=r[1],u=["4","5"].includes(aj.getOlVersion())?-r[2]-1:r[2],c=o.tileGrid.getResolution(s),f=a.getUnits()||g.DEGREE;"degrees"!==f&&"degree"!==f||(f=g.DEGREE);"m"!==f&&"meter"!==f||(f=g.METER);var h=aj.resolutionToScale(c,96,f),p=Vj.toSize(o.tileGrid.getTileSize(s,o.tmpSize)),y=function(){this._paramsChanged&&(this._layerUrl=i.call(this),this._paramsChanged=!1);return this._layerUrl||i.call(this)}.call(o)+encodeURI("&x="+l+"&y="+u+"&width="+p[0]+"&height="+p[1]+"&scale="+h);o.tileProxy&&(y=o.tileProxy+encodeURIComponent(y));o.cacheEnabled||(y+="&_t="+(new Date).getTime());return y},url:e.url,urls:e.urls,wrapX:void 0!==e.wrapX&&e.wrapX,cacheEnabled:e.cacheEnabled,layersID:e.layersID})),e.tileProxy&&(r.tileProxy=e.tileProxy),r.options=e,r._url=e.url,r.tileSetsIndex=-1,r.tempIndex=-1;var o=bA(r);function i(){return this._layerUrl=n+encodeURI(function(){this.requestParams=this.requestParams||function(){var t={};return t.redirect=void 0!==e.redirect&&e.redirect,t.transparent=void 0===e.transparent||e.transparent,t.cacheEnabled=!(!1===e.cacheEnabled),this.cacheEnabled=t.cacheEnabled,t._cache=t.cacheEnabled,this.origin&&(t.origin=JSON.stringify({x:this.origin[0],y:this.origin[1]})),e.prjCoordSys&&(t.prjCoordSys=JSON.stringify(e.prjCoordSys)),e.layersID&&(t.layersID=e.layersID.toString()),e.clipRegion instanceof Uj.a&&(e.clipRegionEnabled=!0,e.clipRegion=aj.toSuperMapGeometry((new KM.a).writeGeometryObject(e.clipRegion)),e.clipRegion=Te.toJSON(Rr.fromGeometry(e.clipRegion)),t.clipRegionEnabled=e.clipRegionEnabled,t.clipRegion=JSON.stringify(e.clipRegion)),e.overlapDisplayed?t.overlapDisplayed=!0:(t.overlapDisplayed=!1,e.overlapDisplayedOptions&&(t.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())),t.cacheEnabled&&e.tileversion&&(t.tileversion=e.tileversion.toString()),e.rasterfunction&&(t.rasterfunction=JSON.stringify(e.rasterfunction)),t}.call(this);var t=[];for(var r in this.requestParams)t.push(r+"="+this.requestParams[r]);return t.join("&")}.call(this)),this._layerUrl=function(e,t){var r,n,i=e;switch(t){case h.IPORTAL:(r=(n=hn.getToken(o._url))?new Yt(n,"token"):null)||(r=(n=hn.getKey(o._url))?new Yt(n,"key"):null);break;case h.ONLINE:r=(n=hn.getKey(o._url))?new Yt(n,"key"):null;break;default:r=(n=hn.getToken(o._url))?new Yt(n,"token"):null}return r&&(i+="&"+r.getUrlParameters()),i}(this._layerUrl,e.serverType),this._layerUrl}return r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gA(e,t)}(t,Mj.a),r=t,o=[{key:"optionsFromMapJSON",value:function(e,t){var r={};r.url=e,r.crossOrigin="anonymous";var n=[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top],o=function(){var e,r=n[2]-n[0],o=n[3]-n[1],i=r>=o?r:o;e=i===r?i/t.viewer.width:i/t.viewer.height;var a=[],s=g.METER;t.coordUnit===g.DEGREE&&(s=g.DEGREE);if(t.visibleScalesEnabled&&t.visibleScales&&t.visibleScales.length>0)for(var l=0;l<t.visibleScales.length;l++)a.push(aj.scaleToResolution(t.visibleScales[l],96,s));else for(var u=0;u<22;u++)a.push(e/Math.pow(2,u));return a.sort(function(e,t){return t-e})}();return r.tileGrid=new Rj.a({extent:n,resolutions:o}),r}},{key:"createTileGrid",value:function(e,t,r,n,o){var i=Hj.createXYZ({extent:e,maxZoom:t,minZoom:r,tileSize:n});return new Rj.a({extent:e,minZoom:r,origin:o,resolutions:i.getResolutions(),tileSize:i.getTileSize()})}}],(n=[{key:"setTileSetsInfo",value:function(e){this.tileSets=e,aj.isArray(this.tileSets)&&(this.tileSets=e[0]),this.tileSets&&(this.dispatchEvent({type:"tilesetsinfoloaded",value:{tileVersions:this.tileSets.tileVersions}}),this.changeTilesVersion())}},{key:"lastTilesVersion",value:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()}},{key:"nextTilesVersion",value:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()}},{key:"changeTilesVersion",value:function(){var e=this;if(null!=e.tileSets&&!(e.tempIndex===e.tileSetsIndex||this.tempIndex<0)){var t=e.tileSets.tileVersions;if(t&&e.tempIndex<t.length&&e.tempIndex>=0){var r=t[e.tempIndex].name;e.mergeTileVersionParam(r)&&(e.tileSetsIndex=e.tempIndex,e.dispatchEvent({type:"tileversionschanged",value:{tileVersion:t[e.tempIndex]}}))}}}},{key:"updateCurrentTileSetsIndex",value:function(e){this.tempIndex=e}},{key:"mergeTileVersionParam",value:function(e){return!!e&&(this.requestParams.tileversion=e,this._paramsChanged=!0,this.refresh(),!0)}}])&&dA(r.prototype,n),o&&dA(r,o),t}(),wA=1,_A=2,OA=4,xA=5,CA=484813681109536e-20,TA=Math.PI/2,PA=.16666666666666666,EA=.04722222222222222,kA=.022156084656084655,MA=1e-10,jA=.017453292519943295,AA=57.29577951308232,RA=Math.PI/4,LA=2*Math.PI,IA=3.14159265359,NA={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},FA={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},DA=/[\s_\-\/\(\)]/g;function GA(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),o=t.toLowerCase().replace(DA,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(DA,"")===o)return e[r]}var BA=function(e){var t,r,n,o={},i=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.split("=");return r.push(!0),e[r[0].toLowerCase()]=r[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){o.rf=parseFloat(e)},lat_0:function(e){o.lat0=e*jA},lat_1:function(e){o.lat1=e*jA},lat_2:function(e){o.lat2=e*jA},lat_ts:function(e){o.lat_ts=e*jA},lon_0:function(e){o.long0=e*jA},lon_1:function(e){o.long1=e*jA},lon_2:function(e){o.long2=e*jA},alpha:function(e){o.alpha=parseFloat(e)*jA},lonc:function(e){o.longc=e*jA},x_0:function(e){o.x0=parseFloat(e)},y_0:function(e){o.y0=parseFloat(e)},k_0:function(e){o.k0=parseFloat(e)},k:function(e){o.k0=parseFloat(e)},a:function(e){o.a=parseFloat(e)},b:function(e){o.b=parseFloat(e)},r_a:function(){o.R_A=!0},zone:function(e){o.zone=parseInt(e,10)},south:function(){o.utmSouth=!0},towgs84:function(e){o.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){o.to_meter=parseFloat(e)},units:function(e){o.units=e;var t=GA(FA,e);t&&(o.to_meter=t.to_meter)},from_greenwich:function(e){o.from_greenwich=e*jA},pm:function(e){var t=GA(NA,e);o.from_greenwich=(t||parseFloat(e))*jA},nadgrids:function(e){"@null"===e?o.datumCode="none":o.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(o.axis=e)}};for(t in i)r=i[t],t in a?"function"==typeof(n=a[t])?n(r):o[n]=r:o[t]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},UA=function(e){return new YA(e).output()},VA=1,HA=/\s/,zA=/[A-Za-z]/,qA=/[A-Za-z84]/,JA=/[,\]]/,WA=/[\d\.E\-\+]/;function YA(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=VA}function XA(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,o=r.reduce(function(e,t){return QA(t,e),e},n);t&&(e[t]=o)}function QA(e,t){if(Array.isArray(e)){var r,n=e.shift();if("PARAMETER"===n&&(n=e.shift()),1===e.length)return Array.isArray(e[0])?(t[n]={},void QA(e[0],t[n])):void(t[n]=e[0]);if(e.length)if("TOWGS84"!==n)switch(Array.isArray(n)||(t[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[n]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&QA(e[2],t[n]));case"SPHEROID":case"ELLIPSOID":return t[n]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&QA(e[3],t[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void XA(t,n,e);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return QA(e,t[n]);return XA(t,n,e)}else t[n]=e;else t[n]=!0}else t[e]=!0}function KA(e){return(KA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}YA.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;HA.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case VA:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},YA.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(JA.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},YA.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=VA)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=VA,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},YA.prototype.number=function(e){if(!WA.test(e)){if(JA.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},YA.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},YA.prototype.keyword=function(e){if(qA.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=VA)}if(!JA.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},YA.prototype.neutral=function(e){if(zA.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(WA.test(e))return this.word=e,void(this.state=3);if(!JA.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},YA.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var ZA=.017453292519943295;function $A(e){return e*ZA}var eR,tR=function(e){var t=UA(e),r=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",r]);var o={};return QA(t,o),function(e){"GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===KA(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var t=e.GEOGCS;function r(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(t=e),t&&(t.DATUM?e.datumCode=t.DATUM.name.toLowerCase():e.datumCode=t.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"===e.datumCode&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(e.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=t.DATUM.SPHEROID.a,e.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),t.DATUM&&t.DATUM.TOWGS84&&(e.datum_params=t.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",$A],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",$A],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",$A],["lat0","latitude_of_origin",$A],["lat0","standard_parallel_1",$A],["lat1","standard_parallel_1",$A],["lat2","standard_parallel_2",$A],["azimuth","Azimuth"],["alpha","azimuth",$A],["srsCode","name"]].forEach(function(t){return r=e,o=(n=t)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=$A(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(o),o};function rR(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?rR[e]=BA(arguments[1]):rR[e]=tR(arguments[1]):rR[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?rR.apply(t,e):rR(e)});if("string"==typeof e){if(e in rR)return rR[e]}else"EPSG"in e?rR["EPSG:"+e.EPSG]=e:"ESRI"in e?rR["ESRI:"+e.ESRI]=e:"IAU2000"in e?rR["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(eR=rR)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),eR("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),eR("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),eR.WGS84=eR["EPSG:4326"],eR["EPSG:3785"]=eR["EPSG:3857"],eR.GOOGLE=eR["EPSG:3857"],eR["EPSG:900913"]=eR["EPSG:3857"],eR["EPSG:102113"]=eR["EPSG:3857"];var nR=rR;var oR=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var iR=["3857","900913","3785","102113"];var aR=function(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in nR}(e))return nR[e];if(function(e){return oR.some(function(t){return e.indexOf(t)>-1})}(e)){var t=tR(e);if(function(e){var t=GA(e,"authority");if(t){var r=GA(t,"epsg");return r&&iR.indexOf(r)>-1}}(t))return nR["EPSG:3857"];var r=function(e){var t=GA(e,"extension");if(t)return GA(t,"proj4")}(t);return r?BA(r):t}return function(e){return"+"===e[0]}(e)?BA(e):void 0},sR=function(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)void 0!==(r=t[n])&&(e[n]=r);return e},lR=function(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)},uR=function(e){return e<0?-1:1},cR=function(e){return Math.abs(e)<=IA?e:e-uR(e)*LA},fR=function(e,t,r){var n=e*r,o=.5*e;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(TA-t))/n},hR=function(e,t){for(var r,n,o=.5*e,i=TA-2*Math.atan(t),a=0;a<=15;a++)if(r=e*Math.sin(i),i+=n=TA-2*Math.atan(t*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999};function pR(e){return e}var yR=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=lR(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,r,n=e.x,o=e.y;if(o*AA>90&&o*AA<-90&&n*AA>180&&n*AA<-180)return null;if(Math.abs(Math.abs(o)-TA)<=MA)return null;if(this.sphere)t=this.x0+this.a*this.k0*cR(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(RA+.5*o));else{var i=Math.sin(o),a=fR(this.e,o,i);t=this.x0+this.a*this.k0*cR(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n=e.x-this.x0,o=e.y-this.y0;if(this.sphere)r=TA-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=hR(this.e,i)))return null}return t=cR(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:pR,inverse:pR,names:["longlat","identity"]}],dR={},mR=[];function vR(e,t){var r=mR.length;return e.names?(mR[r]=e,e.names.forEach(function(e){dR[e.toLowerCase()]=r}),this):(console.log(t),!0)}var bR={start:function(){yR.forEach(vR)},add:vR,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==dR[t]&&mR[dR[t]]?mR[dR[t]]:void 0}},gR={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},SR=gR.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};gR.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var wR={};wR.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},wR.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},wR.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},wR.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},wR.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},wR.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},wR.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},wR.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},wR.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},wR.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},wR.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},wR.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},wR.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},wR.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},wR.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},wR.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},wR.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var _R=function(e,t,r,n,o,i){var a={};return a.datum_type=void 0===e||"none"===e?xA:OA,t&&(a.datum_params=t.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=wA),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=_A,a.datum_params[3]*=CA,a.datum_params[4]*=CA,a.datum_params[5]*=CA,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=r,a.b=n,a.es=o,a.ep2=i,a};function OR(e){return(OR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xR(e,t){if(!(this instanceof xR))return new xR(e);t=t||function(e){if(e)throw e};var r=aR(e);if("object"===OR(r)){var n=xR.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=GA(wR,r.datumCode);o&&(r.datum_params=o.towgs84?o.towgs84.split(","):null,r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var i,a,s,l,u,c,f,h=function(e,t,r,n,o){if(!e){var i=GA(gR,n);i||(i=SR),e=i.a,t=i.b,r=i.rf}return r&&!t&&(t=(1-1/r)*e),(0===r||Math.abs(e-t)<MA)&&(o=!0,t=e),{a:e,b:t,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(i=h.a,a=h.b,h.rf,s=r.R_A,c=((l=i*i)-(u=a*a))/l,f=0,s?(l=(i*=1-c*(PA+c*(EA+c*kA)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(l-u)/u}),y=r.datum||_R(r.datumCode,r.datum_params,h.a,h.b,p.es,p.ep2);sR(this,r),sR(this,n),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),t(null,this)}else t(e)}else t(e)}xR.projections=bR,xR.projections.start();var CR=xR;function TR(e,t,r){var n,o,i,a,s=e.x,l=e.y,u=e.z?e.z:0;if(l<-TA&&l>-1.001*TA)l=-TA;else if(l>TA&&l<1.001*TA)l=TA;else{if(l<-TA)return{x:-1/0,y:-1/0,z:e.z};if(l>TA)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(l),a=Math.cos(l),i=o*o,{x:((n=r/Math.sqrt(1-t*i))+u)*a*Math.cos(s),y:(n+u)*a*Math.sin(s),z:(n*(1-t)+u)*o}}function PR(e,t,r,n){var o,i,a,s,l,u,c,f,h,p,y,d,m,v,b,g=e.x,S=e.y,w=e.z?e.z:0;if(o=Math.sqrt(g*g+S*S),i=Math.sqrt(g*g+S*S+w*w),o/r<1e-12){if(v=0,i/r<1e-12)return TA,b=-n,{x:e.x,y:e.y,z:e.z}}else v=Math.atan2(S,g);a=w/i,f=(s=o/i)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*s*s)),h=a*l,m=0;do{m++,u=t*(c=r/Math.sqrt(1-t*h*h))/(c+(b=o*f+w*h-c*(1-t*h*h))),d=(y=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*f-(p=s*(1-u)*l)*h,f=p,h=y}while(d*d>1e-24&&m<30);return{x:v,y:Math.atan(y/Math.abs(p)),z:b}}function ER(e){return e===wA||e===_A}var kR=function(e,t,r){return function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===wA?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==_A||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t)?r:e.datum_type===xA||t.datum_type===xA?r:e.es!==t.es||e.a!==t.a||ER(e.datum_type)||ER(t.datum_type)?(r=TR(r,e.es,e.a),ER(e.datum_type)&&(r=function(e,t,r){if(t===wA)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===_A){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],l=r[5],u=r[6];return{x:u*(e.x-l*e.y+s*e.z)+n,y:u*(l*e.x+e.y-a*e.z)+o,z:u*(-s*e.x+a*e.y+e.z)+i}}}(r,e.datum_type,e.datum_params)),ER(t.datum_type)&&(r=function(e,t,r){if(t===wA)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===_A){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],l=r[5],u=r[6],c=(e.x-n)/u,f=(e.y-o)/u,h=(e.z-i)/u;return{x:c+l*f-s*h,y:-l*c+f+a*h,z:s*c-a*f+h}}}(r,t.datum_type,t.datum_params)),PR(r,t.es,t.a,t.b)):r},MR=function(e,t,r){var n,o,i,a=r.x,s=r.y,l=r.z||0,u={};for(i=0;i<3;i++)if(!t||2!==i||void 0!==r.z)switch(0===i?(n=a,o="x"):1===i?(n=s,o="y"):(n=l,o="z"),e.axis[i]){case"e":u[o]=n;break;case"w":u[o]=-n;break;case"n":u[o]=n;break;case"s":u[o]=-n;break;case"u":void 0!==r[o]&&(u.z=n);break;case"d":void 0!==r[o]&&(u.z=-n);break;default:return null}return u},jR=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},AR=function(e){RR(e.x),RR(e.y)};function RR(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function LR(e,t,r){var n;return Array.isArray(r)&&(r=jR(r)),AR(r),e.datum&&t.datum&&function(e,t){return(e.datum.datum_type===wA||e.datum.datum_type===_A)&&"WGS84"!==t.datumCode||(t.datum.datum_type===wA||t.datum.datum_type===_A)&&"WGS84"!==e.datumCode}(e,t)&&(r=LR(e,n=new CR("WGS84"),r),e=n),"enu"!==e.axis&&(r=MR(e,!1,r)),"longlat"===e.projName?r={x:r.x*jA,y:r.y*jA,z:r.z||0}:(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r)),e.from_greenwich&&(r.x+=e.from_greenwich),r=kR(e.datum,t.datum,r),t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*AA,y:r.y*AA,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),"enu"!==t.axis?MR(t,!0,r):r}var IR=CR("WGS84");function NR(e,t,r){var n,o,i;return Array.isArray(r)?(n=LR(e,t,r)||{x:NaN,y:NaN},r.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(r.splice(3)):[n.x,n.y,r[2]].concat(r.splice(3)):[n.x,n.y].concat(r.splice(2)):[n.x,n.y]):(o=LR(e,t,r),2===(i=Object.keys(r)).length?o:(i.forEach(function(n){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=r[n]}),o))}function FR(e){return e instanceof CR?e:e.oProj?e.oProj:CR(e)}var DR=function(e,t,r){e=FR(e);var n,o=!1;return void 0===t?(t=e,e=IR,o=!0):(void 0!==t.x||Array.isArray(t))&&(r=t,t=e,e=IR,o=!0),t=FR(t),r?NR(e,t,r):(n={forward:function(r){return NR(e,t,r)},inverse:function(r){return NR(t,e,r)}},o&&(n.oProj=t),n)},GR=6,BR="AJSAJS",UR="AFAFAF",VR=65,HR=73,zR=79,qR=86,JR=90,WR={forward:YR,inverse:function(e){var t=ZR(eL(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:XR};function YR(e,t){return t=t||5,function(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(p=e.easting,y=e.northing,d=e.zoneNumber,m=$R(d),v=Math.floor(p/1e5),b=Math.floor(y/1e5)%20,o=v,i=b,a=m,s=a-1,l=BR.charCodeAt(s),u=UR.charCodeAt(s),c=l+o-1,f=u+i,h=!1,c>JR&&(c=c-JR+VR-1,h=!0),(c===HR||l<HR&&c>HR||(c>HR||l<HR)&&h)&&c++,(c===zR||l<zR&&c>zR||(c>zR||l<zR)&&h)&&++c===HR&&c++,c>JR&&(c=c-JR+VR-1),f>qR?(f=f-qR+VR-1,h=!0):h=!1,(f===HR||u<HR&&f>HR||(f>HR||u<HR)&&h)&&f++,(f===zR||u<zR&&f>zR||(f>zR||u<zR)&&h)&&++f===HR&&f++,f>qR&&(f=f-qR+VR-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,t)+n.substr(n.length-5,t);var o,i,a,s,l,u,c,f,h;var p,y,d,m,v,b}(function(e){var t,r,n,o,i,a,s,l=e.lat,u=e.lon,c=6378137,f=QR(l),h=QR(u);s=Math.floor((u+180)/6)+1,180===u&&(s=60);l>=56&&l<64&&u>=3&&u<12&&(s=32);l>=72&&l<84&&(u>=0&&u<9?s=31:u>=9&&u<21?s=33:u>=21&&u<33?s=35:u>=33&&u<42&&(s=37));a=QR(6*(s-1)-180+3),.006739496752268451,t=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(h-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var p=.9996*t*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,y=.9996*(i+t*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(p),zoneNumber:s,zoneLetter:function(e){var t="Z";84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C");return t}(l)}}({lat:e[1],lon:e[0]}),t)}function XR(e){var t=ZR(eL(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function QR(e){return e*(Math.PI/180)}function KR(e){return e/Math.PI*180}function ZR(e){var t=e.northing,r=e.easting,n=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var i,a,s,l,u,c,f,h,p=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,m=t;n<"N"&&(m-=1e7),c=6*(o-1)-180+3,h=(f=m/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),i=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),l=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),u=d/(.9996*i);var v=h-i*Math.tan(h)/l*(u*u/2-(5+3*a+10*s-4*s*s-.06065547077041606)*u*u*u*u/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*u*u*u*u*u*u/720);v=KR(v);var b,g=(u-(1+2*a+s)*u*u*u/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*u*u*u*u*u/120)/Math.cos(h);if(g=c+KR(g),e.accuracy){var S=ZR({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});b={top:S.lat,right:S.lon,bottom:v,left:g}}else b={lat:v,lon:g};return b}function $R(e){var t=e%GR;return 0===t&&(t=GR),t}function eL(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,o="",i=0;!/[A-Z]/.test(t=e.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+e;o+=t,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;n=e.substring(i,i+=2);for(var l=$R(a),u=function(e,t){var r=BR.charCodeAt(t-1),n=1e5,o=!1;for(;r!==e.charCodeAt(0);){if(++r===HR&&r++,r===zR&&r++,r>JR){if(o)throw"Bad character: "+e;r=VR,o=!0}n+=1e5}return n}(n.charAt(0),l),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var r=UR.charCodeAt(t-1),n=0,o=!1;for(;r!==e.charCodeAt(0);){if(++r===HR&&r++,r===zR&&r++,r>qR){if(o)throw"Bad character: "+e;r=VR,o=!0}n+=1e5}return n}(n.charAt(1),l);c<tL(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,y,d=f/2,m=0,v=0;return d>0&&(h=1e5/Math.pow(10,d),p=e.substring(i,i+d),m=parseFloat(p)*h,y=e.substring(i+d),v=parseFloat(y)*h),{easting:m+u,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function tL(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function rL(e){return(rL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nL(e,t,r){if(!(this instanceof nL))return new nL(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===rL(e))this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}nL.fromMGRS=function(e){return new nL(XR(e))},nL.prototype.toMGRS=function(e){return YR([this.x,this.y],e)};var oL=nL,iL=.01068115234375,aL=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*iL))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*iL)));var r=e*e;return t[2]=r*(.46875-e*(.013020833333333334+.007120768229166667*e)),r*=e,t[3]=r*(.3645833333333333-.005696614583333333*e),t[4]=r*e*.3076171875,t},sL=function(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},lL=function(e,t,r){for(var n=1/(1-t),o=e,i=20;i;--i){var a=Math.sin(o),s=1-t*a*a;if(o-=s=(sL(o,a,Math.cos(o),r)-e)*(s*Math.sqrt(s))*n,Math.abs(s)<MA)return o}return o};var uL={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=aL(this.es),this.ml0=sL(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,r,n,o=e.x,i=e.y,a=cR(o-this.long0),s=Math.sin(i),l=Math.cos(i);if(this.es){var u=l*a,c=Math.pow(u,2),f=this.ep2*Math.pow(l,2),h=Math.pow(f,2),p=Math.abs(l)>MA?Math.tan(i):0,y=Math.pow(p,2),d=Math.pow(y,2);t=1-this.es*Math.pow(s,2),u/=Math.sqrt(t);var m=sL(i,s,l,this.en);r=this.a*(this.k0*u*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,n=this.a*(this.k0*(m-this.ml0+s*a*u/2*(1+c/12*(5-y+9*f+4*h+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var v=l*Math.sin(a);if(Math.abs(Math.abs(v)-1)<MA)return 93;if(r=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=l*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>MA)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=r,e.y=n,e},inverse:function(e){var t,r,n,o,i=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,r=lL(t,this.es,this.en),Math.abs(r)<TA){var s=Math.sin(r),l=Math.cos(r),u=Math.abs(l)>MA?Math.tan(r):0,c=this.ep2*Math.pow(l,2),f=Math.pow(c,2),h=Math.pow(u,2),p=Math.pow(h,2);t=1-this.es*Math.pow(s,2);var y=i*Math.sqrt(t)/this.k0,d=Math.pow(y,2);n=r-(t*=u)*d/(1-this.es)*.5*(1-d/12*(5+3*h-9*c*h+c-4*f-d/30*(61+90*h-252*c*h+45*p+46*c-d/56*(1385+3633*h+4095*p+1574*p*h)))),o=cR(this.long0+y*(1-d/6*(1+2*h+c-d/20*(5+28*h+24*p+8*c*h+6*c-d/42*(61+662*h+1320*p+720*p*h))))/l)}else n=TA*uR(a),o=0;else{var m=Math.exp(i/this.k0),v=.5*(m-1/m),b=this.lat0+a/this.k0,g=Math.cos(b);t=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(v,2))),n=Math.asin(t),a<0&&(n=-n),o=0===v&&0===g?0:cR(Math.atan2(v,g)+this.long0)}return e.x=o,e.y=n,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},cL=function(e){var t=Math.exp(e);return t=(t-1/t)/2},fL=function(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},hL=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}(t*(1+t/(fL(1,t)+1))),e<0?-t:t},pL=function(e,t){for(var r,n=2*Math.cos(2*t),o=e.length-1,i=e[o],a=0;--o>=0;)r=n*i-a+e[o],a=i,i=r;return t+r*Math.sin(2*t)},yL=function(e,t){for(var r,n=2*Math.cos(t),o=e.length-1,i=e[o],a=0;--o>=0;)r=n*i-a+e[o],a=i,i=r;return Math.sin(t)*r},dL=function(e,t,r){for(var n,o,i=Math.sin(t),a=Math.cos(t),s=cL(r),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(r),u=2*a*l,c=-2*i*s,f=e.length-1,h=e[f],p=0,y=0,d=0;--f>=0;)n=y,o=p,h=u*(y=h)-n-c*(p=d)+e[f],d=c*y-o+u*p;return[(u=i*l)*h-(c=a*s)*d,u*d+c*h]};var mL={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),r*=t,this.cgb[1]=r*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r*=t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),r*=t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(t*(-24832/14175)-2.4)),r*=t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r*=t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),r*=t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r*=t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r*=t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r*=t,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=pL(this.cbg,this.lat0);this.Zb=-this.Qn*(n+yL(this.gtu,2*n))},forward:function(e){var t=cR(e.x-this.long0),r=e.y;r=pL(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(t),a=Math.cos(t);r=Math.atan2(n,a*o),t=Math.atan2(i*o,fL(n,o*a)),t=hL(Math.tan(t));var s,l,u=dL(this.gtu,2*r,2*t);return r+=u[0],t+=u[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,l=1/0),e.x=s,e.y=l,e},inverse:function(e){var t,r,n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=dL(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(cL(n));var a=Math.sin(o),s=Math.cos(o),l=Math.sin(n),u=Math.cos(n);o=Math.atan2(a*u,fL(l,u*s)),n=Math.atan2(l,u*s),t=cR(n+this.long0),r=pL(this.cgb,o)}else t=1/0,r=1/0;return e.x=t,e.y=r,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},vL=function(e,t){if(void 0===e){if((e=Math.floor(30*(cR(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e};var bL={init:function(){var e=vL(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*jA,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,mL.init.apply(this),this.forward=mL.forward,this.inverse=mL.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},gL=function(e,t){return Math.pow((1-e)/(1+e),t)},SL=20;var wL={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+RA)/(Math.pow(Math.tan(.5*this.lat0+RA),this.C)*gL(this.e*e,this.ratexp))},forward:function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+RA),this.C)*gL(this.e*Math.sin(r),this.ratexp))-TA,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+RA)/this.K,1/this.C),o=SL;o>0&&(r=2*Math.atan(n*gL(this.e*Math.sin(e.y),-.5*this.e))-TA,!(Math.abs(r-e.y)<1e-14));--o)e.y=r;return o?(e.x=t,e.y=r,e):null},names:["gauss"]};var _L={init:function(){wL.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,r,n,o;return e.x=cR(e.x-this.long0),wL.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=o*r*Math.sin(e.x),e.y=o*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,r,n,o,i;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,i=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(i,this.R2);t=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+e.y*t*this.cosc0/i),n=Math.atan2(e.x*t,i*this.cosc0*r-e.y*this.sinc0*t)}else o=this.phic0,n=0;return e.x=n,e.y=o,wL.inverse.apply(this,[e]),e.x=cR(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var OL={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=MA&&(this.k0=.5*(1+uR(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=MA&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=MA&&(this.k0=.5*this.cons*lR(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/fR(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=lR(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-TA,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,r,n,o,i,a,s=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),f=cR(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=MA&&Math.abs(l+this.lat0)<=MA?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(f)),e.x=this.a*t*c*Math.sin(f)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(f))+this.y0,e):(r=2*Math.atan(this.ssfn_(l,u,this.e))-TA,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=MA?(i=fR(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*i/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<MA?(t=2*this.a*this.k0/(1+o*Math.cos(f)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),e.y=t*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),e.x=t*o*Math.sin(f)+this.x0,e))},inverse:function(e){var t,r,n,o,i;e.x-=this.x0,e.y-=this.y0;var a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,r=this.lat0,a<=MA?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=Math.abs(this.coslat0)<MA?this.lat0>0?cR(this.long0+Math.atan2(e.x,-1*e.y)):cR(this.long0+Math.atan2(e.x,e.y)):cR(this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=r,e)}if(Math.abs(this.coslat0)<=MA){if(a<=MA)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*hR(this.e,n),t=this.con*cR(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=MA?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/a),t=cR(this.long0+Math.atan2(e.x*Math.sin(o),a*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),r=-1*hR(this.e,Math.tan(.5*(TA+i)));return e.x=t,e.y=r,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,r){return t*=r,Math.tan(.5*(TA+e))*Math.pow((1-t)/(1+t),.5*r)}};var xL={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+i*t)/(1-i*t));this.K=a-this.alpha*s+this.alpha*i/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,l=0,u=i,c=-1e3,f=0;Math.abs(u-c)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=u,e},names:["somerc"]};var CL={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),r=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n,o,i=fR(this.e,this.lat0,e),a=this.bl/t*Math.sqrt((1-this.es)/(1-r*r));if(a*a<1&&(a=1),isNaN(this.longc)){var s=fR(this.e,this.lat1,Math.sin(this.lat1)),l=fR(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(i,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(i,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);o=.5*((n=this.el/u)-1/n);var f=(this.el*this.el-c*u)/(this.el*this.el+c*u),h=(c-u)/(c+u),p=cR(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*p)/h)/this.bl,this.long0=cR(this.long0);var y=cR(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/o),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else n=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=n*Math.pow(i,this.bl),o=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(e){var t,r,n,o=e.x,i=e.y,a=cR(o-this.long0);if(Math.abs(Math.abs(i)-TA)<=MA)n=i>0?-1:1,r=this.al/this.bl*Math.log(Math.tan(RA+n*this.gamma0*.5)),t=-1*n*TA*this.al/this.bl;else{var s=fR(this.e,i,Math.sin(i)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),f=Math.sin(this.bl*a),h=(u*Math.sin(this.gamma0)-f*Math.cos(this.gamma0))/c;r=Math.abs(Math.abs(h)-1)<=MA?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-h)/(1+h))/this.bl,t=Math.abs(Math.cos(this.bl*a))<=MA?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+f*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+r):(t-=this.uc,e.x=this.x0+r*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-r*Math.sin(this.alpha)),e},inverse:function(e){var t,r;this.no_rot?(r=e.y-this.y0,t=e.x-this.x0):(r=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var n=Math.exp(-1*this.bl*r/this.al),o=.5*(n-1/n),i=.5*(n+1/n),a=Math.sin(this.bl*t/this.al),s=(a*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/i,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<MA?(e.x=this.long0,e.y=TA):Math.abs(s+1)<MA?(e.x=this.long0,e.y=-1*TA):(e.y=hR(this.e,l),e.x=cR(this.long0-Math.atan2(o*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var TL={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<MA)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=lR(this.e,t,r),o=fR(this.e,this.lat1,t),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=lR(this.e,i,a),l=fR(this.e,this.lat2,i),u=fR(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>MA?this.ns=Math.log(n/s)/Math.log(o/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=MA&&(r=uR(r)*(TA-2*MA));var n,o,i=Math.abs(Math.abs(r)-TA);if(i>MA)n=fR(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*cR(t-this.long0);return e.x=this.k0*(o*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,e},inverse:function(e){var t,r,n,o,i,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),r=1):(t=-Math.sqrt(a*a+s*s),r=-1);var l=0;if(0!==t&&(l=Math.atan2(r*a,r*s)),0!==t||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),-9999===(o=hR(this.e,n)))return null}else o=-TA;return i=cR(l/this.ns+this.long0),e.x=i,e.y=o,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var PL={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,r,n,o,i,a,s,l=e.x,u=e.y,c=cR(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,r,n,o,i,a,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),i=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,s=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,u+=1}while(0===s&&u<15);return u>=15?null:e},names:["Krovak","krovak"]},EL=function(e,t,r,n,o){return e*o-t*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)},kL=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},ML=function(e){return.375*e*(1+.25*e*(1+.46875*e))},jL=function(e){return.05859375*e*e*(1+.75*e)},AL=function(e){return e*e*e*(35/3072)},RL=function(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)},LL=function(e){return Math.abs(e)<TA?e:e-uR(e)*Math.PI},IL=function(e,t,r,n,o){var i,a;i=e/t;for(var s=0;s<15;s++)if(i+=a=(e-(t*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(t-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN};var NL={init:function(){this.sphere||(this.e0=kL(this.es),this.e1=ML(this.es),this.e2=jL(this.es),this.e3=AL(this.es),this.ml0=this.a*EL(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,r,n=e.x,o=e.y;if(n=cR(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=RL(this.a,this.e,i),l=Math.tan(o)*Math.tan(o),u=n*Math.cos(o),c=u*u,f=this.es*a*a/(1-this.es);t=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120)),r=this.a*EL(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-l+6*f)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n=e.x/this.a,o=e.y/this.a;if(this.sphere){var i=o+this.lat0;t=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=this.ml0/this.a+o,s=IL(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-TA)<=MA)return e.x=this.long0,e.y=TA,o<0&&(e.y*=-1),e;var l=RL(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),f=n*this.a/l,h=f*f;t=s-l*Math.tan(s)/u*f*f*(.5-(1+3*c)*f*f/24),r=f*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(s)}return e.x=cR(r+this.long0),e.y=LL(t),e},names:["Cassini","Cassini_Soldner","cass"]},FL=function(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t};var DL=.3333333333333333,GL=.17222222222222222,BL=.10257936507936508,UL=.06388888888888888,VL=.0664021164021164,HL=.016415012942191543;var zL={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-TA)<MA?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<MA?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=FL(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,r=[];return r[0]=e*DL,t=e*e,r[0]+=t*GL,r[1]=t*UL,t*=e,r[0]+=t*BL,r[1]+=t*VL,r[2]=t*HL,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=FL(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,r,n,o,i,a,s,l,u,c,f=e.x,h=e.y;if(f=cR(f-this.long0),this.sphere){if(i=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=MA)return null;t=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.phi0)<MA)return null;r=RA-.5*h,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(h),a=FL(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=TA+h,a=this.qp-a;break;case this.S_POLE:u=h-TA,a=this.qp+a}if(Math.abs(u)<MA)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),r=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,t=this.xmf*u*l*o;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(u=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?u:-u)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,o,i,a,s,l,u,c,f=e.x/this.a,h=e.y/this.a;if(this.sphere){var p,y=0,d=0;if((r=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(r),y=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=MA?0:Math.asin(h*d/p),f*=d,h=y*p;break;case this.OBLIQ:r=Math.abs(p)<=MA?this.phi0:Math.asin(y*this.sinph0+h*d*this.cosph0/p),f*=d*this.cosph0,h=(y-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:h=-h,r=TA-r;break;case this.S_POLE:r-=TA}t=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<MA)return e.x=0,e.y=this.phi0,e;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+h*o*this.cosb1/a,i=this.qp*s,h=a*this.cosb1*n-h*this.sinb1*o):(s=h*o/a,i=this.qp*s,h=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(i=f*f+h*h))return e.x=0,e.y=this.phi0,e;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(f,h),l=Math.asin(s),u=this.apa,c=l+l,r=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return e.x=cR(this.long0+t),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},qL=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)};var JL={init:function(){Math.abs(this.lat1+this.lat2)<MA||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=lR(this.e3,this.sin_po,this.cos_po),this.qs1=FL(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=lR(this.e3,this.sin_po,this.cos_po),this.qs2=FL(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=FL(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>MA?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=FL(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*cR(t-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o,i,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),o=0,0!==t&&(o=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=cR(o/this.ns0+this.long0),e.x=i,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var r,n,o,i,a,s=qL(.5*t);if(e<MA)return s;for(var l=e*e,u=1;u<=25;u++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=e*r)*o)*i/n*(t/(1-l)-r/i+.5/e*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var WL={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,r,n,o,i,a,s,l=e.x,u=e.y;return n=cR(l-this.long0),t=Math.sin(u),r=Math.cos(u),o=Math.cos(n),(i=this.sin_p14*t+this.cos_p14*r*o)>0||Math.abs(i)<=MA?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*o)),e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o,i,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(t,this.rc),r=Math.sin(o),n=Math.cos(o),a=qL(n*this.sin_p14+e.y*r*this.cos_p14/t),i=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),i=cR(this.long0+i)):(a=this.phic0,i=0),e.x=i,e.y=a,e},names:["gnom"]},YL=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*TA:TA;for(var n,o,i,a,s=Math.asin(.5*t),l=0;l<30;l++)if(o=Math.sin(s),i=Math.cos(s),a=e*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(t/(1-e*e)-o/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN};var XL={init:function(){this.sphere||(this.k0=lR(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,r,n=e.x,o=e.y,i=cR(n-this.long0);if(this.sphere)t=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=FL(this.e,Math.sin(o));t=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=r,e},inverse:function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=cR(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=YL(this.e,2*e.y*this.k0/this.a),t=cR(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},names:["cea"]};var QL={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,r=e.y,n=cR(t-this.long0),o=LL(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*o,e},inverse:function(e){var t=e.x,r=e.y;return e.x=cR(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=LL(this.lat0+(r-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},KL=20;var ZL={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=kL(this.es),this.e1=ML(this.es),this.e2=jL(this.es),this.e3=AL(this.es),this.ml0=this.a*EL(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,r,n,o=e.x,i=e.y,a=cR(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=MA?(t=this.a*a,r=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(i),r=this.a*(LL(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=MA)t=this.a*a,r=-1*this.ml0;else{var s=RL(this.a,this.e,Math.sin(i))/Math.tan(i);t=s*Math.sin(n),r=this.a*EL(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){var t,r,n,o,i,a,s,l,u;if(n=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=MA)t=cR(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,l=a,i=KL;i;--i)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=MA){r=l;break}t=cR(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=MA)r=0,t=cR(this.long0+n/this.a);else{var f,h,p,y,d;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,l=a,i=KL;i;--i)if(d=this.e*Math.sin(l),f=Math.sqrt(1-d*d)*Math.tan(l),h=this.a*EL(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(f*(y=h/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*l)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*p-2/Math.sin(2*l))-p),Math.abs(u)<=MA){r=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=cR(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},names:["Polyconic","poly"]};var $L={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,r=e.x,n=e.y-this.lat0,o=r-this.long0,i=n/CA*1e-5,a=o,s=1,l=0;for(t=1;t<=10;t++)s*=i,l+=this.A[t]*s;var u,c=l,f=a,h=1,p=0,y=0,d=0;for(t=1;t<=6;t++)u=p*c+h*f,h=h*c-p*f,p=u,y=y+this.B_re[t]*h-this.B_im[t]*p,d=d+this.B_im[t]*h+this.B_re[t]*p;return e.x=d*this.a+this.x0,e.y=y*this.a+this.y0,e},inverse:function(e){var t,r,n=e.x,o=e.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,l=1,u=0,c=0,f=0;for(t=1;t<=6;t++)r=u*a+l*s,l=l*a-u*s,u=r,c=c+this.C_re[t]*l-this.C_im[t]*u,f=f+this.C_im[t]*l+this.C_re[t]*u;for(var h=0;h<this.iterations;h++){var p,y=c,d=f,m=a,v=s;for(t=2;t<=6;t++)p=d*c+y*f,y=y*c-d*f,d=p,m+=(t-1)*(this.B_re[t]*y-this.B_im[t]*d),v+=(t-1)*(this.B_im[t]*y+this.B_re[t]*d);y=1,d=0;var b=this.B_re[1],g=this.B_im[1];for(t=2;t<=6;t++)p=d*c+y*f,y=y*c-d*f,d=p,b+=t*(this.B_re[t]*y-this.B_im[t]*d),g+=t*(this.B_im[t]*y+this.B_re[t]*d);var S=b*b+g*g;c=(m*b+v*g)/S,f=(v*b-m*g)/S}var w=c,_=f,O=1,x=0;for(t=1;t<=9;t++)O*=w,x+=this.D[t]*O;var C=this.lat0+x*CA*1e5,T=this.long0+_;return e.x=T,e.y=C,e},names:["New_Zealand_Map_Grid","nzmg"]};var eI={init:function(){},forward:function(e){var t=e.x,r=e.y,n=cR(t-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=o,e.y=i,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=cR(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},names:["Miller_Cylindrical","mill"]},tI=20;var rI={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=aL(this.es)},forward:function(e){var t,r,n=e.x,o=e.y;if(n=cR(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=tI;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<MA)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;t=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var l=Math.sin(o),u=Math.cos(o);r=this.a*sL(o,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n,o;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=qL((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=qL(Math.sin(t)/this.n)),n=cR(n+this.long0),t=LL(t)):(t=lL(e.y/this.a,this.es,this.en),(o=Math.abs(t))<TA?(o=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t)),n=cR(r)):o-MA<TA&&(n=this.long0)),e.x=n,e.y=t,e},names:["Sinusoidal","sinu"]};var nI={init:function(){},forward:function(e){for(var t=e.x,r=e.y,n=cR(t-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<MA)break}o/=2,Math.PI/2-Math.abs(r)<MA&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,l=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=s,e.y=l,e},inverse:function(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=cR(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return e.x=n,e.y=o,e},names:["Mollweide","moll"]};var oI={init:function(){Math.abs(this.lat1+this.lat2)<MA||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=kL(this.es),this.e1=ML(this.es),this.e2=jL(this.es),this.e3=AL(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=lR(this.e,this.sinphi,this.cosphi),this.ml1=EL(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<MA?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=lR(this.e,this.sinphi,this.cosphi),this.ml2=EL(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=EL(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,r=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var o=EL(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-o)}var i=this.ns*cR(r-this.long0),a=this.x0+t*Math.sin(i),s=this.y0+this.rh-t*Math.cos(i);return e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var i=0;if(0!==r&&(i=Math.atan2(t*e.x,t*e.y)),this.sphere)return o=cR(this.long0+i/this.ns),n=LL(this.g-r/this.a),e.x=o,e.y=n,e;var a=this.g-r/this.a;return n=IL(a,this.e0,this.e1,this.e2,this.e3),o=cR(this.long0+i/this.ns),e.x=o,e.y=n,e},names:["Equidistant_Conic","eqdc"]};var iI={init:function(){this.R=this.a},forward:function(e){var t,r,n=e.x,o=e.y,i=cR(n-this.long0);Math.abs(o)<=MA&&(t=this.x0+this.R*i,r=this.y0);var a=qL(2*Math.abs(o/Math.PI));(Math.abs(i)<=MA||Math.abs(Math.abs(o)-TA)<=MA)&&(t=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),f=c/(u+c-1),h=f*f,p=f*(2/u-1),y=p*p,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(l*(f-y)*(f-y)-(y+l)*(h-y)))/(y+l);i<0&&(d=-d),t=this.x0+d;var m=l+f;return d=Math.PI*this.R*(p*m-s*Math.sqrt((y+l)*(l+1)-m*m))/(y+l),r=o>=0?this.y0+d:this.y0-d,e.x=t,e.y=r,e},inverse:function(e){var t,r,n,o,i,a,s,l,u,c,f,h;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,i=(n=e.x/f)*n+(o=e.y/f)*o,f=3*(o*o/(l=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,r=e.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(n)<MA?this.long0:cR(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),e.x=t,e.y=r,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var aI={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,r,n,o,i,a,s,l,u,c,f,h,p,y,d,m,v,b,g,S,w,_,O=e.x,x=e.y,C=Math.sin(e.y),T=Math.cos(e.y),P=cR(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=MA?(e.x=this.x0+this.a*(TA-x)*Math.sin(P),e.y=this.y0-this.a*(TA-x)*Math.cos(P),e):Math.abs(this.sin_p12+1)<=MA?(e.x=this.x0+this.a*(TA+x)*Math.sin(P),e.y=this.y0+this.a*(TA+x)*Math.cos(P),e):(b=this.sin_p12*C+this.cos_p12*T*Math.cos(P),v=(m=Math.acos(b))/Math.sin(m),e.x=this.x0+this.a*v*T*Math.sin(P),e.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*T*Math.cos(P)),e):(t=kL(this.es),r=ML(this.es),n=jL(this.es),o=AL(this.es),Math.abs(this.sin_p12-1)<=MA?(i=this.a*EL(t,r,n,o,TA),a=this.a*EL(t,r,n,o,x),e.x=this.x0+(i-a)*Math.sin(P),e.y=this.y0-(i-a)*Math.cos(P),e):Math.abs(this.sin_p12+1)<=MA?(i=this.a*EL(t,r,n,o,TA),a=this.a*EL(t,r,n,o,x),e.x=this.x0+(i+a)*Math.sin(P),e.y=this.y0+(i+a)*Math.cos(P),e):(s=C/T,l=RL(this.a,this.e,this.sin_p12),u=RL(this.a,this.e,C),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*T)),g=0===(f=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=MA?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(P)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*g*(1-(S=g*g)*(d=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-d)/6+(w=S*g)/8*(y=h*p)*(1-2*d)+(_=w*g)/120*(d*(4-7*d)-3*h*h*(1-7*d))-_*g/48*y),e.x=this.x0+m*Math.sin(f),e.y=this.y0+m*Math.cos(f),e))},inverse:function(e){var t,r,n,o,i,a,s,l,u,c,f,h,p,y,d,m,v,b,g,S,w,_;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*TA*this.a)return;return r=t/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(t)<=MA?a=this.lat0:(a=qL(o*this.sin_p12+e.y*n*this.cos_p12/t),s=Math.abs(this.lat0)-TA,i=Math.abs(s)<=MA?this.lat0>=0?cR(this.long0+Math.atan2(e.x,-e.y)):cR(this.long0-Math.atan2(-e.x,e.y)):cR(this.long0+Math.atan2(e.x*n,t*this.cos_p12*o-e.y*this.sin_p12*n))),e.x=i,e.y=a,e}return l=kL(this.es),u=ML(this.es),c=jL(this.es),f=AL(this.es),Math.abs(this.sin_p12-1)<=MA?(h=this.a*EL(l,u,c,f,TA),t=Math.sqrt(e.x*e.x+e.y*e.y),a=IL((h-t)/this.a,l,u,c,f),i=cR(this.long0+Math.atan2(e.x,-1*e.y)),e.x=i,e.y=a,e):Math.abs(this.sin_p12+1)<=MA?(h=this.a*EL(l,u,c,f,TA),t=Math.sqrt(e.x*e.x+e.y*e.y),a=IL((t-h)/this.a,l,u,c,f),i=cR(this.long0+Math.atan2(e.x,e.y)),e.x=i,e.y=a,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),d=Math.atan2(e.x,e.y),p=RL(this.a,this.e,this.sin_p12),m=Math.cos(d),b=-(v=this.e*this.cos_p12*m)*v/(1-this.es),g=3*this.es*(1-b)*this.sin_p12*this.cos_p12*m/(1-this.es),_=1-b*(w=(S=t/p)-b*(1+b)*Math.pow(S,3)/6-g*(1+3*b)*Math.pow(S,4)/24)*w/2-S*w*w*w/6,y=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*m),i=cR(this.long0+Math.asin(Math.sin(d)*Math.sin(w)/Math.cos(y))),a=Math.atan((1-this.es*_*this.sin_p12/Math.sin(y))*Math.tan(y)/(1-this.es)),e.x=i,e.y=a,e)},names:["Azimuthal_Equidistant","aeqd"]};var sI={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,r,n,o,i,a,s,l=e.x,u=e.y;return n=cR(l-this.long0),t=Math.sin(u),r=Math.cos(u),o=Math.cos(n),((i=this.sin_p14*t+this.cos_p14*r*o)>0||Math.abs(i)<=MA)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*o)),e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o,i,a,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=qL(t/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(t)<=MA?(s=this.lat0,e.x=a,e.y=s,e):(s=qL(o*this.sin_p14+e.y*n*this.cos_p14/t),i=Math.abs(this.lat0)-TA,Math.abs(i)<=MA?(a=this.lat0>=0?cR(this.long0+Math.atan2(e.x,-e.y)):cR(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=s,e):(a=cR(this.long0+Math.atan2(e.x*n,t*this.cos_p14*o-e.y*this.sin_p14*n)),e.x=a,e.y=s,e))},names:["ortho"]},lI={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},uI={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function cI(e,t,r,n){var o;return e<MA?(n.value=uI.AREA_0,o=0):(o=Math.atan2(t,r),Math.abs(o)<=RA?n.value=uI.AREA_0:o>RA&&o<=TA+RA?(n.value=uI.AREA_1,o-=TA):o>TA+RA||o<=-(TA+RA)?(n.value=uI.AREA_2,o=o>=0?o-IA:o+IA):(n.value=uI.AREA_3,o+=TA)),o}function fI(e,t){var r=e+t;return r<-IA?r+=LA:r>+IA&&(r-=LA),r}var hI={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=TA-RA/2?this.face=lI.TOP:this.lat0<=-(TA-RA/2)?this.face=lI.BOTTOM:Math.abs(this.long0)<=RA?this.face=lI.FRONT:Math.abs(this.long0)<=TA+RA?this.face=this.long0>0?lI.RIGHT:lI.LEFT:this.face=lI.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,r,n,o,i,a,s={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,r=e.x,this.face===lI.TOP)o=TA-t,r>=RA&&r<=TA+RA?(l.value=uI.AREA_0,n=r-TA):r>TA+RA||r<=-(TA+RA)?(l.value=uI.AREA_1,n=r>0?r-IA:r+IA):r>-(TA+RA)&&r<=-RA?(l.value=uI.AREA_2,n=r+TA):(l.value=uI.AREA_3,n=r);else if(this.face===lI.BOTTOM)o=TA+t,r>=RA&&r<=TA+RA?(l.value=uI.AREA_0,n=-r+TA):r<RA&&r>=-RA?(l.value=uI.AREA_1,n=-r):r<-RA&&r>=-(TA+RA)?(l.value=uI.AREA_2,n=-r-TA):(l.value=uI.AREA_3,n=r>0?-r+IA:-r-IA);else{var u,c,f,h,p,y;this.face===lI.RIGHT?r=fI(r,+TA):this.face===lI.BACK?r=fI(r,+IA):this.face===lI.LEFT&&(r=fI(r,-TA)),h=Math.sin(t),p=Math.cos(t),y=Math.sin(r),u=p*Math.cos(r),c=p*y,f=h,this.face===lI.FRONT?n=cI(o=Math.acos(u),f,c,l):this.face===lI.RIGHT?n=cI(o=Math.acos(c),f,-u,l):this.face===lI.BACK?n=cI(o=Math.acos(-u),f,-c,l):this.face===lI.LEFT?n=cI(o=Math.acos(-c),f,u,l):(o=n=0,l.value=uI.AREA_0)}return a=Math.atan(12/IA*(n+Math.acos(Math.sin(n)*Math.cos(RA))-TA)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===uI.AREA_1?a+=TA:l.value===uI.AREA_2?a+=IA:l.value===uI.AREA_3&&(a+=1.5*IA),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,r,n,o,i,a,s,l,u,c,f,h,p={lam:0,phi:0},y={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?y.value=uI.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(y.value=uI.AREA_1,t-=TA):e.x<0&&-e.x>=Math.abs(e.y)?(y.value=uI.AREA_2,t=t<0?t+IA:t-IA):(y.value=uI.AREA_3,t+=TA),u=IA/12*Math.tan(t),i=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(t))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===lI.TOP)l=Math.acos(s),p.phi=TA-l,y.value===uI.AREA_0?p.lam=a+TA:y.value===uI.AREA_1?p.lam=a<0?a+IA:a-IA:y.value===uI.AREA_2?p.lam=a-TA:p.lam=a;else if(this.face===lI.BOTTOM)l=Math.acos(s),p.phi=l-TA,y.value===uI.AREA_0?p.lam=-a+TA:y.value===uI.AREA_1?p.lam=-a:y.value===uI.AREA_2?p.lam=-a-TA:p.lam=a<0?-a-IA:-a+IA;else{var d,m,v;u=(d=s)*d,m=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),y.value===uI.AREA_1?(u=m,m=-v,v=u):y.value===uI.AREA_2?(m=-m,v=-v):y.value===uI.AREA_3&&(u=m,m=v,v=-u),this.face===lI.RIGHT?(u=d,d=-m,m=u):this.face===lI.BACK?(d=-d,m=-m):this.face===lI.LEFT&&(u=d,d=m,m=-u),p.phi=Math.acos(-v)-TA,p.lam=Math.atan2(m,d),this.face===lI.RIGHT?p.lam=fI(p.lam,-TA):this.face===lI.BACK?p.lam=fI(p.lam,-IA):this.face===lI.LEFT&&(p.lam=fI(p.lam,+TA))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,e.x=p.lam,e.y=p.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},pI=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],yI=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],dI=.8487,mI=1.3523,vI=AA/5,bI=1/vI,gI=18,SI=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},wI=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};var _I={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=cR(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*vI);n<0?n=0:n>=gI&&(n=gI-1),r=AA*(r-bI*n);var o={x:SI(pI[n],r)*t,y:SI(yI[n],r)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*dI+this.x0,o.y=o.y*this.a*mI+this.y0,o},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*dI),y:Math.abs(e.y-this.y0)/(this.a*mI)};if(t.y>=1)t.x/=pI[gI][0],t.y=e.y<0?-TA:TA;else{var r=Math.floor(t.y*gI);for(r<0?r=0:r>=gI&&(r=gI-1);;)if(yI[r][0]>t.y)--r;else{if(!(yI[r+1][0]<=t.y))break;++r}var n=yI[r],o=5*(t.y-n[0])/(yI[r+1][0]-n[0]);o=function(e,t,r,n){for(var o=t;n;--n){var i=e(o);if(o-=i,Math.abs(i)<r)break}return o}(function(e){return(SI(n,e)-t.y)/wI(n,e)},o,MA,100),t.x/=SI(pI[r],o),t.y=(5*r+o)*jA,e.y<0&&(t.y=-t.y)}return t.x=cR(t.x+this.long0),t},names:["Robinson","robin"]};var OI,xI={init:function(){this.name="geocent"},forward:function(e){return TR(e,this.es,this.a)},inverse:function(e){return PR(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};DR.defaultDatum="WGS84",DR.Proj=CR,DR.WGS84=new DR.Proj("WGS84"),DR.Point=oL,DR.toPoint=jR,DR.defs=nR,DR.transform=LR,DR.mgrs=WR,DR.version="__VERSION__",(OI=DR).Proj.projections.add(uL),OI.Proj.projections.add(mL),OI.Proj.projections.add(bL),OI.Proj.projections.add(_L),OI.Proj.projections.add(OL),OI.Proj.projections.add(xL),OI.Proj.projections.add(CL),OI.Proj.projections.add(TL),OI.Proj.projections.add(PL),OI.Proj.projections.add(NL),OI.Proj.projections.add(zL),OI.Proj.projections.add(JL),OI.Proj.projections.add(WL),OI.Proj.projections.add(XL),OI.Proj.projections.add(QL),OI.Proj.projections.add(ZL),OI.Proj.projections.add($L),OI.Proj.projections.add(eI),OI.Proj.projections.add(rI),OI.Proj.projections.add(nI),OI.Proj.projections.add(oI),OI.Proj.projections.add(iI),OI.Proj.projections.add(aI),OI.Proj.projections.add(sI),OI.Proj.projections.add(hI),OI.Proj.projections.add(_I),OI.Proj.projections.add(xI);var CI=DR;function TI(e){return(TI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EI(e){return(EI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MI(e,t){return(MI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var jI=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).projection&&(r.prjCoordSys=r.projection),o=this,(n=!(i=EI(t).call(this,e,r))||"object"!==TI(i)&&"function"!=typeof i?kI(o):i).dataFlow=new Ra(e,r),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:kI(n)}),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MI(e,t)}(t,u),r=t,(n=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.dispatchEvent({type:e.eventType||e.type,value:e})}}])&&PI(r.prototype,n),o&&PI(r,o),t}(),AI=r(27),RI=r.n(AI);function LI(e){return(LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function II(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NI(e){return(NI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DI(e,t){return(DI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GI=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,o,i=e||{};n=this,(r=!(o=NI(t).call(this,i))||"object"!==LI(o)&&"function"!=typeof o?FI(n):o).idField=i.idField||"id",r.dataService=new jI(i.ws,{geometry:i.geometry,prjCoordSys:i.prjCoordSys,excludeField:i.excludeField}).initSubscribe();var a=FI(r);return a.dataService.on("subscribeSocketConnected",function(e){a.dispatchEvent({type:"subscribeSucceeded",value:e})}),a.dataService.on("messageSucceeded",function(e){a._onMessageSuccessed(e)}),a.dataService.on("setFilterParamSucceeded",function(e){a.dispatchEvent({type:"setFilterParamSucceeded",value:e})}),r.featureCache={},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DI(e,t)}(t,RI.a),r=t,(n=[{key:"setExcludeField",value:function(e){return this.dataService.setExcludeField(e),this.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataService.setGeometry(e),this.geometry=e,this}},{key:"_onMessageSuccessed",value:function(e){var t=(new KM.a).readFeature(e.value.featureResult),r=t.get(this.idField);void 0!==r&&this.featureCache[r]?(this.featureCache[r].setGeometry(t.getGeometry()),this.featureCache[r].setProperties(t.getProperties()),this.changed()):(this.addFeature(t),this.featureCache[r]=t),this.dispatchEvent({type:"dataupdated",value:{source:this,data:t}})}}])&&II(r.prototype,n),o&&II(r,o),t}(),BI=r(10),UI=r.n(BI);function VI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HI=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.attributes=r}var t,r,n;return t=e,(r=[{key:"toFeature",value:function(){var e=this.geometry;if(e instanceof Uj.a){var t=this.attributes;t.geometry=e;var r=new UI.a(t);return(new Br).read((new KM.a).writeFeature(r),"Feature")}if(3===e.length)return e=new vt(e[0],e[1],e[2]),new sr(e,this.attributes)}}])&&VI(t.prototype,r),n&&VI(t,n),e}(),zI=r(16),qI=r.n(zI);function JI(e){return(JI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function YI(e,t){return!t||"object"!==JI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XI(e){return(XI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QI(e,t){return(QI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var KI=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=r||{};function i(e,t,r,n,o){var i=n[0]*r,a=n[1]*r;if(this.context||(this.context=aj.createCanvasContext2D(i,a)),!this.features)return this.context.canvas;this.pixelRatio=r;var s=this.map.getSize()[0]*r,l=this.map.getSize()[1]*r;this.offset=[(i-s)/2/r,(a-l)/2/r],this.notFirst||(this.redrawThematicFeatures(e),this.notFirst=!0),this.div.id=this.id,this.div.className="themeLayer",this.div.style.width=i+"px",this.div.style.height=a+"px",this.map.getViewport().appendChild(this.div),this.renderer.resize(),this.map.getViewport().removeChild(this.div),this.themeCanvas=this.renderer.painter.root.getElementsByTagName("canvas")[0],this.themeCanvas.width=i,this.themeCanvas.height=a,this.themeCanvas.style.width=i+"px",this.themeCanvas.style.height=a+"px",this.themeCanvas.getContext("2d").clearRect(0,0,i,a);var u=this.renderer.painter._layers.hover.ctx.canvas,c=aj.createCanvasContext2D(i,a);c.drawImage(u,0,0,u.width,u.height,0,0,i,a),this.redrawThematicFeatures(e);var f=this.context.canvas;return this.context.clearRect(0,0,f.width,f.height),f.width=i,f.height=a,f.style.width=i+"px",f.style.height=a+"px",this.context.drawImage(this.themeCanvas,0,0,i,a,0,0,i,a),this.context.drawImage(c.canvas,0,0,i,a,0,0,i,a),this.context.canvas}(n=YI(this,XI(t).call(this,{attributions:o.attributions||"Map Data <span>Â© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",canvasFunction:i,logo:"4"===aj.getOlVersion()?o.logo:null,projection:o.projection,ratio:o.ratio,resolutions:o.resolutions,state:o.state}))).id=o.id?o.id:Te.createUniqueID("themeLayer_"),n.canvasFunctionInternal_=i,n.EVENT_TYPES=["loadstart","loadend","loadcancel","visibilitychanged","move","moveend","added","removed","tileloaded","beforefeaturesadded","featuresadded","featuresremoved"],n.features=[],n.TFEvents=o.TFEvents||[],n.map=o.map;var a=n.map.getSize();return n.div=document.createElement("div"),n.map.getViewport().appendChild(n.div),n.div.style.width=a[0]+"px",n.div.style.height=a[1]+"px",n.setOpacity(o.opacity),n.levelRenderer=new VE,n.movingOffset=[0,0],n.renderer=n.levelRenderer.init(n.div),n.map.getViewport().removeChild(n.div),n.renderer.clear(),n.addTFEvents(),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QI(e,t)}(t,qI.a),r=t,(n=[{key:"destroy",value:function(){this.EVENT_TYPES=null,this.isBaseLayer=null,this.TFEvents=null,this.destroyFeatures(),this.features=null,this.renderer&&this.renderer.dispose(),this.renderer=null,this.levelRenderer=null,this.movingOffset=null,this.currentMousePosition=null}},{key:"destroyFeatures",value:function(e){if(void 0==e&&(e=this.features),e){this.removeFeatures(e);for(var t=e.length-1;t>=0;t--)e[t].destroy()}}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var t=this.div;Te.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map&&this.dispatchEvent({type:"changelayer",value:{layer:this,property:"opacity"}})}}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures();Te.isArray(e)||(e=[e]);for(var t=[],r=e.length-1;r>=0;r--){var n=e[r],o=Te.indexOf(this.features,n);-1!==o?this.features.splice(o,1):t.push(n)}for(var i=[],a=0,s=this.features.length;a<s;a++)n=this.features[a],i.push(n);this.features=[],this.addFeatures(i),this.renderer&&this.redrawThematicFeatures(this.map.getView().calculateExtent());var l=0==t.length;this.dispatchEvent({type:"featuresremoved",value:{features:t,succeed:l}})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],this.dispatchEvent({type:"featuresremoved",value:{features:[],succeed:!0}})}},{key:"getFeatures",value:function(){for(var e=this.features.length,t=new Array(e),r=0;r<e;++r)t[r]=this.features[r];return t}},{key:"getFeatureBy",value:function(e,t){var r=null;for(var n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t){var r=t;if(this.renderer)this.renderer.on(e,r);else{var n=[];n.push(e),n.push(r),this.TFEvents.push(n)}}},{key:"fire",value:function(e,t){if(this.offset){t=t.originalEvent;var r=this.getX(t),n=this.getY(t),o=-this.map.getView().getRotation(),i=this.map.getPixelFromCoordinate(this.map.getView().getCenter()),a=this.scale([r,n],i,this.pixelRatio),s=this.rotate(a,o,i),l=[s[0]+this.offset[0],s[1]+this.offset[1]],u=document.createEvent("Event");u.initEvent("pointermove",!0,!0),u.offsetX=l[0],u.offsetY=l[1],u.layerX=l[0],u.layerY=l[1],u.clientX=l[0],u.clientY=l[1],u.x=r,u.y=n,"click"===e&&this.renderer.handler._clickHandler(u),"dblclick"===e&&this.renderer.handler._dblclickHandler(u),"onmousewheel"===e&&this.renderer.handler._mousewheelHandler(u),"mousemove"===e&&(this.renderer.handler._mousemoveHandler(u),this.changed()),"onmouseout"===e&&this.renderer.handler._mouseoutHandler(u),"onmousedown"===e&&this.renderer.handler._mousedownHandler(u),"onmouseup"===e&&this.renderer.handler._mouseupHandler(u)}}},{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"un",value:function(e,t){var r=t;if(this.renderer)this.renderer.un(e,r);else{for(var n=this.TFEvents,o=n.length,i=[],a=0;a<o;a++){var s=n[a];s[0]===e&&s[1]===r||i.push(s)}this.TFEvents=i}}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,r=0;r<t;r++)this.renderer.on(e[r][0],e[r][1])}},{key:"getLocalXY",value:function(e){var t,r=this.map;(e instanceof nt||e instanceof vt)&&(t=r.getPixelFromCoordinate([e.x,e.y])),e instanceof Ee&&(t=r.getPixelFromCoordinate([e.lon,e.lat]));var n=-r.getView().getRotation(),o=r.getPixelFromCoordinate(r.getView().getCenter()),i=t;return this.pixelRatio&&(i=this.scale(t,o,this.pixelRatio)),t&&o&&(i=this.rotate(i,n,o)),this.offset&&i?[i[0]+this.offset[0],i[1]+this.offset[1]]:i}},{key:"rotate",value:function(e,t,r){return[Math.cos(t)*(e[0]-r[0])-Math.sin(t)*(e[1]-r[1])+r[0],Math.sin(t)*(e[0]-r[0])+Math.cos(t)*(e[1]-r[1])+r[1]]}},{key:"scale",value:function(e,t,r){return[(e[0]-t[0])*r+t[0],(e[1]-t[1])*r+t[1]]}},{key:"toiClientFeature",value:function(e){Te.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof HI)t.push(e[r].toFeature());else if(e[r]instanceof UI.a)t.push(this._toFeature(e[r]));else if(e[r]instanceof sr)t.push(e[r]);else if(e[r].geometry&&e[r].geometry.parts)t.push(ug.fromJson(e[r]).toFeature());else{if(-1==["FeatureCollection","Feature","Geometry"].indexOf(e[r].type))throw new Error("features[".concat(r,"]'s type is not be supported."));var n=new Br;t=t.concat(n.read(e[r]))}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"_toFeature",value:function(e){var t=(new KM.a).writeFeature(e);return(new Br).read(t,"Feature")}}])&&WI(r.prototype,n),o&&WI(r,o),t}();function ZI(e){return(ZI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eN(e,t){return!t||"object"!==ZI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tN(e,t,r){return(tN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rN(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rN(e){return(rN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nN(e,t){return(nN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oN=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=eN(this,rN(t).call(this,e,n))).chartsSetting=n.chartsSetting||{},o.themeFields=n.themeFields||null,o.overlayWeightField=n.overlayWeightField||null,o.isOverLay=void 0===n.isOverLay||n.isOverLay,o.charts=n.charts||[],o.cache=n.cache||{},o.chartsType=r,o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nN(e,t)}(t,KI),r=t,(n=[{key:"destroy",value:function(){this.chartsType=null,this.chartsSetting=null,this.themeFields=null,this.overlayWeightField=null,this.isOverLay=null,KI.prototype.destroy.apply(this,arguments),this.charts=null,this.cache=null}},{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==this.dispatchEvent({type:"beforefeaturesadded",value:{features:e}})&&(this.features=this.toiClientFeature(e),this.renderer&&this.changed())}},{key:"redrawThematicFeatures",value:function(e){this.renderer.clearAll();for(var t=this.features,r=0,n=t.length;r<n;r++){var o=t[r],i=o.geometry.getBounds();if(e)if(!new Me(e[0],e[1],e[2],e[3]).intersectsBounds(i))continue;var a=this.cache,s=o.id;if(!a[s]){a[s]=s;var l=this.createThematicFeature(o);l&&this.overlayWeightField&&o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])&&(l.__overlayWeight=o.attributes[this.overlayWeightField]),l&&this.charts.push(l)}}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return DT[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new DT[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],r=this.map.getView().calculateExtent(),n=new Me(r[0],r[1],r[2],r[3]),o=this.getLocalXY(new Ee(n.left,n.top)),i=this.getLocalXY(new Ee(n.right,n.bottom)),a=new Me(o[0],i[1],i[0],o[1]),s=0,l=e.length;s<l;s++){var u=e[s],c=u.resetLocation(),f=u.chartBounds,h=[{x:f.left,y:f.top},{x:f.left,y:f.bottom},{x:f.right,y:f.bottom},{x:f.right,y:f.top},{x:f.left,y:f.top}];if(!a||this.isChartInMap(a,h)){var p=!1;if(0!==s)for(var y=0;y<t.length;y++)if(this.isQuadrilateralOverLap(h,t[y])){p=!0;break}if(!p){t.push(h);for(var d=u.shapes,m=0,v=d.length;m<v;m++)d[m].refOriginalPosition=c,this.renderer.addShape(d[m])}}}else for(var b=0,g=e.length;b<g;b++)for(var S=e[b],w=S.resetLocation(),_=S.shapes,O=0,x=_.length;O<x;O++)_[O].refOriginalPosition=w,this.renderer.addShape(_[O]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===Te.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(e,t){for(var r=e,n=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),tN(rN(t.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),tN(rN(t.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getView().calculateExtent()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}},{key:"canvasFunctionInternal_",value:function(e,t,r,n,o){return KI.prototype.canvasFunctionInternal_.apply(this,arguments)}}])&&$I(r.prototype,n),o&&$I(r,o),t}(),iN=r(48),aN=r.n(iN);function sN(e){return(sN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uN(e,t){return!t||"object"!==sN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cN(e){return(cN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fN(e,t){return(fN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var hN=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.stroke?(e.stroke.color=e.stroke.getColor()||"#3388ff",e.stroke.width=e.stroke.getWidth()||1):e.stroke=new bj.a({color:"#3388ff",width:1}),e.fill?e.fill.color=e.fill.getColor()||"#66ccff":e.fill=new mj.a({color:"#66ccff"}),(r=uN(this,cN(t).call(this,{angle:e.angle||60,stroke:e.stroke,fill:e.fill,radius:e.radius||10,rotation:e.rotation||0}))).count_=e.count||3,r.strokeOpacity=e.strokeOpacity||1,r.fillOpacity=e.fillOpacity||1,r._canvas=r.getImage(),r._ctx=r._canvas.getContext("2d"),r._render(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fN(e,t)}(t,aN.a),r=t,(n=[{key:"_render",value:function(){var e=0,t=this.getAngle();if(this.spaceAngle=360/this.count_-this.getAngle(),!(this.spaceAngle<0)){this._ctx.translate(0,0),this._ctx.beginPath();for(var r=0;r<this.count_;r++)this._drawSector(this._ctx,this.getAnchor()[0],this.getAnchor()[1],this.getRadius(),e,t),t=(e=t+this.spaceAngle)+this.getAngle();this._fillStroke(),this._ctx.closePath()}}},{key:"_drawSector",value:function(e,t,r,n,o,i){o=o/180*Math.PI,i=i/180*Math.PI,e.moveTo(t,r),e.lineTo(t+n*Math.cos(o),r+n*Math.sin(o)),e.arc(t,r,n,o,i),e.lineTo(t,r)}},{key:"_fillStroke",value:function(){this.getFill()&&(this._ctx.globalAlpha=this.fillOpacity,this._ctx.fillStyle=this.getFill().color,this._ctx.fill()),this.getStroke()&&0!==this.weight&&(this._ctx.globalAlpha=this.strokeOpacity,this._ctx.lineWidth=this.getStroke().width,this._ctx.strokeStyle=this.getStroke().color,this._ctx.lineCap=this.getStroke().lineCap,this._ctx.lineJoin=this.getStroke().lineJoin,this._ctx.stroke())}},{key:"getCount",value:function(){return this.count_}},{key:"getSpaceAngle",value:function(){return this.spaceAngle}}])&&lN(r.prototype,n),o&&lN(r,o),t}();function pN(e){return(pN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dN(e,t){return!t||"object"!==pN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mN(e){return(mN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vN(e,t){return(vN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var bN=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dN(this,mN(t).call(this,e))).sAngle=e.sAngle,r.eAngle=e.eAngle,r._render(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vN(e,t)}(t,hN),r=t,(n=[{key:"_render",value:function(){this._ctx.clearRect(0,0,this.getImage().width,this.getImage().height),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.translate(0,0),this._ctx.beginPath(),this._drawSector(this._ctx,this.getAnchor()[0],this.getAnchor()[1],this.getRadius(),this.sAngle,this.eAngle),this._fillStroke(),this._ctx.closePath()}},{key:"getSAngle",value:function(){return this.sAngle}},{key:"getEAngle",value:function(){return this.eAngle}}])&&yN(r.prototype,n),o&&yN(r,o),t}(),gN=r(21),SN=r.n(gN);function wN(e){return(wN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ON(e){return(ON=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CN(e,t){return(CN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var TN=function(){return!1},PN=function(){for(var e=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],r=0;r<t.length;r++){var n=t[r];if(void 0!==e.style[n])return n}return t[0]}(),EN=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=ON(t).call(this))||"object"!==wN(i)&&"function"!=typeof i?xN(o):i).layer=e,n.map=e.map;var a=r||{};Te.extend(xN(n),a);var s=n.pixelRatio=window?window.devicePixelRatio:1;return n.width=n.map.getSize()[0]*s,n.height=n.map.getSize()[1]*s,n.center=n.map.getView().getCenter(),n._initContainer(),n._registerEvents(),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CN(e,t)}(t,SN.a),r=t,(n=[{key:"_registerEvents",value:function(){var e=this.map,t=e.getView();e.on("change:size",this._resizeEvent.bind(this),this),t.on("change:resolution",this._moveEndEvent.bind(this),this),t.on("change:center",this._moveEvent.bind(this),this),t.on("change:rotation",this._moveEndEvent.bind(this),this),e.on("moveend",this._moveEndEvent.bind(this),this)}},{key:"_resizeEvent",value:function(){this._resize(),this._clearAndRedraw()}},{key:"_moveEvent",value:function(){var e=this.map.getPixelFromCoordinate(this.center),t=this.map.getPixelFromCoordinate(this.map.getView().getCenter()),r=[e[0]-t[0],e[1]-t[1]];this._canvas.style[PN]="translate("+Math.round(r[0])+"px,"+Math.round(r[1])+"px)"}},{key:"_moveEndEvent",value:function(){this._canvas.style[PN]="translate(0,0)",this.center=this.map.getView().getCenter(),this._clearAndRedraw()}},{key:"_clearAndRedraw",value:function(){this._clearBuffer(),this.layer.changed()}},{key:"_resize",value:function(){var e=this.map.getSize(),t=e[0]*this.pixelRatio,r=e[1]*this.pixelRatio;this._canvas.width=t,this._canvas.height=r,this._canvas.style.width=t+"px",this._canvas.style.height=r+"px"}},{key:"_clearBuffer",value:function(){if(this.deckGL){var e=this.deckGL.layerManager;return e&&e.context.gl.clear(e.context.gl.COLOR_BUFFER_BIT),this}}},{key:"getCanvas",value:function(){return this._canvas}},{key:"update",value:function(e){if(e&&e.length>-1&&(this._data=e),this._renderLayer){this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var t=this._getLayerState();t.data=this._data||[],this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(t)}}},{key:"drawGraphics",value:function(e){this._data=e||(this._data?this._data:[]),this._renderLayer||this._createInnerRender(),this._clearBuffer(),this._draw()}},{key:"_initContainer",value:function(){this._canvas=this._createCanvas(this.width,this.height),this._layerContainer=this.container,this._wrapper=document.createElement("div"),this._wrapper.className="deck-wrapper",this._wrapper.style.position="absolute",this._wrapper.style.top="0",this._wrapper.style.left="0",this._wrapper.appendChild(this._canvas),this._layerContainer&&this._layerContainer.appendChild(this._wrapper)}},{key:"_createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.oncontextmenu=TN,r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px",r}},{key:"_createInnerRender",value:function(){var e=this,t=this._getLayerState(),r=t.color,n=t.radius,o=t.opacity,i=t.highlightColor,a=t.radiusScale,s=t.radiusMinPixels,l=t.radiusMaxPixels,u=t.strokeWidth,c=t.outline;n=this._pixelToMeter(n);var f={id:"scatter-plot",data:[],pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,outline:c,getPosition:function(t){if(!t)return[0,0,0];var r=t.getGeometry(),n=r&&r.getCoordinates();return(n=e._project(n))&&[n[0],n[1],0]},getColor:function(t){var r=e._getLayerDefaultStyle(),n=t&&t.getStyle();return n&&n.getColor()||r.color},getRadius:function(t){var r=e._getLayerDefaultStyle(),n=t&&t.getStyle();return n&&n.getRadius()||r.radius},updateTriggers:{getColor:[r],getRadius:[n]}},h=this;this.onClick&&(f.onClick=function(){h._canvas.style.cursor="pointer",h.onClick.apply(h,arguments)}),this.onHover&&(f.onHover=function(){h._canvas.style.cursor="pointer",h.onHover.apply(h,arguments)}),e._renderLayer=new window.DeckGL.ScatterplotLayer(f)}},{key:"_getLayerDefaultStyle",value:function(){var e=this._getLayerState(),t=e.color,r=e.opacity,n=e.radius,o=e.radiusScale,i=e.radiusMinPixels,a=e.radiusMaxPixels,s=e.strokeWidth,l=e.outline;return{color:t,opacity:r,radius:n=this._pixelToMeter(n),radiusScale:o,radiusMinPixels:i,radiusMaxPixels:a,strokeWidth:s,outline:l}}},{key:"_getLayerState",value:function(){var e=this.layer.getLayerState(),t=this.map.getView().getProjection().getCode(),r=TM.transform([e.longitude,e.latitude],t,"EPSG:4326");return e.longitude=r[0],e.latitude=r[1],e.zoom=e.zoom-1,e}},{key:"_draw",value:function(){this._refreshData();var e=this._getLayerState();e.data=this._data||[];var t={};for(var r in e)t[r]=e[r];this._renderLayer.setNeedsRedraw(!0),t.layers=[this._renderLayer],t.canvas=this._canvas,this.onBeforeRender&&(t.onBeforeRender=this.onBeforeRender.bind(this)),this.onAfterRender&&(t.onAfterRender=this.onAfterRender.bind(this)),this.deckGL?this.deckGL.setProps(t):this.deckGL=new window.DeckGL.experimental.DeckGLJS(t)}},{key:"_refreshData",value:function(){var e=this._data||[],t=aj.isArray(e)?[].concat(e):[e];this._renderLayer.props.data||(this._renderLayer.props.data=[]),this._renderLayer.props.data.length=0;for(var r=0;r<t.length;r++)this._renderLayer.props.data.push(t[r]);this._data=this._renderLayer.props.data}},{key:"_project",value:function(e){var t=this.map.getView().getProjection().getCode();return"EPSG:4326"===t?e:TM.transform(e,t,"EPSG:4326")}},{key:"_pixelToMeter",value:function(e){var t=this.map.getView(),r=t.getProjection().getUnits()||"degrees";"degrees"===r&&(r=g.DEGREE),"m"===r&&(r=g.METER);var n=t.getResolution();return r===g.DEGREE?e*(n*(6378137*Math.PI/180)):e*n}}])&&_N(r.prototype,n),o&&_N(r,o),t}(),kN=r(17),MN=r(49);function jN(e){return(jN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RN(e){return(RN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IN(e,t){return(IN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var NN=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=RN(t).call(this))||"object"!==jN(i)&&"function"!=typeof i?LN(o):i).layer=e,n.map=e.map;var a=r||{};return Te.extend(LN(n),a),n.highLightStyle=n.layer.highLightStyle,n.mapWidth=n.size[0],n.mapHeight=n.size[1],n.width=n.map.getSize()[0],n.height=n.map.getSize()[1],n.context=aj.createCanvasContext2D(n.mapWidth,n.mapHeight),n.context.scale(n.pixelRatio,n.pixelRatio),n.canvas=n.context.canvas,n.canvas.style.width=n.width+"px",n.canvas.style.height=n.height+"px",n._registerEvents(),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IN(e,t)}(t,SN.a),r=t,(n=[{key:"_registerEvents",value:function(){this.map.on("change:size",this._resizeEvent.bind(this),this)}},{key:"_resizeEvent",value:function(){this._resize(),this._clearAndRedraw()}},{key:"_resize",value:function(){var e=this.map.getSize(),t=e[0],r=e[1],n=t/this.width,o=r/this.height;this.width=t,this.height=r,this.mapWidth=this.mapWidth*n,this.mapHeight=this.mapHeight*o,this.canvas.width=this.mapWidth,this.canvas.height=this.mapHeight,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px"}},{key:"_clearAndRedraw",value:function(){this._clearBuffer(),this.layer.changed()}},{key:"update",value:function(){this.layer.changed()}},{key:"_clearBuffer",value:function(){}},{key:"getCanvas",value:function(){return this.canvas}},{key:"drawGraphics",value:function(e){this.graphics_=e||[];var t=this.mapWidth/this.pixelRatio,r=this.mapHeight/this.pixelRatio,n=[(t-this.width)/2,(r-this.height)/2],o=MN.toContext(this.context,{size:[t,r],pixelRatio:this.pixelRatio}),i=this.layer._getDefaultStyle(),a=this,s=a.layer.map;e.map(function(e){var t=e.getStyle()||i;if(a.selected===e){var r=t;t instanceof kN.Circle?r=new kN.Circle({radius:t.getRadius(),fill:new kN.Fill({color:"rgba(0, 153, 255, 1)"}),stroke:t.getStroke(),snapToPixel:"4"===aj.getOlVersion()?t.getSnapToPixel():null}):t instanceof kN.RegularShape&&(r=new kN.RegularShape({radius:t.getRadius(),radius2:t.getRadius2(),points:t.getPoints(),angle:t.getAngle(),snapToPixel:"4"===aj.getOlVersion()?t.getSnapToPixel():null,rotation:t.getRotation(),rotateWithView:t.getRotateWithView(),fill:new kN.Fill({color:"rgba(0, 153, 255, 1)"}),stroke:t.getStroke()})),t=a.highLightStyle||r}o.setStyle(new kN.Style({image:t}));var l=e.getGeometry().getCoordinates(),u=s.getPixelFromCoordinate(l),c=-s.getView().getRotation(),f=s.getPixelFromCoordinate(s.getView().getCenter()),h=function(e,t,r){return[Math.cos(t)*(e[0]-r[0])-Math.sin(t)*(e[1]-r[1])+r[0],Math.sin(t)*(e[0]-r[0])+Math.cos(t)*(e[1]-r[1])+r[1]]}(function(e,t,r){return[(e[0]-t[0])*r+t[0],(e[1]-t[1])*r+t[1]]}(u,f,1),c,f),p=[h[0]+n[0],h[1]+n[1]],y=new XM.a(p);return o.drawGeometry(y),e})}}])&&AN(r.prototype,n),o&&AN(r,o),t}();function FN(e){return(FN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GN(e,t){return!t||"object"!==FN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BN(e){return(BN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UN(e,t){return(UN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var VN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=GN(this,BN(t).call(this)),e instanceof Uj.a&&(n.geometry_=e),n.attributes=r,n.setStyle(),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UN(e,t)}(t,SN.a),r=t,o=[{key:"createStyleFunction",value:function(e){var t,r;"function"==typeof e?t=2==e.length?function(t){return e(this,t)}:e:(r=Array.isArray(e)?e:[e],t=function(){return r});return t}}],(n=[{key:"clone",value:function(){var e=new t;return e.setId(this.id),e.setGeometry(this.geometry_),e.setAttributes(this.attributes),e.setStyle(this.style_),e}},{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"setGeometry",value:function(e){this.geometry_=e}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getStyle",value:function(){return this.style_}},{key:"setStyle",value:function(e){(this.style||e)&&(this.style_=e,this.styleFunction_=e?t.createStyleFunction(new cj.a({image:e})):void 0,this.changed())}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"destroy",value:function(){this.id=null,this.geometry_=null,this.attributes=null,this.style_=null}}])&&DN(r.prototype,n),o&&DN(r,o),t}(),HN=r(32),zN=r(50),qN=r.n(zN),JN=r(51),WN=r.n(JN);function YN(e){return(YN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QN(e){return(QN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZN(e,t){return(ZN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $N={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},eF=["canvas","webgl"],tF=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=QN(t).call(this,{attributions:e.attributions,canvasFunction:function(e,t,r,n,o){i.renderer||(i.renderer=function(e,t){var r;if(i.render===eF[0])r=new NN(i,{size:e,pixelRatio:t});else{var n=Te.extend({},$N),o=Te.extend(n,{color:i.color,opacity:i.opacity,radius:i.radius,radiusScale:i.radiusScale,radiusMinPixels:i.radiusMinPixels,radiusMaxPixels:i.radiusMaxPixels,strokeWidth:i.strokeWidth,outline:i.outline,onClick:i.onClick,onHover:i.onHover});(o=Te.extend(i,o)).pixelRatio=t,o.container=i.map.getViewport().getElementsByClassName("ol-overlaycontainer")[0],o.onBeforeRender=function(){return!1},o.onAfterRender=function(){return!1},r=new EN(i,o)}return r}(n,r));var a=this.getGraphicsInExtent(e);return i.renderer._clearBuffer(),i.renderer.selected=this.selected,i.renderer.drawGraphics(a),i.renderer.getCanvas()},logo:"4"===aj.getOlVersion()?e.logo:null,projection:e.projection,ratio:e.ratio,resolutions:e.resolutions,state:e.state}))||"object"!==YN(o)&&"function"!=typeof o?KN(n):o).graphics=[].concat(e.graphics),r.map=e.map,Te.extend(KN(r),e),r.render=e.render||eF[0],aj.supportWebGL2()||(r.render=eF[0]),r.highLightStyle=e.highLightStyle,r.isHighLight=void 0===e.isHighLight||e.isHighLight,r.hitGraphicLayer=null,r._forEachFeatureAtCoordinate=function(e,t,r,n,o){var a=i.getGraphicsInExtent();i._highLightClose();for(var s=a.length-1;s>=0;s--){var l=a[s].getStyle();if(!l)return;if(!(l instanceof bN)){var u=a[s].getGeometry().getCoordinates(),c=new cj.a({image:l}).getImage(),f=!1;if(c instanceof hN&&1===c.getCount()){var h=180*c.getRotation()/Math.PI,p=Number.parseFloat(c.getAngle()),y=c.getRadius()*t,d=null;if(p>355)d=new yj.a(u,y);else{var m=[];m.push(u);for(var v=p/8,b=0;b<8;b++){var g=(h+b*v)/180*Math.PI;m.push([u[0]+y*Math.cos(g),u[1]-y*Math.sin(g)])}m.push(u),d=new qN.a([m])}d.intersectsCoordinate(this.map.getCoordinateFromPixel(n))&&(f=!0)}else{var S=[];S[0]=u[0]-c.getAnchor()[0]*t,S[2]=u[0]+c.getAnchor()[0]*t,S[1]=u[1]-c.getAnchor()[1]*t,S[3]=u[1]+c.getAnchor()[1]*t,HN.containsCoordinate(S,e)&&(f=!0)}!0!==f||(i.isHighLight&&i._highLight(u,c,a[s],n),r&&r(a[s],o))}}return};var i=KN(r);return e.onClick&&i.map.on("click",function(t){i.map.forEachFeatureAtPixel(t.pixel,e.onClick,{},t)}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZN(e,t)}(t,qI.a),r=t,(n=[{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=aj.isArray(e)?[].concat(e):[e];this.graphics=[].concat(t),this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=aj.isArray(e)?[].concat(e):[e];this.graphics=this.graphics.concat(t),this.update()}},{key:"getGraphicBy",value:function(e,t){var r=null;for(var n in this.graphics)if(this.graphics[n][e]===t){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,void this.update();Te.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var r=e[t],n=Te.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"clear",value:function(){this.removeGraphics()}},{key:"update",value:function(){this.renderer.update(this.graphics,this._getDefaultStyle())}},{key:"_getDefaultStyle",value:function(){var e={};return this.color&&(e.fill=new mj.a({color:this.toRGBA(this.color)})),this.radius&&(e.radius=this.radius),this.outline&&(e.stroke=new mj.a({color:this.toRGBA(this.color),width:this.strokeWidth})),new yj.a(e)}},{key:"toRGBA",value:function(e){return"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat((e[3]||255)/255,")")}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};Te.extend(this,Te.extend(t,e)),this.update()}},{key:"getLayerState",value:function(){var e=this.map,t=e.getSize()[0],r=e.getSize()[1],n=e.getView(),o=n.getCenter(),i={longitude:o[0],latitude:o[1],zoom:n.getZoom(),maxZoom:n.getMaxZoom(),pitch:0,bearing:180*-n.getRotation()/Math.PI},a={};for(var s in i)a[s]=i[s];return a.width=t,a.height=r,a.color=this.color,a.radius=this.radius,a.opacity=this.opacity,a.highlightColor=this.highlightColor,a.radiusScale=this.radiusScale,a.radiusMinPixels=this.radiusMinPixels,a.radiusMaxPixels=this.radiusMaxPixels,a.strokeWidth=this.strokeWidth,a.outline=this.outline,a}},{key:"_highLightClose",value:function(){this.selected=null,this.hitGraphicLayer&&(this.map.removeLayer(this.hitGraphicLayer),this.hitGraphicLayer=null),this.changed()}},{key:"_highLight",value:function(e,r,n,o){if(n.getStyle()instanceof hN){this.hitGraphicLayer&&(this.map.removeLayer(this.hitGraphicLayer),this.hitGraphicLayer=null);var i=this.map.getPixelFromCoordinate([e[0],e[1]]);o=o||[0,0];var a=Math.atan2(o[1]-i[1],o[0]-i[0])/Math.PI*180;a=a>0?a:360+a;var s=(Math.ceil(a/(r.getAngle()+r.getSpaceAngle()))-1)*(r.getAngle()+r.getSpaceAngle()),l={stroke:new bj.a({color:"#ff0000",width:1}),fill:new mj.a({color:"#0099ff"}),radius:r.getRadius(),angle:r.getAngle(),eAngle:s+r.getAngle(),sAngle:s,rotation:r.getRotation()};this.highLightStyle&&this.highLightStyle instanceof bN&&(l.stroke=this.highLightStyle.getStroke(),l.fill=this.highLightStyle.getFill(),l.radius=this.highLightStyle.getRadius(),l.angle=this.highLightStyle.getAngle());var u=new VN(new XM.a(e));u.setStyle(new bN(l)),this.hitGraphicLayer=new WN.a({source:new t({map:this.map,graphics:[u]})}),this.map.addLayer(this.hitGraphicLayer)}else this.selected=n,this.changed()}},{key:"getGraphicsInExtent",value:function(e){var t=[];return e?(this.graphics.map(function(r){return HN.containsExtent(e,r.getGeometry().getExtent())&&t.push(r),r}),t):(this.graphics.map(function(e){return t.push(e),e}),t)}}])&&XN(r.prototype,n),o&&XN(r,o),t}();function rF(e){return(rF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oF(e,t){return!t||"object"!==rF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iF(e){return(iF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aF(e,t){return(aF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sF=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oF(this,iF(t).call(this,e,r))).cache=r.cache||{},n.cacheFields=r.cacheFields||[],n.style=r.style||{},n.maxCacheCount=r.maxCacheCount||0,n.isCustomSetMaxCacheCount=void 0!==r.isCustomSetMaxCacheCount&&r.isCustomSetMaxCacheCount,n.nodesClipPixel=r.nodesClipPixel||2,n.isHoverAble=void 0!==r.isHoverAble&&r.isHoverAble,n.isMultiHover=void 0!==r.isMultiHover&&r.isMultiHover,n.isClickAble=void 0===r.isClickAble||r.isClickAble,n.highlightStyle=r.highlightStyle||null,n.isAllowFeatureStyle=void 0!==r.isAllowFeatureStyle&&r.isAllowFeatureStyle,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aF(e,t)}(t,KI),r=t,(n=[{key:"destroy",value:function(){this.maxCacheCount=null,this.isCustomSetMaxCacheCount=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.cache=null,this.cacheFields=null,this.style=null,this.highlightStyle=null,this.isAllowFeatureStyle=null}},{key:"addFeatures",value:function(e){this.dispatchEvent({type:"beforefeaturesadded",value:{features:e}}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.changed()}},{key:"removeFeatures",value:function(e){this.clearCache(),KI.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function(){this.clearCache(),KI.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){var t=this.renderer.getHoverOne(),r=null;t&&t.refDataID&&(r=t.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getView().getZoom(),s=this.maxCacheCount,l=0,u=n.length;l<u;l++){var c=n[l];if(c.geometry){var f=c.geometry.getBounds();if(e)if(!new Me(e[0],e[1],e[2],e[3]).intersectsBounds(f))continue;var h,p=c.id+"_zoom_"+a.toString();if(o[p])o[p].updateAndAddShapes();else{if((h=this.createThematicFeature(n[l])).getShapesCount()<1)continue;if(o[p]=h,i.push(p),i.length>s){var y=i[0];i.splice(0,1),delete o[y]}}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var d=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(d)}}},{key:"createThematicFeature",value:function(e){var t=Te.copyAttributesWithClip(this.style);e.style&&!0===this.isAllowFeatureStyle&&(t=Te.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=NT.transformStyle(this.highlightStyle);for(var n=new tE(e,this,NT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"canvasFunctionInternal_",value:function(e,t,r,n,o){return KI.prototype.canvasFunctionInternal_.apply(this,arguments)}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}])&&nF(r.prototype,n),o&&nF(r,o),t}();function lF(e){return(lF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cF(e,t){return!t||"object"!==lF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fF(e,t,r){return(fF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function hF(e){return(hF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pF(e,t){return(pF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var yF=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cF(this,hF(t).call(this,e,r))).isOverLay=null==r.isOverLay||r.isOverLay,n.isAvoid=null==r.isAvoid||r.isAvoid,n.style=r.style,n.themeField=r.themeField,n.styleGroups=r.styleGroups,n.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelSelect:!0,_isGeoTextStrategyStyle:!0},n.getPxBoundsMode=0,n.labelFeatures=[],n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pF(e,t)}(t,sF),r=t,(n=[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,fF(hF(t.prototype),"destroy",this).call(this)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=NT.transformStyle(this.highlightStyle);for(var n=new tE(e,this,NT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"redrawThematicFeatures",value:function(e){if(this.features.length>0&&0===this.labelFeatures.length)for(var r=this.setLabelsStyle(this.features),n=0,o=r.length;n<o;n++)this.labelFeatures.push(r[n]);this.features=this.getDrawnLabels(this.labelFeatures),fF(hF(t.prototype),"redrawThematicFeatures",this).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],fF(hF(t.prototype),"removeFeatures",this).call(this,arguments)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],fF(hF(t.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"getDrawnLabels",value:function(e){var t,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this.map,u=l.getSize();u={x:u[0],y:u[1]};for(var c=l.getView().getZoom(),f=0,h=e.length;f<h;f++){(r=e[f]).isStyleChange&&(r=this.setStyle(r));var p=this.getLabelPxLocation(r);if(p.x>=0&&p.x<=u.x&&p.y>=0&&p.y<=u.y){if(r.style.minZoomLevel>-1&&c<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&c>r.style.maxZoomLevel)continue;var y=null;r.isStyleChange?(r.isStyleChange=null,y=this.calculateLabelBounds(r,p)):y=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,p):this.calculateLabelBounds(r,p);var d=new Me(0,u.y,u.x,0),m=y.length;if(this.isAvoid){var v=this.getAvoidInfo(d,y);if(v){if("left"===v.aspectW){r.style.labelXOffset+=v.offsetX;for(var b=0;b<m;b++)y[b].x+=v.offsetX}else if("right"===v.aspectW){r.style.labelXOffset+=-v.offsetX;for(var g=0;g<m;g++)y[g].x+=-v.offsetX}if("top"===v.aspectH){r.style.labelYOffset+=v.offsetY;for(var S=0;S<m;S++)y[S].y+=v.offsetY}else if("bottom"===v.aspectH){r.style.labelYOffset+=-v.offsetY;for(var w=0;w<m;w++)y[w].y+=-v.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var _=!1;if(0!=f)for(var O=0;O<a.length;O++)if(this.isQuadrilateralOverLap(y,a[O])){_=!0;break}if(_)continue;a.push(y)}for(var x=[],C=0;C<m-1;C++)x.push(l.getCoordinateFromPixel([y[C].x,y[C].y]));var T=new Me(x[3][0],x[3][1],x[1][0],[x[1][1]]).getCenterLonLat(),P=new vt(T.lon,T.lat,r.attributes[this.themeField]);P.calculateBounds(),n=Te.cloneObject(r.style),o=Te.cloneObject(Te.copyAttributes(n,s)),(t=new sr(P,r.attributes,o)).id=r.id,t.fid=r.fid,i.push(t)}}return i}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=Te.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=Te.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var r=this.themeField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=Te.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t,r=[],n=0,o=e.length;n<o;n++){var i=e[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return e;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(t=this.setStyle(i)).layer=this.layer,r.push(t)}return r}},{key:"setStyle",value:function(e){var t=e;if(t.style=Te.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=Te.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var r=this.groupField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=Te.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var t=e.geometry,r=e.style,n=t.getCentroid(),o=this.map.getPixelFromCoordinate([n.x,n.y]),i=new XM.a([o[0],o[1]]);if(r.labelXOffset||r.labelYOffset){var a=isNaN(r.labelXOffset)?0:r.labelXOffset,s=isNaN(r.labelYOffset)?0:r.labelYOffset;i.translate(a,-s)}return{x:i.getCoordinates()[0],y:i.getCoordinates()[1]}}},{key:"calculateLabelBounds",value:function(e,t){var r=e.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),n=r.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var i=[];return i=e.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,e.style.labelRotation),r.bounds=new Me(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(e,t){var r,n,o,i,a,s=e.geometry.bsInfo,l=e.style,u=Te.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}n=u.x-s.w/2,o=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,i=u.y-s.h/2,r=new Me(n,o,a,i);var c=[];return c=l.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,l.labelRotation),e.geometry.bounds=new Me(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(e,t){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};t=Te.extend({fontColor:"#000000",labelAlign:"cm"},t);var o=this.getLocalXY(e),i=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;o[0]+=a,o[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,f,h,p=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(u.fillText){u.font=p,u.textAlign=r[t.labelAlign[0]]||"center",u.textBaseline=r[t.labelAlign[1]]||"middle",null==(c=n[t.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,o[1]+=f*c*(d-1);for(var m=0;m<d;m++)i<(h=u.measureText(y[m]).width)&&(i=h)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=n[t.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var v=0;v<d;v++)i<(h=u.measureText(y[v]).width)&&(i=h)}var b={};return i?(b.w=i,b.h=t.fontSize,b.rows=y.length,b):null}},{key:"rotationBounds",value:function(e,t,r){var n=new XM.a([e.left,e.top]),o=new XM.a([e.right,e.top]),i=new XM.a([e.right,e.bottom]),a=new XM.a([e.left,e.bottom]),s=[];s.push(this.getRotatedLocation(n.getCoordinates()[0],n.getCoordinates()[1],t.x,t.y,r)),s.push(this.getRotatedLocation(o.getCoordinates()[0],o.getCoordinates()[1],t.x,t.y,r)),s.push(this.getRotatedLocation(i.getCoordinates()[0],i.getCoordinates()[1],t.x,t.y,r)),s.push(this.getRotatedLocation(a.getCoordinates()[0],a.getCoordinates()[1],t.x,t.y,r));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s={};return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(e,t){if(5!==t.length)return null;for(var r=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],n=!1,o=r.length,i=t.length,a=0,s=0,l="",u="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===Te.lineIntersection(r[c],r[c+1],t[f],t[f+1]).CLASS_NAME&&(h(t[f]),h(t[f+1]),n=!0)}return n?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function h(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var r=Math.abs(e.top-t.y);r>s&&(s=r,l="top")}if(t.y>e.bottom){var n=Math.abs(t.y-e.bottom);n>s&&(s=n,l="bottom")}if(t.x<e.left){var o=Math.abs(e.left-t.x);o>a&&(a=o,u="left")}if(t.x>e.right){var i=Math.abs(t.x-e.right);i>a&&(a=i,u="right")}}}}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===Te.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}},{key:"canvasFunctionInternal_",value:function(e,r,n,o,i){return fF(hF(t.prototype),"canvasFunctionInternal_",this).apply(this,arguments)}}])&&uF(r.prototype,n),o&&uF(r,o),t}();function dF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t||{},this.enableMassClear=this.options.enableMassClear,this._map=t.map,this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||2,this.mixBlendMode=this.options.mixBlendMode||null,this.width=t.width,this.height=t.height,this.initialize()}var t,r,n;return t=e,(r=[{key:"initialize",value:function(){var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,e.className="mapvClass";var t="undefined"==typeof window?{}:window,r=this.devicePixelRatio=t.devicePixelRatio||1;e.width=parseInt(this.width)*r,e.height=parseInt(this.height)*r,"2d"===this.context&&e.getContext(this.context).scale(r,r),e.style.width=this.width+"px",e.style.height=this.height+"px","webgl"===this.context&&this.canvas.getContext(this.context).viewport(0,0,e.width,e.height)}},{key:"draw",value:function(){this.options.update&&this.options.update.call(this)}},{key:"resize",value:function(e,t){var r="undefined"==typeof window?{}:window,n=this.devicePixelRatio=r.devicePixelRatio||1;this.canvas.width=e*n,this.canvas.height=t*n,"2d"===this.context&&this.canvas.getContext("2d").scale(n,n),this.canvas.style.width=e+"px",this.canvas.style.height=t+"px","webgl"===this.context&&this.canvas.getContext(this.context).viewport(0,0,this.canvas.width,this.canvas.height)}},{key:"getContainer",value:function(){return this.canvas}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}},{key:"getZIndex",value:function(){return this.zIndex}}])&&dF(t.prototype,r),n&&dF(t,n),e}(),vF=r(33),bF=r(52),gF=r.n(bF);function SF(e){return(SF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OF(e,t,r){return(OF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function xF(e){return(xF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CF(e,t){return(CF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var TF=vF.baiduMapLayer?vF.baiduMapLayer.__proto__:Function,PF=function(e){function t(e,r,n,o,i,a){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=function(e,t){return!t||"object"!==SF(t)&&"function"!=typeof t?_F(e):t}(this,xF(t).call(this,e,r,n))).dataSet=r,s.mapWidth=o,s.mapHeight=i;var l=_F(s);return n=n||{},s.source=a,l.animator=null,l.map=e,l.init(n),l.argCheck(n),s.canvasLayer=new mF({map:e,context:s.context,paneName:n.paneName,mixBlendMode:n.mixBlendMode,enableMassClear:n.enableMassClear,zIndex:n.zIndex,width:o,height:i,update:function(){l._canvasUpdate()}}),s.clickEvent=s.clickEvent.bind(_F(s)),s.mousemoveEvent=s.mousemoveEvent.bind(_F(s)),e.on("movestart",s.moveStartEvent.bind(_F(s))),e.on("moveend",s.moveEndEvent.bind(_F(s))),e.getView().on("change:center",s.zoomEvent.bind(_F(s))),e.getView().on("change:size",s.sizeEvent.bind(_F(s))),e.on("pointerdrag",s.dragEvent.bind(_F(s))),s.bindEvent(),s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CF(e,t)}(t,TF),r=t,(n=[{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"clickEvent",value:function(e){var r=e.pixel;OF(xF(t.prototype),"clickEvent",this).call(this,{x:r[0]+this.offset[0],y:r[1]+this.offset[1]},e)}},{key:"mousemoveEvent",value:function(e){var r=e.pixel;OF(xF(t.prototype),"mousemoveEvent",this).call(this,{x:r[0],y:r[1]},e)}},{key:"dragEvent",value:function(){this.clear(this.getContext())}},{key:"zoomEvent",value:function(){this.clear(this.getContext())}},{key:"sizeEvent",value:function(){this.canvasLayer.resize()}},{key:"moveStartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start)}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw()}},{key:"bindEvent",value:function(){var e=this,t=e.map;e.options.methods&&(e.options.methods.click&&t.on("click",e.clickEvent),e.options.methods.mousemove&&(e.pointerInteraction=new gF.a,e.pointerInteraction.handleMoveEvent_=function(t){e.mousemoveEvent(t)},t.addInteraction(e.pointerInteraction)))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.un("click",this.clickEvent),this.options.methods.mousemove&&e.removeInteraction(this.pointerInteraction))}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"update",value:function(e){var r=e||{},n=r.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),OF(xF(t.prototype),"update",this).call(this,{options:r.options})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(e){if(this.canvasLayer){var t=this,r=t.options.animation,n=t.map,o=t.canvasLayer.canvas.getContext(t.context);if(t.isEnabledTime()){if(void 0===e)return void t.clear(o);t.context&&"2d"!==t.context||(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);if(t.context&&"2d"!==t.context)o.clear(o.COLOR_BUFFER_BIT);else for(var i in t.options)o[i]=t.options[i];var a=n.getView().calculateExtent(),s=n.getPixelFromCoordinate([a[0],a[3]]);t._mapCenter=n.getView().getCenter(),t._mapCenterPx=n.getPixelFromCoordinate(t._mapCenter),t._reselutions=n.getView().getResolution(),t._rotation=-n.getView().getRotation();var l=t._reselutions,u=1;if("2d"!=this.context){var c=("undefined"==typeof window?{}:window).devicePixelRatio||1;u=c}var f={transferCoordinate:function(e){var r=(e[0]-t._mapCenter[0])/t._reselutions,n=(t._mapCenter[1]-e[1])/t._reselutions,o=[r+t._mapCenterPx[0],n+t._mapCenterPx[1]];return[((o=function(e,t,r){var n=(e[0]-t[0])*r+t[0],o=(e[1]-t[1])*r+t[1];return[n,o]}(o,t._mapCenterPx,1))[0]+t.offset[0])*u,(o[1]+t.offset[1])*u]}};void 0!==e&&(f.filter=function(t){var n=r.trails||10;return e&&t.time>e-n&&t.time<e}),t.isEnabledTime()&&!t.notFirst&&(t.canvasLayer.resize(t.mapWidth,t.mapHeight),t.notFirst=!0);var h=t.dataSet.get(f);t.processData(h),"m"===t.options.unit?(t.options.size&&(t.options._size=t.options.size/l),t.options.width&&(t.options._width=t.options.width/l),t.options.height&&(t.options._height=t.options.height/l)):(t.options._size=t.options.size,t.options._height=t.options.height,t.options._width=t.options.width);var p=n.getPixelFromCoordinate([0,0]);p=[p[0]-s[0],p[1]-s[1]],this.drawContext(o,h,t.options,{x:p[0],y:p[1]}),t.isEnabledTime()&&this.source.changed(),t.options.updateCallback&&t.options.updateCallback(e)}}},{key:"isEnabledTime",value:function(){var e=this.options.animation;return e&&!(!1===e.enabled)}},{key:"argCheck",value:function(e){"heatmap"===e.draw&&e.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}}])&&wF(r.prototype,n),o&&wF(r,o),t}();function EF(e){return(EF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function MF(e,t){return!t||"object"!==EF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jF(e){return(jF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AF(e,t){return(AF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var RF=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{};return(r=MF(this,jF(t).call(this,{attributions:n.attributions||"Â© 2018 ç¾åº¦ MapV with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",canvasFunction:function(e,t,r,n,o){var i=n[0]/r,a=n[1]/r,s=this.map.getSize()[0],l=this.map.getSize()[1];this.layer||(this.layer=new PF(this.map,this.dataSet,this.mapvOptions,i,a,this));this.layer.pixelRatio=r,this.layer.offset=[(i-s)/2,(a-l)/2],this.rotate?this.rotate!==this.map.getView().getRotation()&&(this.layer.canvasLayer.resize(i,a),this.rotate=this.map.getView().getRotation()):this.rotate=this.map.getView().getRotation();var u=this.layer.canvasLayer.canvas;this.layer.isEnabledTime()||(this.layer.canvasLayer.resize(i,a),this.layer.canvasLayer.draw());this.context||(this.context=aj.createCanvasContext2D(i,a));var c=this.context.canvas;this.context.clearRect(0,0,c.width,c.height),c.width=n[0],c.height=n[1],c.style.width=n[0]+"px",c.style.height=n[1]+"px",this.context.drawImage(u,0,0),(this.resolution!==t||JSON.stringify(this.extent)!==JSON.stringify(e))&&(this.resolution=t,this.extent=e);return this.context.canvas},logo:"4"===aj.getOlVersion()?n.logo:null,projection:n.projection,ratio:n.ratio,resolutions:n.resolutions,state:n.state}))).map=e.map,r.dataSet=e.dataSet,r.mapvOptions=e.mapvOptions,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AF(e,t)}(t,qI.a),r=t,(n=[{key:"addData",value:function(e,t){this.layer.addData(e,t)}},{key:"getData",value:function(){return this.layer&&(this.dataSet=this.layer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.layer&&this.layer.removeData(e)}},{key:"clearData",value:function(){this.layer.clearData()}},{key:"update",value:function(e){this.layer.update(e),this.changed()}}])&&kF(r.prototype,n),o&&kF(r,o),t}();function LF(e){return(LF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NF(e,t){return!t||"object"!==LF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FF(e){return(FF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DF(e,t){return(DF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GF=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=NF(this,FF(t).call(this,e,r))).style=r.style,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n.themeField=r.themeField,n.styleGroups=r.styleGroups,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DF(e,t)}(t,sF),r=t,(n=[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,sF.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=NT.transformStyle(this.highlightStyle);for(var n=new tE(e,this,NT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=Te.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(n===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s>=i[u].start&&s<i[u].end){var f=i[u].style;t=Te.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=Te.copyAttributesWithClip(r.style)),t}},{key:"canvasFunctionInternal_",value:function(e,t,r,n,o){return sF.prototype.canvasFunctionInternal_.apply(this,arguments)}}])&&IF(r.prototype,n),o&&IF(r,o),t}();function BF(e){return(BF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VF(e,t){return!t||"object"!==BF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HF(e){return(HF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zF(e,t){return(zF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qF=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=VF(this,HF(t).call(this,e,r,n))).symbolType=r,o.symbolSetting=n.symbolSetting,o.themeField=n.themeField,o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zF(e,t)}(t,oN),r=t,(n=[{key:"destroy",value:function(){this.symbolType=null,this.symbolSetting=null,this.themeField=null,oN.prototype.destroy.apply(this,arguments)}},{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return DT[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new DT[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}},{key:"canvasFunctionInternal_",value:function(e,t,r,n,o){return oN.prototype.canvasFunctionInternal_.apply(this,arguments)}}])&&UF(r.prototype,n),o&&UF(r,o),t}(),JF=r(34);function WF(e){return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XF(e,t){return!t||"object"!==WF(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QF(e){return(QF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KF(e,t){return(KF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ZF=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e||{};return(r=XF(this,QF(t).call(this,{attributions:n.attributions||"<span>Â© <a href='https://turfjs.org/' target='_blank'>turfjs</a></span> with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",features:n.features,format:n.format,extent:n.extent,logo:"4"===aj.getOlVersion()?n.logo:null,projection:n.projection,wrapX:n.wrapX}))).turfMap={"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},r.turfOptionMap={"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KF(e,t)}(t,RI.a),r=t,(n=[{key:"process",value:function(e,t,r,n){var o;try{o=JF[e.split(".")[1]].apply(this,this.parse(e,t))}catch(r){o=JF[e.split(".")[1]].apply(this,this.parseOption(e,t))}var i=null;try{i=(new KM.a).readFeatures(o)}catch(e){return void(r&&r(o))}(n=null==n||n)&&this.addFeatures(i),r&&r(o)}},{key:"parse",value:function(e,t){if("Transformation.union"===e)return t.A;var r=[],n=this.turfMap[e];return n&&n.map(function(e){return r.push(t[e]),t[e]}),r}},{key:"parseOption",value:function(e,t){var r=[];return this.turfOptionMap[e].map(function(e){if(e instanceof Object){var n=e;Object.keys(n).forEach(function(e){n[e]=t[e]}),r.push(n)}else r.push(t[e]);return t}),r}}])&&YF(r.prototype,n),o&&YF(r,o),t}();function $F(e){return($F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tD(e,t){return!t||"object"!==$F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rD(e){return(rD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nD(e,t){return(nD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oD=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tD(this,rD(t).call(this,e,r))).themeField=r.themeField,n.style=r.style,n.styleGroups=r.styleGroups,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nD(e,t)}(t,sF),r=t,(n=[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,sF.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=NT.transformStyle(this.highlightStyle);for(var n=new tE(e,this,NT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=Te.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(n===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s.toString()===i[u].value.toString()){var f=i[u].style;t=Te.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=Te.copyAttributesWithClip(r.style)),t}},{key:"canvasFunctionInternal_",value:function(e,t,r,n,o){return sF.prototype.canvasFunctionInternal_.apply(this,arguments)}}])&&eD(r.prototype,n),o&&eD(r,o),t}();function iD(e){return(iD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sD(e,t){return!t||"object"!==iD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lD(e){return(lD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uD(e,t){return(uD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var cD=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=sD(this,lD(t).call(this)),!e)return sD(r);var n=!1;void 0!==e.donotNeedServerCartoCss&&(n=e.donotNeedServerCartoCss),t.setDonotNeedServerCartoCss(n),e.view&&t.setView(e.view),e.url&&t.setUrl(e.url),e.cartoCss&&t.setCartoCss(e.cartoCss);var o=new cj.a({image:new yj.a({radius:5,fill:new mj.a({color:"blue"})})});e.selectedPointStyle&&(o=e.selectedPointStyle),t.setSelectedPointStyle(o);var i=new cj.a({stroke:new bj.a({color:"blue",width:3})});e.selectedLineStyle&&(i=e.selectedLineStyle),t.setSelectedLineStyle(i);var a=new cj.a({fill:new mj.a({color:[0,0,255,.5]}),stroke:new bj.a({color:"blue",width:3})});e.selectedRegionStyle&&(a=e.selectedRegionStyle),t.setSelectedRegionStyle(a);var s=new cj.a({text:new Sj.a({font:"15px Microsoft YaHei",fill:new mj.a({color:"blue"}),stroke:new bj.a({color:"white",width:1})})});e.selectedTextStyle&&(s=e.selectedTextStyle),t.setSelectedTextStyle(s);var l=new XMLHttpRequest;return l.onreadystatechange=function(){if(4==l.readyState){for(var e=JSON.parse(l.responseText),r={},n=0,o=e.length;n<o;n++)for(var i=e[n].subLayers.layers,a=0,s=i.length;a<s;a++)i[a].layerIndex=s-a,r[i[a].name]=i[a];if(t.setLayersInfo(r),!t.getDonotNeedServerCartoCss()){var u=new XMLHttpRequest;u.open("GET",t.getUrl()+"/tileFeature/vectorstyles.json",!1),u.onreadystatechange=function(){if(4==u.readyState){var e,n=(new dr).read(u.responseText);if(n.style&&"cartoCSS"===n.type){for(var o in e=(e=(e=n.style).replace(/[@]/gi,"___")).replace(/\\#/gi,"___"),r){var i=o.replace(/[@#\s]/gi,"___");e=e.replace(o.replace(/[#]/gi,"\\#"),i)}e=(e=e.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}var a={};new WO(e).getShaders().map(function(e){return a[e.elements[0].clean]=a[e.elements[0].clean]||{},a[e.elements[0].clean][e.attachment]=a[e.elements[0].clean][e.attachment]||[],a[e.elements[0].clean][e.attachment].push(e),e}),t.setCartoShaders(a)}},u.send(null)}if(t.getCartoCss()){var c={};new WO(t.getCartoCss()).getShaders().map(function(e){return c[e.elements[0].clean]=c[e.elements[0].clean]||{},c[e.elements[0].clean][e.attachment]=c[e.elements[0].clean][e.attachment]||[],c[e.elements[0].clean][e.attachment].push(e),e}),t.setClientCartoShaders(c)}}},l.open("GET",t.getUrl()+"/layers.json",!1),l.send(null),r.on("featureSelected",function(e){t.setSelectedId(e.selectedId),t.setLayerName(e.layerName)}),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uD(e,t)}(t,o.a),r=t,i=[{key:"setCartoShaders",value:function(e){this.cartoShaders=e}},{key:"getCartoShaders",value:function(){return this.cartoShaders}},{key:"setClientCartoShaders",value:function(e){this.clientCartoShaders=e}},{key:"getClientCartoShaders",value:function(){return this.clientCartoShaders}},{key:"setCartoCss",value:function(e){this.cartoCss=e}},{key:"getCartoCss",value:function(){return this.cartoCss}},{key:"setDonotNeedServerCartoCss",value:function(e){this.donotNeedServerCartoCss=e}},{key:"getDonotNeedServerCartoCss",value:function(){return this.donotNeedServerCartoCss}},{key:"setLayersInfo",value:function(e){this.layersInfo=e}},{key:"getLayersInfo",value:function(){return this.layersInfo}},{key:"setUrl",value:function(e){this.url=e}},{key:"getUrl",value:function(){return this.url}},{key:"setView",value:function(e){this.view=e}},{key:"getView",value:function(){return this.view}},{key:"setSelectedId",value:function(e){this.selectedId=e}},{key:"getSelectedId",value:function(){return this.selectedId}},{key:"setLayerName",value:function(e){this.layerName=e}},{key:"getLayerName",value:function(){return this.layerName}},{key:"setSelectedPointStyle",value:function(e){this.selectedPointStyle=e}},{key:"setSelectedLineStyle",value:function(e){this.selectedLineStyle=e}},{key:"setSelectedRegionStyle",value:function(e){this.selectedRegionStyle=e}},{key:"setSelectedTextStyle",value:function(e){this.selectedTextStyle=e}},{key:"getSelectedStyle",value:function(e){return"POINT"===e||"MULTIPOINT"===e?this.selectedPointStyle:"LINESTRING"===e||"MULTILINESTRING"===e?this.selectedLineStyle:"POLYGON"===e||"MULTIPOLYGON"===e?this.selectedRegionStyle:"TEXT"===e?this.selectedTextStyle:void 0}},{key:"getLayerInfo",value:function(e){var r=t.getLayersInfo();if(void 0===r)return null;var n=r[e];if(!n)return null;var o={layerIndex:n.layerIndex,ugcLayerType:n.ugcLayerType};switch(n.ugcLayerType){case"VECTOR":o.layerStyle=n.style?n.style:null;break;case"THEME":var i=n.theme;o.layerStyle=i?i.defaultStyle:null,i&&"LABEL"===i.type&&(o.type=i.type,o.textField=i.labelExpression);break;default:n.style&&(o.layerStyle=n.style)}return o}},{key:"getStyle",value:function(e,r){var n=t.getUrl(),o=t.getView(),i=o.getZoom(),a=aj.resolutionToScale(o.getResolution(),96,g.METER),s=e.replace(/(@)/gi,"___").replace(/(#)/gi,"___");if(t.getCartoCss()&&t.getClientCartoShaders()[s])return c(t.getClientCartoShaders()[s]);var l=t.getLayerInfo(e);if(!t.getDonotNeedServerCartoCss()&&t.getCartoShaders()[s]){if(r.getProperties().textStyle||r.getProperties().TEXT_FEATURE_CONTENT||"LABEL"==l.type&&l.textField){var u=Oj.getValidStyleFromLayerInfo(l,r,n);return"POINT"===r.getGeometry().getType().toUpperCase()&&(u=function(e,r,n){var o=Oj.getValidStyleFromLayerInfo(e,r,n);if("LABEL"==e.type){r.setProperties({type:"TEXT"});for(var i=c(t.getCartoShaders()[s]),a=o.getText(),l=0;l<i.length;l++)a?a.setText(i[l].getText().getText()):a=i[l].getText();return o.setText(a),o}return o}(l,r,n)),u}return c(t.getCartoShaders()[s])}if(l)return Oj.getValidStyleFromLayerInfo(l,r,n);function c(e){var t=[];for(var o in e)e[o].map(function(e){return t.push(Oj.getStyleFromCarto(i,a,e,r,!0,n)),e});return t}}}],(n=[{key:"getFeatureStyle",value:function(e){var r,n=e.getProperties().layerName||e.getProperties().layer,o=e.getProperties().id||parseInt(e.getProperties().SmID);if(e.getProperties().type&&"TEXT"===e.getProperties().type.toUpperCase()?(r=t.getSelectedStyle(e.getProperties().type.toUpperCase()),e.getProperties().texts?r.getText().text_=e.getProperties().texts[0]:r.getText().text_=""):r=t.getSelectedStyle(e.getGeometry().getType().toUpperCase()),r){var i=t.getLayerName(),a=t.getSelectedId();if(i===n&&o===a)return r}return t.getStyle(n,e)}}])&&aD(r.prototype,n),i&&aD(r,i),t}(),fD=r(53),hD=r.n(fD),pD=r(11),yD=r.n(pD),dD=r(54),mD=r.n(dD);function vD(e){return(vD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gD(e){return(gD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wD(e,t){return(wD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _D=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e.url&&void 0===e.style&&console.error("one of 'options.style' or 'options.style' is required");var n,o,i=/\{z\}/g,a=/\{x\}/g,s=/\{y\}/g,l=/\{-y\}/g;e.crossOrigin="anonymous",e.attributions=e.attributions||"Tile Data <span>Â© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",["4","5"].includes(aj.getOlVersion())||(e.tileSize=e.format instanceof yD.a&&e.style?512:256),n=this,o=gD(t).call(this,{attributions:e.attributions,cacheSize:e.cacheSize,format:e.format||new KM.a,logo:"4"===aj.getOlVersion()?e.logo:null,overlaps:e.overlaps,projection:e.projection,state:e.format instanceof yD.a&&e.style&&"[object String]"==Object.prototype.toString.call(e.style)?"loading":e.state,tileClass:e.tileClass,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.format instanceof yD.a&&e.style?function(e){return e?u._tileUrl.replace(i,e[0].toString()).replace(a,e[1].toString()).replace(s,function(){var t=["4","5"].includes(aj.getOlVersion())?-e[2]-1:e[2];return t.toString()}).replace(l,function(){var t=e[0],r=u.tileGrid.getFullTileRange(t),n=r.getHeight()+e[2];return n.toString()}):void 0}:function(e,t,r){u.tileGrid||(u.tileGrid=u.getTileGridForProjection(r));var n=Vj.toSize(u.tileGrid.getTileSize(i,u.tmpSize)),o="",i=e[0],a=e[1],s=["4","5"].includes(aj.getOlVersion())?-e[2]-1:e[2];if("ZXY"===u.tileType)o="&width="+n[0]+"&height="+n[1]+"&x="+a+"&y="+s+"&z="+i;else if("ViewBounds"===u.tileType){var l=u.tileGrid.getTileCoordExtent(e);o="&width="+n[0]+"&height="+n[1]+"&viewBounds="+l[0]+","+l[1]+","+l[2]+","+l[3]}else{var c=u.tileGrid.getOrigin(i),f=u.tileGrid.getResolution(i),h=r.getUnits()||"degrees";"degrees"===h&&(h=g.DEGREE),"m"===h&&(h=g.METER);var p=aj.resolutionToScale(f,96,h);o="&x="+a+"&y="+s+"&width="+n[0]+"&height="+n[1]+"&scale="+p+"&origin={'x':"+c[0]+",'y':"+c[1]+"}"}return u._tileUrl+encodeURI(o)},tileLoadFunction:e.format instanceof yD.a?void 0:function(e,t){var r=new RegExp("(^|\\?|&)width=([^&]*)(\\s|&|$)"),n=new RegExp("(^|\\?|&)height=([^&]*)(\\s|&|$)"),o=Number(t.match(r)[2]),i=Number(t.match(n)[2]);e.setLoader(function(r,n,a){cn.get(t).then(function(t){if(e.getFormat()instanceof KM.a)return t.json()}).then(function(t){var n=[];if(e.getFormat()instanceof KM.a){t.recordsets.map(function(e){return e.features.map(function(e){for(var t=[],r=0,n=0;n<e.geometry.parts.length;n++){for(var o=2*e.geometry.parts[n],i=0,a=r;i<o;i+=2,a+=2)t.push(new nt(e.geometry.points[a],e.geometry.points[a+1]));r+=o}return e.geometry.points=t,e}),e}),t.recordsets.map(function(e){return e.features.map(function(t){return t.layerName=e.layerName,t.type=t.geometry.type,n.push(t),t}),e});var s=new mD.a({extent:[0,0,256,256],code:"TILE_PIXELS",units:"tile-pixels"});["4","5"].includes(aj.getOlVersion())?(e.setExtent([0,0,o,i]),e.setProjection(s),n=e.getFormat().readFeatures(aj.toGeoJSON(n))):n=e.getFormat().readFeatures(aj.toGeoJSON(n),{extent:r,dataProjection:s,featureProjection:a}),e.setFeatures(n)}})})},url:e.url,urls:e.urls,wrapX:void 0!==e.wrapX&&e.wrapX,tileSize:e.tileSize||null,zDirection:["4","5"].includes(aj.getOlVersion())?null:0});var u=SD(r=!o||"object"!==vD(o)&&"function"!=typeof o?SD(n):o);return u._tileType=e.tileType||"ScaleXY",r.vectorTileStyles=new cD,e.format instanceof yD.a&&e.style?"[object String]"==Object.prototype.toString.call(e.style)?cn.get(e.style).then(function(e){return e.json()}).then(function(t){r._fillByStyleJSON(t,e.source),r.setState("ready")}):r._fillByStyleJSON(e.style,e.source):r._fillByRestMapOptions(e.url,e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wD(e,t)}(t,hD.a),r=t,o=[{key:"optionsFromMapJSON",value:function(e,t){var r={};r.url=e,r.crossOrigin="anonymous";var n=[t.bounds.left,t.bounds.bottom,t.bounds.right,t.bounds.top],o=function(){var e,r=n[2]-n[0],o=n[3]-n[1],i=r>=o?r:o;e=i===r?i/t.viewer.width:i/t.viewer.height;var a=[],s=g.METER;t.coordUnit===g.DEGREE&&(s=g.DEGREE);if(t.visibleScales.length>0)for(var l=function(e){var t=e.visibleScales;if(!t)return null;var r=e.viewBounds,n=e.coordUnit,o=e.viewer,i=e.scale,a=e.datumAxis;r=new Me(r.left,r.bottom,r.right,r.top),o=new me(o.rightBottom.x,o.rightBottom.y),n=n.toLowerCase(),a=a||6378137;var s=n,l=Te.calculateDpi(r,o,i,s,a),u=function(e){if(null===e)return;var t,r;r=e.length,t=[r];for(var n=0;n<r;n++)t[n]=Te.getResolutionFromScaleDpi(e[n],l,s,a);return t}(t),c=u.length;t=[c];for(var f=0;f<c;f++)t[f]=Te.getScaleFromResolutionDpi(u[f],l,s,a);return t}(t),u=0;u<l.length;u++)a.push(aj.scaleToResolution(l[u],96,s));else for(var c=0;c<17;c++)a.push(e/Math.pow(2,c));return a}();return r.tileGrid=new Rj.a({extent:n,resolutions:o}),r}}],(n=[{key:"_fillByStyleJSON",value:function(e,t){if(t||(t=Object.keys(e.sources)[0]),e.sources&&e.sources[t]&&(this._tileUrl=e.sources[t].tiles[0]),e.metadata&&e.metadata.indexbounds){for(var r=e.metadata.indexbounds,n=Math.max(r[2]-r[0],r[3]-r[1]),o=[],i=0;i<30;i++)o.push(n/512/Math.pow(2,i));this.tileGrid=new Rj.a({extent:e.metadata.indexbounds,resolutions:o,tileSize:[512,512]})}}},{key:"_fillByRestMapOptions",value:function(e,t){this._tileUrl=t.url+"/tileFeature.json?",t.format instanceof yD.a&&(this._tileUrl=t.url+"/tileFeature.mvt?"),t.serverType=t.serverType||h.ISERVER,this._tileUrl=function(e,t){var r,n,o=e;switch(t){case h.IPORTAL:n=hn.getToken(e),(r=n?new Yt(n,"token"):null)||(n=hn.getKey(e),r=n?new Yt(n,"key"):null);break;case h.ONLINE:n=hn.getKey(e),r=n?new Yt(n,"key"):null;break;default:n=hn.getToken(e),r=n?new Yt(n,"token"):null}r&&(o+="&"+r.getUrlParameters());return o}(this._tileUrl,t.serverType);var r=!0;void 0!==t.returnAttributes&&(r=t.returnAttributes);var n="";n+="&returnAttributes="+r,void 0!==t._cache&&(n+="&_cache="+t._cache),void 0!==t.layersID&&(n+="&layersID="+t.layersID),void 0!==t.layerNames&&(n+="&layerNames="+t.layerNames),void 0!==t.expands&&(n+="&expands="+t.expands),void 0!==t.compressTolerance&&(n+="&compressTolerance="+t.compressTolerance),void 0!==t.coordinateType&&(n+="&coordinateType="+t.coordinateType),void 0!==t.returnCutEdges&&(n+="&returnCutEdges="+t.returnCutEdges),this._tileUrl+=encodeURI(n)}}])&&bD(r.prototype,n),o&&bD(r,o),t}();function OD(e){return(OD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CD(e,t){return!t||"object"!==OD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TD(e){return(TD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PD(e,t){return(PD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ED=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=r||{};function i(e,t,r,n,o){var i=n[0]*r,a=n[1]*r;if(this.rootCanvas.width=this.maxWidth=i,this.rootCanvas.height=this.maxHeight=a,!this.features)return this.rootCanvas;this.pixelRatio=r;var s=this.map.getSize()[0]*r,l=this.map.getSize()[1]*r;return this.offset=[(i-s)/2/r,(a-l)/2/r],this.updateHeatPoints(t),this.rootCanvas}if((n=CD(this,TD(t).call(this,{attributions:o.attributions||"Map Data <span>Â© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> with <span>Â© <a href='https://iclient.supermap.io' target='_blank'>SuperMap iClient</a></span>",canvasFunction:i,logo:"4"===aj.getOlVersion()?o.logo:null,projection:o.projection,ratio:o.ratio,resolutions:o.resolutions,state:o.state}))).canvasFunctionInternal_=i,n.features=[],n.name=e,!o.map)throw new Error("options.map is not found.");n.map=o.map,n.id=o.id?o.id:Te.createUniqueID("HeatMapSource_"),n.opacity=o.opacity?o.opacity:1,n.colors=o.colors?o.colors:["blue","cyan","lime","yellow","red"],n.useGeoUnit=!!o.useGeoUnit&&o.useGeoUnit,n.radius=o.radius?o.radius:50,n.featureWeight=o.featureWeight?o.featureWeight:null,n.maxWeight=null,n.minWeight=null,n.maxWidth=null,n.maxHeight=null,n.rootCanvas=document.createElement("canvas");var a=n.map.getSize();return n.rootCanvas.width=n.maxWidth=parseInt(a[0]),n.rootCanvas.height=n.maxHeight=parseInt(a[1]),Te.modifyDOMElement(n.rootCanvas,null,null,null,null,null,null,n.opacity),n.canvasContext=n.rootCanvas.getContext("2d"),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PD(e,t)}(t,qI.a),r=t,(n=[{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.changed()}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var t=this.rootCanvas;Te.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map&&this.changed()}}},{key:"updateHeatPoints",value:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,r,n,o,i,a,s=[];this.useRadius=this.useGeoUnit?parseInt(this.radius/e):this.radius;for(var l=0;l<this.features.length;l++){var u=this.features[l],c=u.geometry,f=this.getLocalXY(new Ee(c.x,c.y));this.featureWeight?(f.weight=u.attributes[this.featureWeight],this.maxWeight||(o=o||f.weight,i=i||f.weight,o=Math.max(o,f.weight),i=Math.min(i,f.weight))):f.weight=1,t=Math.floor(f[0]),r=Math.floor(f[1]),n=f.weight,s.push([t,r,n])}this.maxWeight?this.draw(s,this.maxWeight):(a=o&&i?(o+i)/2:1,this.draw(s,a))}},{key:"draw",value:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<e.length;n++){var o=e[n];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var r,n=0;n<e.length;n+=4)(r=4*e[n+3])&&(e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2])}},{key:"drawCircle",value:function(e){var t=e/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*e,r.width=2*e,n.shadowOffsetX=n.shadowOffsetY=2*e,n.shadowBlur=t,n.shadowColor="#000000",n.beginPath(),n.arc(-e,-e,e/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),r=t.getContext("2d"),n=r.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var o=1,i=0,a=e.length;i<a;i++)n.addColorStop(o/a,e[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getLocalXY",value:function(e){var t,r=this.map;(e instanceof nt||e instanceof vt)&&(t=r.getPixelFromCoordinate([e.x,e.y])),e instanceof Ee&&(t=r.getPixelFromCoordinate([e.lon,e.lat]));var n=-r.getView().getRotation(),o=r.getPixelFromCoordinate(r.getView().getCenter()),i=t;return this.pixelRatio&&(i=this.scale(t,o,this.pixelRatio)),t&&o&&(i=this.rotate(i,n,o)),this.offset&&i?[i[0]+this.offset[0],i[1]+this.offset[1]]:i}},{key:"rotate",value:function(e,t,r){return[Math.cos(t)*(e[0]-r[0])-Math.sin(t)*(e[1]-r[1])+r[0],Math.sin(t)*(e[0]-r[0])+Math.cos(t)*(e[1]-r[1])+r[1]]}},{key:"scale",value:function(e,t,r){return[(e[0]-t[0])*r+t[0],(e[1]-t[1])*r+t[1]]}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();Te.isArray(e)||(e=[e]);for(var t,r,n=[],o=0,i=e.length;o<i;o++)t=e[o],-1!==(r=Te.indexOf(this.features,t))?this.features.splice(r,1):n.push(t);var a=0==n.length;this.dispatchEvent({type:"featuresremoved",value:{features:n,succeed:a}}),this.changed()}}},{key:"removeAllFeatures",value:function(){this.features=[],this.changed()}},{key:"toiClientFeature",value:function(e){aj.isArray(e)||(e=[e]);for(var t,r,n=[],o=0,i=e.length;o<i;o++)if(e[o]instanceof UI.a)e[o].getGeometry()instanceof XM.a&&(t=new nt(e[o].getGeometry().getCoordinates()[0],e[o].getGeometry().getCoordinates()[1]),r=e[o].getProperties().Properties?e[o].getProperties().Properties:{},n.push(new sr(t,r)));else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[o].type)){var a=new Br;n=n.concat(a.read(e[o]))}else{if(!e[o].geometry||!e[o].geometry.parts)throw new Error("Features[".concat(o,"]'s type does not match, please check."));n.push(ug.fromJson(e[o]).toFeature())}return n}}])&&xD(r.prototype,n),o&&xD(r,o),t}(),kD=r(24),MD=r.n(kD),jD=function(e){if(MD.a.prototype.getFlatMidpoint||(MD.a.prototype.getFlatMidpoint=function(){return this.getCoordinateAt(.5)}),"4"===aj.getOlVersion()&&window&&window.ol&&window.ol.geom.flat){window.targetMapCache=e;var t=window.ol;t.format.MVT.prototype.readProjection=function(e){return new t.proj.Projection({code:"",units:t.proj.Units.TILE_PIXELS})},t.format.MVT.prototype.readProjection=function(e){return new t.proj.Projection({code:"",units:t.proj.Units.TILE_PIXELS})},t.render.canvas.Replay.prototype.applyFill=function(e,r){var n=e.fillStyle,o=[t.render.canvas.Instruction.SET_FILL_STYLE,n];if("string"!=typeof n){var i=window.targetMapCache.getView().getProjection().getExtent();o.push([i[0],i[3]])}this.instructions.push(o)},t.render.canvas.Replay.prototype.applyFill=function(e,r){var n=e.fillStyle,o=[t.render.canvas.Instruction.SET_FILL_STYLE,n];if("string"!=typeof n){var i=window.targetMapCache.getView().getProjection().getExtent();o.push([i[0],i[3]])}this.instructions.push(o)},t.format.MVT.prototype.createFeature_=function(e,r,n){var o,i=r.type;if(0===i)return null;var a=r.id,s=r.properties;s[this.layerName_]=r.layer.name;var l=[],u=[];t.format.MVT.readRawGeometry_(e,r,l,u);var c=t.format.MVT.getGeometryType_(i,u.length);if(this.featureClass_===t.render.Feature)o=new this.featureClass_(c,l,u,s,a);else{var f;if(c==t.geom.GeometryType.POLYGON){for(var h=[],p=0,y=0,d=0,m=u.length;d<m;++d){var v=u[d];t.geom.flat.orient.linearRingIsClockwise(l,p,v,2)||(h.push(u.slice(y,d+1)),y=d+1),p=v}h.length>1?(u=h,f=new t.geom.MultiPolygon(null)):f=new t.geom.Polygon(null)}else f=c===t.geom.GeometryType.POINT?new t.geom.Point(null):c===t.geom.GeometryType.LINE_STRING?new t.geom.LineString(null):c===t.geom.GeometryType.POLYGON?new t.geom.Polygon(null):c===t.geom.GeometryType.MULTI_POINT?new t.geom.MultiPoint(null):c===t.geom.GeometryType.MULTI_LINE_STRING?new t.geom.MultiLineString(null):null;if(f){f.setFlatCoordinates(t.geom.GeometryLayout.XY,l,u),o=new this.featureClass_,this.geometryName_&&o.setGeometryName(this.geometryName_);var b=t.format.Feature.transformWithOptions(f,!1,this.adaptOptions(n));o.setGeometry(b),o.setId(a),o.setProperties(s)}}return o},t.geom.flat.textpath.lineString=function(e,r,n,o,i,a,s,l){for(var u=[],c=Math.atan2(e[n-o+1]-e[r+1],e[n-o]-e[r]),f=c<-.785||c>2.356,h=c<-.785&&c>-2.356||c>.785&&c<2.356,p=i.length,y=e[r],d=e[r+1],m=e[r+=o],v=e[r+1],b=0,g=Math.sqrt(Math.pow(m-y,2)+Math.pow(v-d,2));r<n-o&&b+g<s;)y=m,d=v,m=e[r+=o],v=e[r+1],b+=g,g=Math.sqrt(Math.pow(m-y,2)+Math.pow(v-d,2));for(var S,w,_,O,x=(s-b)/g,C=t.math.lerp(y,m,x),T=t.math.lerp(d,v,x),P="",E=0,k=0;k<p;++k){w=f?p-k-1:k;var M=i.charAt(w),j=M.charCodeAt(0),A=j>=19968&&j<=40907,R=a(P=f?M+P:P+M)-E;for(E+=R;r<n-o&&Math.sqrt(Math.pow(m-C,2)+Math.pow(v-T,2))<R/2;)y=m,d=v,m=e[r+=o],v=e[r+1];var L=Math.pow(m-y,2)+Math.pow(v-d,2),I=2*(m-y)*(y-C)+2*(v-d)*(d-T),N=Math.pow(y-C,2)+Math.pow(d-T,2)-Math.pow(R/2,2),F=(-I+Math.sqrt(I*I-4*L*N))/(2*L),D=(-I-Math.sqrt(I*I-4*L*N))/(2*L);x=F<0||F>1?D:D<0||D>1?F:F<D?D:F;for(var G=t.math.lerp(y,m,x),B=t.math.lerp(d,v,x);r<n-o&&Math.sqrt(Math.pow(m-G,2)+Math.pow(v-B,2))<R/2;)y=m,d=v,m=e[r+=o],v=e[r+1];L=Math.pow(m-y,2)+Math.pow(v-d,2),I=2*(m-y)*(y-G)+2*(v-d)*(d-B),N=Math.pow(y-G,2)+Math.pow(d-B,2)-Math.pow(R/2,2),F=(-I+Math.sqrt(I*I-4*L*N))/(2*L),D=(-I-Math.sqrt(I*I-4*L*N))/(2*L),x=F<0||F>1?D:D<0||D>1?F:F<D?D:F;var U=t.math.lerp(y,m,x),V=t.math.lerp(d,v,x),H=Math.atan2(V-T,U-C);if(f&&(H+=H>0?-Math.PI:Math.PI),A&&h&&(H+=H>0?-Math.PI/2:Math.PI/2),void 0!==_){var z=H-_;if(z+=z>Math.PI?-2*Math.PI:z<-Math.PI?2*Math.PI:0,A===O?Math.abs(z)>l:Math.abs(z)>l+Math.PI/2)return null}_!=H||h?(E=R,S=[G,B,R/2,H,P=M],f?u.unshift(S):u.push(S),_=H,O=A):(f&&(S[0]=G,S[1]=B,S[2]=R/2),S[4]=P),C=U,T=V,s+=R}return u},t.layer.VectorTile.prototype.setFastRender=function(e){return this.fastRender=e},t.renderer.canvas.VectorTileLayer.prototype.postCompose=function(e,r,n){var o,i,a=this.getLayer(),s=a.getDeclutter()?{}:null,l=a.getSource(),u=a.getRenderMode(),c=t.renderer.canvas.VectorTileLayer.VECTOR_REPLAYS[u],f=r.pixelRatio,h=r.viewState.rotation,p=r.size;h&&(o=Math.round(f*p[0]/2),i=Math.round(f*p[1]/2),t.render.canvas.rotateAtOffset(e,-h,o,i)),s&&this.declutterTree_.clear();for(var y=this.renderedTiles,d=l.getTileGridForProjection(r.viewState.projection),m=[],v=[],b=y.length-1;b>=0;--b){var g=y[b];if(g.getState()!=t.TileState.ABORT)for(var S=g.tileCoord,w=d.getTileCoordExtent(S)[0]-d.getTileCoordExtent(g.wrappedTileCoord)[0],_=void 0,O=0,x=g.tileKeys.length;O<x;++O){var C=g.getTile(g.tileKeys[O]);if(C.getState()!=t.TileState.ERROR){var T=C.getReplayGroup(a,S.toString());if(u==t.layer.VectorTileRenderType.VECTOR||T&&T.hasReplays(c)){_||(_=this.getTransform(r,w));var P=C.tileCoord[0],E=T.getClipCoords(_);e.save(),e.globalAlpha=n.opacity;for(var k=0,M=m.length;k<M;++k){var j=m[k];P<v[k]&&(e.beginPath(),e.moveTo(E[0],E[1]),e.lineTo(E[2],E[3]),e.lineTo(E[4],E[5]),e.lineTo(E[6],E[7]),e.moveTo(j[6],j[7]),e.lineTo(j[4],j[5]),e.lineTo(j[2],j[3]),e.lineTo(j[0],j[1]),e.clip())}T.replay(e,_,h,{},c,s),e.restore(),m.push(E),v.push(P)}else!0===a.fastRender&&(C.replayGroups_={},C.features_=[])}}}s&&t.render.canvas.ReplayGroup.replayDeclutter(s,e,h),h&&t.render.canvas.rotateAtOffset(e,h,o,i),t.renderer.canvas.TileLayer.prototype.postCompose.apply(this,arguments)}}};
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/window.olExtends=jD;var AD=r(55),RD=r.n(AD);function LD(e){return(LD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ID(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ND(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FD(e,t){return!t||"object"!==LD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DD(e){return(DD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GD(e,t){return(GD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var BD=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=FD(this,DD(t).call(this)),e=e||{},r.spriteRegEx=/^(.*)(\?.*)$/,r.defaultFont=["DIN Offc Pro Medium","Arial Unicode MS Regular"],r.map=e.map,r.source=e.source,r.styleTarget=e.style||e.url+"/tileFeature/vectorstyles.json?type=MapBox_GL&styleonly=true",r.resolutions=e.resolutions,r.selectedObjects=[],r.selectedStyle=e.selectedStyle||function(){return new cj.a({fill:new mj.a({color:"rgba(255, 0, 0, 1)"}),stroke:new bj.a({color:"rgba(255, 0, 0, 1)",width:10}),text:new Sj.a({font:'normal 400 11.19px "Microsoft YaHei"',placement:"point",fill:new mj.a({color:"blue"})}),image:new yj.a({radius:5,fill:new mj.a({color:"blue"})})})},r.layersBySourceLayer={},jD(r.map),r._loadStyle(r.styleTarget),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GD(e,t)}(t,o.a),r=t,(n=[{key:"getStyleFunction",value:function(){return this.featureStyleFuntion}},{key:"getStylesBySourceLayer",value:function(e){if(this.layersBySourceLayer[e])return this.layersBySourceLayer[e];for(var t=[],r=0;r<this._mbStyle.layers.length;r++){var n=this._mbStyle.layers[r];n["source-layer"]===e&&t.push(n)}return this.layersBySourceLayer[e]=t,t}},{key:"setSelectedId",value:function(e,t){this.selectedObjects=[],this.selectedObjects.push({id:e,sourceLayer:t})}},{key:"setSelectedObjects",value:function(e){Array.isArray(e)||(e=[e]),this.selectedObjects=[],this.selectedObjects=e}},{key:"addSelectedObjects",value:function(e){var t;Array.isArray(e)||(e=[e]),(t=this.selectedObjects).push.apply(t,ID(e))}},{key:"removeSelectedObjects",value:function(e){var t=this;Array.isArray(e)||(e=[e]),e.forEach(function(e){RD()(t.selectedObjects,function(t){return e.id===t.id&&e.sourceLayer===t.sourceLayer})})}},{key:"clearSelectedObjects",value:function(){this.selectedObjects=[]}},{key:"updateStyles",value:function(e){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);var t={};e.forEach(function(e){t[e.id]=e});var r=0;for(var n in this._mbStyle.layers){var o=this._mbStyle.layers[n];if(r>=e.length)break;if(t[o.id]){var i=JSON.parse(JSON.stringify(t[o.id]));i.paint&&(i.paint=Object.assign({},o.paint,i.paint)),i.layout&&(i.layout=Object.assign({},o.layout,i.layout)),Object.assign(o,i),r++}}this._createStyleFunction()}},{key:"setStyle",value:function(e){this.layersBySourceLayer={},this._loadStyle(e)}},{key:"_loadStyle",value:function(e){var t=this;"[object Object]"==Object.prototype.toString.call(e)?(this._mbStyle=e,this._resolve()):cn.get(e).then(function(e){return e.json()}).then(function(e){t._mbStyle=e,t._resolve()})}},{key:"_resolve",value:function(){var e=this;if(this.source||(this.source=Object.keys(this._mbStyle.sources)[0]),this._mbStyle.sprite){var t=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"";this._mbStyle.sprite=this._mbStyle.sprite.replace("@2x","");var r=this._toSpriteUrl(this._mbStyle.sprite,this.path,t+".json");cn.get(r).then(function(e){return e.json()}).then(function(r){e._spriteData=r,e._spriteImageUrl=e._toSpriteUrl(e._mbStyle.sprite,e.path,t+".png"),e._spriteImage=null;var n=new Image;n.crossOrigin="anonymous",n.onload=function(){e._spriteImage=n,e._initStyleFunction()},n.src=e._spriteImageUrl})}else this._initStyleFunction()}},{key:"_initStyleFunction",value:function(){if(!this.resolutions&&this._mbStyle.metadata&&this._mbStyle.metadata.indexbounds){for(var e=this._mbStyle.metadata.indexbounds,t=Math.max(e[2]-e[0],e[3]-e[1]),r=[],n=0;n<30;n++)r.push(t/512/Math.pow(2,n));this.resolutions=r}this._createStyleFunction(),this.dispatchEvent("styleloaded")}},{key:"_createStyleFunction",value:function(){this.map&&window.olms.applyBackground(this.map,this._mbStyle),this.featureStyleFuntion=this._getStyleFunction()}},{key:"_getStyleFunction",value:function(){var e=this;return this.fun=window.olms.stylefunction({setStyle:function(){},set:function(){},changed:function(){}},this._mbStyle,this.source,this.resolutions,this._spriteData,"",this._spriteImage),function(t,r){var n=e.fun(t,r);if(e.selectedObjects.length>0&&e.selectedObjects.find(function(e){return e.id===t.getId()&&e.sourceLayer===t.get("layer")})){var o=n&&n[0]?n[0].getZIndex():99999,i=e.selectedStyle(t,r);Array.isArray(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];"Point"===t.getGeometry().getType()&&n[0].getText()&&s.getText()&&(s.setFill(null),s.setStroke(null),s.setImage(),s.getText().setText(n[0].getText().getText())),s.setZIndex(o)}return i}return n}}},{key:"_withPath",value:function(e,t){return t&&0!=e.indexOf("http")&&(e=t+e),e}},{key:"_toSpriteUrl",value:function(e,t,r){var n=(e=this._withPath(e,t)).match(this.spriteRegEx);return n?n[1]+r+(n.length>2?n[2]:""):e+r}}])&&ND(r.prototype,n),i&&ND(r,i),t}();
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function UD(e){return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HD(e,t){return!t||"object"!==UD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zD(e){return(zD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qD(e,t){return(qD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var JD=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),HD(this,zD(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qD(e,t)}(t,u),r=t,(n=[{key:"code",value:function(e,t){var r=this;new oo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).code(r.url+"/geocoding",e)}},{key:"decode",value:function(e,t){var r=this;new oo(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).decode(r.url+"/geodecoding",e)}}])&&VD(r.prototype,n),o&&VD(r,o),t}();function WD(e){return(WD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XD(e,t){return!t||"object"!==WD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QD(e){return(QD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KD(e,t){return(KD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ZD=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XD(this,QD(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KD(e,t)}(t,u),r=t,(n=[{key:"queryChart",value:function(e,t,r){var n=this,o=n._processParams(e),i=n._processFormat(r);new ca(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).processAsync(o)}},{key:"getChartFeatureInfo",value:function(e){var t=this,r=t.url.concat();new Ki(r+="/chartFeatureInfoSpecs",{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}},{key:"_processParams",value:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.filter&&(e.chartQueryFilterParameters=aj.isArray(e.filter)?e.filter:[e.filter]),e.bounds&&(e.bounds=new Me(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3]))}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}}])&&YD(r.prototype,n),o&&YD(r,o),t}();function $D(e){return($D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tG(e,t){return!t||"object"!==$D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rG(e){return(rG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nG(e,t){return(nG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tG(this,rG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nG(e,t)}(t,u),r=t,(n=[{key:"getFeaturesByIDs",value:function(e,t,r){var n=this;new Rh(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByBounds",value:function(e,t,r){var n=this;new qf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByBuffer",value:function(e,t,r){var n=this;new ih(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesBySQL",value:function(e,t,r){var n=this;new Wh(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByGeometry",value:function(e,t,r){var n=this;new gh(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;new Es(n+="/datasources/"+o+"/datasets/"+i,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=aj.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry=aj.toSuperMapGeometry(JSON.parse((new KM.a).writeGeometry(e.geometry)))),e.editType&&(e.editType=e.editType.toLowerCase()),e.features){var r=[];aj.isArray(e.features)?e.features.map(function(e){return r.push(t._createServerFeature(e)),e}):r.push(t._createServerFeature(e.features)),e.features=r}return e}},{key:"_createServerFeature",value:function(e){var t={},r=[],n=[],o=e.getProperties();for(var i in o)i!==e.getGeometryName()&&(r.push(i),n.push(o[i]));return t.fieldNames=r,t.fieldValues=n,e.getId()&&(t.id=e.getId()),t.geometry=aj.toSuperMapGeometry((new KM.a).writeFeatureObject(e)),t}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}}])&&eG(r.prototype,n),o&&eG(r,o),t}();function iG(e){return(iG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sG(e,t){return!t||"object"!==iG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lG(e){return(lG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uG(e,t){return(uG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var cG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sG(this,lG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uG(e,t)}(t,u),r=t,(n=[{key:"getFields",value:function(e,t){var r=this;new ep(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()}},{key:"getFieldStatisticsInfo",value:function(e,t){var r=this,n=e.fieldName,o=e.statisticMode;o&&!aj.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=t,o.forEach(function(t){r.currentStatisticResult[t]=null,r._fieldStatisticRequest(e.datasource,e.dataset,n,t)})}},{key:"_fieldStatisticRequest",value:function(e,t,r,n){var o=this;new _u(o.url,{eventListeners:{scope:o,processCompleted:o._processCompleted,processFailed:o._statisticsCallback},crossOrigin:o.options.crossOrigin,headers:o.options.headers,datasource:e,dataset:t,field:r,statisticMode:n}).processAsync()}},{key:"_processCompleted",value:function(e){var t=this,r=!0,n=e.result;for(var o in this.currentStatisticResult&&null==t.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),t.currentStatisticResult)if(null==t.currentStatisticResult[o]){r=!1;break}r&&t._statisticsCallback({result:t.currentStatisticResult})}}])&&aG(r.prototype,n),o&&aG(r,o),t}();function fG(e){return(fG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pG(e,t){return!t||"object"!==fG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yG(e){return(yG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dG(e,t){return(dG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var mG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pG(this,yG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dG(e,t)}(t,u),r=t,(n=[{key:"getGridCellInfos",value:function(e,t){if(!e)return null;var r=this;new up(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&hG(r.prototype,n),o&&hG(r,o),t}();function vG(e){return(vG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gG(e,t){return!t||"object"!==vG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SG(e){return(SG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wG(e,t){return(wG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var _G=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gG(this,SG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wG(e,t)}(t,u),r=t,(n=[{key:"getLayersInfo",value:function(e){var t=this;new kd(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()}},{key:"setLayerInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=e.tempLayerName,i=e.layerInfo;if(n&&o){var a=r.url.concat();new bg(a+="/tempLayersSet/"+n+"/"+o,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(i)}}}},{key:"setLayersInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!o||n)&&i)new Pg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},resourceID:n,isTempLayers:o}).processAsync(i)}}},{key:"setLayerStatus",value:function(e,t){if(e){var r=this;new Ng(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}])&&bG(r.prototype,n),o&&bG(r,o),t}();function OG(e){return(OG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CG(e,t){return!t||"object"!==OG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TG(e){return(TG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PG(e,t){return(PG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var EG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),CG(this,TG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PG(e,t)}(t,u),r=t,(n=[{key:"measureDistance",value:function(e,t){this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,r){var n=this;new pv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,measureMode:t,eventListeners:{scope:n,processCompleted:r,processFailed:r}}).processAsync(n._processParam(e))}},{key:"_processParam",value:function(e){return e&&e.geometry&&(e.geometry=aj.toSuperMapGeometry(JSON.parse((new KM.a).writeGeometry(e.geometry)))),e}}])&&xG(r.prototype,n),o&&xG(r,o),t}();function kG(e){return(kG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jG(e,t){return!t||"object"!==kG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AG(e){return(AG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RG(e,t){return(RG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var LG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jG(this,AG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RG(e,t)}(t,u),r=t,(n=[{key:"sinksFacilityAnalyst",value:function(e,t){var r=this;new Hs(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"sourcesFacilityAnalyst",value:function(e,t){var r=this;new nl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceUpFacilityAnalyst",value:function(e,t){var r=this;new Bl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceDownFacilityAnalyst",value:function(e,t){var r=this;new Tl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"upstreamFacilityAnalyst",value:function(e,t){var r=this;new eu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&MG(r.prototype,n),o&&MG(r,o),t}();function IG(e){return(IG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FG(e,t){return!t||"object"!==IG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DG(e){return(DG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GG(e,t){return(GG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var BG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),FG(this,DG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GG(e,t)}(t,u),r=t,(n=[{key:"burstPipelineAnalyst",value:function(e,t){var r=this;new zi(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"computeWeightMatrix",value:function(e,t){var r=this;new Pa(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"findClosestFacilities",value:function(e,t,r){var n=this;new ju(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"streamFacilityAnalyst",value:function(e,t,r){var n=this;new hl(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findLocation",value:function(e,t,r){var n=this;new Bu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findPath",value:function(e,t,r){var n=this;new oc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findTSPPaths",value:function(e,t,r){var n=this;new _c(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findMTSPPaths",value:function(e,t,r){var n=this;new Xu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findServiceAreas",value:function(e,t,r){var n=this;new pc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"updateEdgeWeight",value:function(e,t){var r=this;new C_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"updateTurnNodeWeight",value:function(e,t){var r=this;new L_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.centers&&aj.isArray(e.centers)&&e.centers.map(function(t,r){return e.centers[r]=t instanceof XM.a?{x:t.getCoordinates()[0],y:t.getCoordinates()[1]}:t,e.centers[r]}),e.nodes&&aj.isArray(e.nodes)&&e.nodes.map(function(t,r){return e.nodes[r]=t instanceof XM.a?{x:t.getCoordinates()[0],y:t.getCoordinates()[1]}:t,e.nodes[r]}),e.event&&e.event instanceof XM.a&&(e.event={x:e.event.getCoordinates()[0],y:e.event.getCoordinates()[1]}),e.facilities&&aj.isArray(e.facilities)&&e.facilities.map(function(t,r){return e.facilities[r]=t instanceof XM.a?{x:t.getCoordinates()[0],y:t.getCoordinates()[1]}:t,e.facilities[r]}),e.parameter&&e.parameter.barrierPoints){var t=e.parameter.barrierPoints;aj.isArray(t)?t.map(function(t,r){return e.parameter.barrierPoints[r]=t instanceof XM.a?{x:t.getCoordinates()[0],y:t.getCoordinates()[1]}:t,e.parameter.barrierPoints[r]}):e.parameter.barrierPoints=[t instanceof XM.a?{x:t.getCoordinates()[0],y:t.getCoordinates()[1]}:t]}return e}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}}])&&NG(r.prototype,n),o&&NG(r,o),t}();function UG(e){return(UG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HG(e,t){return!t||"object"!==UG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zG(e){return(zG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qG(e,t){return(qG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var JG=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=HG(this,zG(t).call(this,e,r))).kernelDensityJobs={},n.summaryMeshJobs={},n.queryJobs={},n.summaryRegionJobs={},n.vectorClipJobs={},n.overlayGeoJobs={},n.buffersJobs={},n.topologyValidatorJobs={},n.summaryAttributesJobs={},n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qG(e,t)}(t,u),r=t,(n=[{key:"getKernelDensityJobs",value:function(e,t){var r=this,n=r._processFormat(t);new wm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new wm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new wm(o.url,{proxy:o.proxy,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:a}).addKernelDensityJob(i,r)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var r=this,n=r._processFormat(t);new bS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new bS(n.url,{proxy:n.options.proxy,crossOrigin:n.options.crossOrigin,headers:n.options.headers,withCredentials:n.options.withCredentials,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new bS(o.url,{proxy:o.proxy,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:a}).addSummaryMeshJob(i,r)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var r=this,n=r._processFormat(t);new qg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new qg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new qg(o.url,{proxy:o.proxy,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:a}).addQueryJob(i,r)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var r=this,n=r._processFormat(t);new PS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new PS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new PS(o.url,{proxy:o.proxy,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:a}).addSummaryRegionJob(i,r)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var r=this,n=r._processFormat(t);new H_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new H_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new H_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,serverType:o.options.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(i,r)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var r=this,n=r._processFormat(t);new kv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new kv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new kv(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,serverType:o.options.serverType,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:a}).addOverlayGeoJob(i,r)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var r=this,n=r._processFormat(t);new Ei(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new Ei(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new Ei(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,serverType:o.options.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:a}).addBuffersJob(i,r)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var r=this,n=r._processFormat(t);new Qw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new Qw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new Qw(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,serverType:o.options.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:a}).addTopologyValidatorJob(i,r)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var r=this,n=r._processFormat(t);new uS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new uS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new uS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,serverType:o.options.serverType,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:a}).addSummaryAttributesJob(i,r)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=aj.toSuperMapBounds(e.bounds)),e.query&&(e.query=aj.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=aj.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=aj.toProcessingParam(e.geometryClip)),e):{}}}])&&VG(r.prototype,n),o&&VG(r,o),t}();function WG(e){return(WG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XG(e,t){return!t||"object"!==WG(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QG(e){return(QG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KG(e,t){return(KG=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ZG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XG(this,QG(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KG(e,t)}(t,u),r=t,(n=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){var n=this;new Co(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"bufferAnalysis",value:function(e,t,r){var n=this;new li(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"densityAnalysis",value:function(e,t,r){var n=this;new gs(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"generateSpatialData",value:function(e,t,r){var n=this;new jc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"geoRelationAnalysis",value:function(e,t,r){var n=this;new _f(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"interpolationAnalysis",value:function(e,t,r){var n=this;new hm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"mathExpressionAnalysis",value:function(e,t,r){var n=this;new ov(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"overlayAnalysis",value:function(e,t,r){var n=this;new Sv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"routeCalculateMeasure",value:function(e,t,r){var n=this;new Zb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"routeLocate",value:function(e,t,r){var n=this;new sg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"surfaceAnalysis",value:function(e,t,r){var n=this;new NS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"terrainCurvatureCalculate",value:function(e,t,r){var n=this;new qS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"thiessenAnalysis",value:function(e,t,r){var n=this;new Pw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=this,o=new Lw(n.url,{serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}),i=[],a=0;a<e.length;a++){var s=e[a];i.push({analystName:s.analystName,param:n._processParams(s.param)})}o.processAsync(i)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.bounds&&(e.bounds=aj.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var r=e.inputPoints[t];aj.isArray(r)?e.inputPoints[t]={x:r[0],y:r[1],tag:r[2]}:e.inputPoints[t]={x:r.getCoordinates()[0],y:r.getCoordinates()[1],tag:r.tag}}if(e.points)for(var n=0;n<e.points.length;n++){var o=e.points[n];aj.isArray(o)&&o.setCoordinates(o),e.points[n]=new nt(o.getCoordinates()[0],o.getCoordinates()[1])}if(e.point){var i=e.point;aj.isArray(i)&&i.setCoordinates(i),e.point=new nt(i.getCoordinates()[0],i.getCoordinates()[1])}if(e.extractRegion&&(e.extractRegion=this.convertGeometry(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=this.convertGeometry(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=this.convertGeometry(e.clipParam.clipRegion)),e.sourceGeometry){var a=null;e.sourceGeometrySRID&&(a=e.sourceGeometrySRID),e.sourceGeometry=this.convertGeometry(e.sourceGeometry),a&&(e.sourceGeometry.SRID=a),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=this.convertGeometry(e.operateGeometry)),e.sourceGeometries){for(var s=[],l=0;l<e.sourceGeometries.length;l++)s.push(this.convertGeometry(e.sourceGeometries[l]));e.sourceGeometries=s}if(e.operateGeometries){for(var u=[],c=0;c<e.operateGeometries.length;c++)u.push(this.convertGeometry(e.operateGeometries[c]));e.operateGeometries=u}if(e.sourceRoute&&e.sourceRoute instanceof MD.a&&e.sourceRoute.getCoordinates()){var f={type:"LINEM"};f.parts=[e.sourceRoute.getCoordinates()[0].length],f.points=[];for(var h=0;h<e.sourceRoute.getCoordinates()[0].length;h++){var p=e.sourceRoute.getCoordinates()[0][h];f.points=f.points.concat({x:p[0],y:p[1],measure:p[2]})}e.sourceRoute=f}var y=this;return e.operateRegions&&aj.isArray(e.operateRegions)&&e.operateRegions.map(function(t,r){return e.operateRegions[r]=y.convertGeometry(t),e.operateRegions[r]}),e.sourceRoute&&e.sourceRoute.components&&aj.isArray(e.sourceRoute.components)&&e.sourceRoute.components.map(function(t,r){return e.sourceRoute.components[r]=y.convertGeometry(t),e.sourceRoute.components[r]}),e}},{key:"_processFormat",value:function(e){return e||f.GEOJSON}},{key:"convertGeometry",value:function(e){return-1!=["FeatureCollection","Feature","Geometry"].indexOf(e.type)?aj.toSuperMapGeometry(e):aj.toSuperMapGeometry(JSON.parse((new KM.a).writeGeometry(e)))}}])&&YG(r.prototype,n),o&&YG(r,o),t}();function $G(e){return($G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tB(e,t){return!t||"object"!==$G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rB(e){return(rB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nB(e,t){return(nB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oB=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tB(this,rB(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nB(e,t)}(t,u),r=t,(n=[{key:"getThemeInfo",value:function(e,t){var r=this;new Sw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&eB(r.prototype,n),o&&eB(r,o),t}();function iB(e){return(iB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sB(e,t){return!t||"object"!==iB(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lB(e){return(lB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uB(e,t){return(uB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var cB=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sB(this,lB(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uB(e,t)}(t,u),r=t,(n=[{key:"queryStop",value:function(e,t){var r=this;new eS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferPath",value:function(e,t){var r=this;new s_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"analysisTransferSolution",value:function(e,t){var r=this;new m_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.transferLines&&!aj.isArray(e.transferLines)&&(e.transferLines=[e.transferLines]),e.points&&aj.isArray(e.points)&&e.points.map(function(t,r){return e.points[r]=t instanceof XM.a?{x:t.getCoordinates()[0],y:t.getCoordinates()[1]}:t,e.points[r]}),e):{}}}])&&aB(r.prototype,n),o&&aB(r,o),t}(),fB=r(56),hB=r(57),pB=r(35),yB=r.n(pB),dB=r(29),mB=r(58),vB=r.n(mB),bB=r(5),gB=r(36),SB=r.n(gB),wB=r(37),_B=r(6),OB=r(59),xB=r.n(OB);
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function CB(e){return(CB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TB(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function PB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EB(e){return(EB=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MB(e,t){return(MB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/window.proj4=CI,window.Proj4js=CI;var jB=new KM.a,AB=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=EB(t).call(this))||"object"!==CB(i)&&"function"!=typeof i?kB(o):i).mapId=e,r=r||{},n.server=r.server||"https://www.supermapol.com",n.successCallback=r.successCallback,n.errorCallback=r.errorCallback,n.credentialKey=r.credentialKey,n.credentialValue=r.credentialValue,n.withCredentials=r.withCredentials||!1,n.target=r.target||"map",n.excludePortalProxyUrl=r.excludePortalProxyUrl||!1,n.tiandituKey=r.tiandituKey,n.layerAdded=0,n.events=new Zt(kB(n),null,["updateDataflowFeature"],!0),n.createMap(r.mapSetting),n.createWebmap(),n}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MB(e,t)}(t,o.a),r=t,(n=[{key:"createMap",value:function(e){var t,r,n;e&&(n=e.interactions,t=e.overlays,r=e.controls),this.map=new Cj.a({interactions:n,overlays:t,controls:r,target:this.target}),e&&this.registerMapEvent({mapClickCallback:e.mapClickCallback})}},{key:"registerMapEvent",value:function(e){this.map.on("click",function(t){e.mapClickCallback&&e.mapClickCallback(t)})}},{key:"createWebmap",value:function(){var e=this.server.split("");"/"!==e[e.length-1]&&(this.server+="/");var t=this.server+"web/maps/"+this.mapId+"/map",r="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.server.indexOf(r)>-1){var n=this.server.split(r);n.length>1&&(t=n[0]+r+this.server+"web/maps/"+this.mapId+"/map.json")}this.getMapInfo(t)}},{key:"getMapInfo",value:function(e){var t=this,r=e;-1===e.indexOf(".json")&&(r="".concat(e,".json")),cn.get(t.getRequestUrl(r),null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){!1!==e.succeed?("EPSG:910111"===e.projection||"EPSG:910112"===e.projection?e.projection="EPSG:3857":"EPSG:910101"!==e.projection&&"EPSG:910102"!==e.projection||(e.projection="EPSG:4326"),t.baseProjection=e.projection,t.mapParams={title:e.title,description:e.description},CI&&(dB&&dB.register?dB.register(CI):window.ol.proj.setProj4(CI)),0===e.projection.indexOf("EPSG")&&e.projection.split(":")[1]<=0?t.createSpecLayer(e):t.addProjctionFromWKT(e.projection)?(e.projection=t.baseProjection=t.getEpsgInfoFromWKT(e.projection),e.baseLayer&&"MAPBOXSTYLE"===e.baseLayer.layerType?t.addMVTBaseMap(e).then(function(){e.layers&&0!==e.layers.length?t.addLayers(e):t.sendMapToUser(0),t.createView(e)}):(t.addBaseMap(e),e.layers&&0!==e.layers.length?t.addLayers(e):t.sendMapToUser(0),t.createView(e))):t.errorCallback&&t.errorCallback({type:"Not support CS",errorMsg:"Not support CS: ".concat(e.projection)},"getMapFaild",t.map)):t.errorCallback&&t.errorCallback(e.error,"getMapFaild",t.map)}).catch(function(e){t.errorCallback&&t.errorCallback(e,"getMapFaild",t.map)})}},{key:"createSpecLayer",value:function(e){var t=this,r=e.baseLayer,n=r.url,o=r.layerType,i=[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y],a=new TM.Projection({extent:i,units:"m",code:"EPSG:0"});TM.addProjection(a);var s={center:e.center,level:0};t.baseProjection=a;var l={center:s.center?[s.center.x,s.center.y]:[0,0],zoom:0,projection:a};["4","5"].includes(aj.getOlVersion())||(l.multiWorld=!0);var u,c=new yB.a(l);t.map.setView(c),t.mapParams&&(t.mapParams.extent=i,t.mapParams.projection=e.projection),"TILE"===o?cn.get(t.getRequestUrl("".concat(n,".json")),null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){r.originResult=e,u=new SA({url:r.url,tileGrid:SA.optionsFromMapJSON(r.url,r.originResult).tileGrid}),t.addSpecToMap(u)}).catch(function(e){t.errorCallback&&t.errorCallback(e,"getMapFaild",t.map)}):"WMS"===o?(u=t.createWMSSource(r),t.addSpecToMap(u)):"WMTS"===o?cn.get(t.getRequestUrl(n),null,{withCredentials:this.withCredentials}).then(function(e){return e.text()}).then(function(n){r.extent=[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y],r.scales=t.getWMTSScales(r.tileMatrixSet,n),r.dpi=90.6,u=t.createWMTSSource(r),t.addSpecToMap(u)}).catch(function(e){t.errorCallback&&t.errorCallback(e,"getMapFaild",t.map)}):t.errorCallback&&t.errorCallback({type:"Not support CS",errorMsg:"Not support CS: ".concat(o)},"getMapFaild",t.map)}},{key:"addSpecToMap",value:function(e){var t=new bB.Tile({source:e,zIndex:0});t&&this.map.addLayer(t),this.sendMapToUser(0)}},{key:"getWMTSScales",value:function(e,t){for(var r=(new SB.a).read(t).Contents.TileMatrixSet,n=[],o=0;o<r.length;o++)if(r[o].Identifier===e){for(var i=0;i<r[o].TileMatrix.length;i++)n.push(r[o].TileMatrix[i].ScaleDenominator);break}return n}},{key:"addBaseMap",value:function(e){var t=this.createBaseLayer(e,null,!1);if(t&&this.map.addLayer(t),this.mapParams){var r=[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y];this.mapParams.extent=r,this.mapParams.projection=e.projection}if(e.baseLayer&&e.baseLayer.labelLayerVisible){var n=e.baseLayer,o=new bB.Tile({source:this.createTiandituSource(n,n.layerType,e.projection,!0),zIndex:n.zIndex||0,visible:n.visible});this.map.addLayer(o)}}},{key:"addMVTBaseMap",value:function(e){var t=this;return this.getMBStyle(e).then(function(e){return t.createMVTLayer(e).then(function(r){var n=aj.newGuid(8);e.name&&r.setProperties({name:e.name,layerID:n,layerType:"VECTOR_TILE"}),e.layer=r,e.layerID=n,t.map.addLayer(r)})})}},{key:"createView",value:function(e){var t,r,n=e.center,o=void 0!==e.level?e.level:1,i=e.maxZoom||22,a=this.baseProjection,s=[];for(var l in n)s.push(n[l]);if(0===s.length&&(s=[0,0]),this.baseLayerExtent=t=e.baseLayer&&e.baseLayer.extent,this.mapParams&&(this.mapParams.extent=t,this.mapParams.projection=a),e.baseLayer&&["TILE","MAPBOXSTYLE"].includes(e.baseLayer.layerType)&&t&&4===t.length){var u=(t[2]-t[0])/512,c=(t[3]-t[1])/512;r=Math.max(u,c)}e.baseLayer.visibleScales&&e.baseLayer.visibleScales.length>0&&(i=e.baseLayer.visibleScales.length);var f={zoom:o,center:s,projection:a,extent:t,maxResolution:r,maxZoom:i};["4","5"].includes(aj.getOlVersion())||(f.multiWorld=!0),this.map.setView(new yB.a(f))}},{key:"createBaseLayer",value:function(e,t,r,n){var o,i,a,s=this;if(n&&(s=n),e.baseLayer){if(a=!0,"TILE"!==e.baseLayer.layerType&&"WMS"!==e.baseLayer.layerType&&"WMTS"!==e.baseLayer.layerType)this.getInternetMapInfo(e.baseLayer);else{if("WMTS"===e.baseLayer.layerType&&!r)return void this.getWmtsInfo(e.baseLayer,this.createBaseLayer,e);if("TILE"===e.baseLayer.layerType&&!r)return void this.getTileInfo(e.baseLayer,this.createBaseLayer,e);e.baseLayer.projection=e.projection,e.baseLayer.extent=[e.extent.leftBottom.x,e.extent.leftBottom.y,e.extent.rightTop.x,e.extent.rightTop.y]}i=e.baseLayer,s.createView(e)}else i=e;var l=i.layerType;switch((l.indexOf("TIANDITU_VEC")>-1||l.indexOf("TIANDITU_IMG")>-1||l.indexOf("TIANDITU_TER")>-1)&&(l=l.substr(0,12)),l){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":o=this.createTiandituSource(i,l,e.projection);break;case"BAIDU":o=this.createBaiduSource();break;case"BING":o=this.createBingSource(i,e.projection);break;case"WMS":o=this.createWMSSource(i);break;case"WMTS":o=s.createWMTSSource(i);break;case"TILE":case"SUPERMAP_REST":o=s.createDynamicTiledSource(i,a);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":o=this.createXYZSource(i)}var u=new bB.Tile({source:o,zIndex:i.zIndex||1,visible:i.visible}),c=aj.newGuid(8);return i.name&&u.setProperties({name:i.name,layerID:c}),e.baseLayer?u.setProperties({layerType:l}):(u.setVisible(i.visible),i.opacity&&u.setOpacity(i.opacity),t&&u.setZIndex(t)),i.layer=u,i.layerID=c,r&&(u.setZIndex(0),s.map.addLayer(u)),u}},{key:"getInternetMapInfo",value:function(e){var t=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],r=[-20037508.34,-20037508.34,20037508.34,20037508.34];switch(e.units="m",e.layerType){case"BAIDU":e.iServerUrl="https://map.baidu.com/",e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=19,e.level=1,e.extent=t;break;case"CLOUD":e.url="http://t2.supermapcloud.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=18,e.level=1,e.extent=t;break;case"CLOUD_BLACK":e.url="http://t3.supermapcloud.com/MapService/getGdp?x={x}&y={y}&z={z}",e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=18,e.level=1,e.extent=t;break;case"tencent":e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=18,e.level=1,e.extent=t;break;case"TIANDITU_VEC_3857":case"TIANDITU_IMG_3857":case"TIANDITU_TER_3857":e.iserverUrl="https://map.tianditu.gov.cn/",e.epsgCode="EPSG:3857",e.minZoom=0,e.maxZoom=19,e.level=1,e.extent=t,"TIANDITU_TER_3857"===e.layerType&&(e.maxZoom=14);break;case"TIANDITU_VEC_4326":case"TIANDITU_IMG_4326":case"TIANDITU_TER_4326":e.iserverUrl="https://map.tianditu.gov.cn/",e.epsgCode="EPSG:4326",e.minZoom=0,e.maxZoom=19,e.level=1,e.extent=[-180,-90,180,90],"TIANDITU_TER_4326"===e.layerType&&(e.maxZoom=14);break;case"OSM":e.url="http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=19,e.level=1,e.extent=r,e.iserverUrl="https://www.openstreetmap.org";break;case"GOOGLE":e.url="https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=22,e.level=1,e.extent=r,e.iserverUrl="https://www.google.cn/maps";break;case"JAPAN_STD":e.url="https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",e.epsgCode="EPSG:3857",e.minZoom=1,e.maxZoom=19,e.level=0,e.extent=r;break;case"JAPAN_PALE":e.url="https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",e.epsgCode="EPSG:3857",e.minZoom=2,e.maxZoom=19,e.level=2,e.extent=r;break;case"JAPAN_RELIEF":e.url="https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",e.epsgCode="EPSG:3857",e.minZoom=5,e.maxZoom=14,e.level=5,e.extent=[12555667.53929,1281852.98656,17525908.86651,7484870.70596];break;case"JAPAN_ORT":e.url="https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg",e.epsgCode="EPSG:3857",e.minZoom=2,e.maxZoom=12,e.level=2,e.extent=[-19741117.14519,-10003921.36848,19981677.71404,19660983.56089]}}},{key:"createDynamicTiledSource",value:function(e,t){var r="IPORTAL",n=e.credential,o="Token",i=e.url;(e.url.indexOf("www.supermapol.com")>-1||e.url.indexOf("itest.supermapol.com")>-1)&&(o="Key",i=[i],r="ONLINE"),n&&hn["register".concat(o)](i,n);var a={transparent:!0,url:e.url,wrapX:!1,serverType:r,crossOrigin:"anonymous",prjCoordSys:{epsgCode:t?e.projection.split(":")[1]:this.baseProjection.split(":")[1]}};if(e.visibleScales&&e.visibleScales.length>0){var s=this.getReslutionsFromScales(e.visibleScales,96,e.coordUnit),l=new Rj.a({extent:e.extent,resolutions:s.res});e.visibleResolutions=s.res,a.tileGrid=l}else a.extent=this.baseLayerExtent;e.url&&!this.isSameDomain(e.url)&&(a.tileProxy=this.server+"apps/viewer/getUrlResource.png?url=");var u=new SA(a);return hn["register".concat(o)](e.url),u}},{key:"createTiandituSource",value:function(e,t,r,n){var o={layerType:t.split("_")[1].toLowerCase(),isLabel:n||!1,projection:r,url:"https://t{0-7}.tianditu.gov.cn/{layer}_{proj}/wmts?tk=".concat(this.tiandituKey)};return new pA(o)}},{key:"createBaiduSource",value:function(){return new Gj}},{key:"createBingSource",value:function(e,t){return new _B.XYZ({wrapX:!1,projection:t,crossOrigin:"anonymous",tileUrlFunction:function(e){var t=TB(e),r=t[0],n=t[1],o=t[2];o=o>0?o-1:-o-1;for(var i="",a=r;a>0;a--){var s=0,l=1<<a-1;0!=(n&l)&&s++,0!=(o&l)&&(s+=2),i+=s.toString()}return"https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadKey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z".replace("{quadKey}",i)}})}},{key:"createXYZSource",value:function(e){return new _B.XYZ({url:e.url,wrapX:!1,crossOrigin:"anonymous"})}},{key:"createWMSSource",value:function(e){return new _B.TileWMS({url:e.url,wrapX:!1,params:{LAYERS:e.layers?e.layers[0]:"0",FORMAT:"image/png"},projection:e.projection||this.baseProjection,tileLoadFunction:function(e,t){e.getImage().src=t}})}},{key:"getLayerExtent",value:function(e,t){var r=this,n=e.url.trim();if("TILE"===e.layerType){var o={epsgCode:r.baseProjection.split(":")[1]};n+=".json?prjCoordSys="+encodeURI(JSON.stringify(o))}else n+=n.indexOf("?")>-1?"&SERVICE=WMS&REQUEST=GetCapabilities":"?SERVICE=WMS&REQUEST=GetCapabilities";var i={withCredentials:this.withCredentials,withoutFormatSuffix:!0};cn.get(r.getRequestUrl(n),null,i).then(function(t){return"TILE"===e.layerType?t.json():t.text()}).then(function(n){"TILE"===e.layerType?(e.extent=[n.bounds.left,n.bounds.bottom,n.bounds.right,n.bounds.top],e.projection="EPSG:".concat(n.prjCoordSys.epsgCode),t(e)):(e.projection=r.baseProjection,t(e))})}},{key:"getTileInfo",value:function(e,t,r){var n=this,o={withCredentials:this.withCredentials,withoutFormatSuffix:!0};cn.get(n.getRequestUrl("".concat(e.url,".json")),null,o).then(function(e){return e.json()}).then(function(o){e.projection=r.projection,e.extent=[r.extent.leftBottom.x,r.extent.leftBottom.y,r.extent.rightTop.x,r.extent.rightTop.y],o.visibleScales&&(e.visibleScales=o.visibleScales,e.coordUnit=o.coordUnit),r?t(r,null,!0,n):t(e)}).catch(function(e){n.errorCallback&&n.errorCallback(e,"getWmtsFaild",n.map)})}},{key:"getWmtsInfo",value:function(e,t,r){var n=this;cn.get(n.getRequestUrl(e.url),null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(o){var i=(new SB.a).read(o);if(n.isValidResponse(i)){for(var a,s=i.Contents,l=s.TileMatrixSet,u=s.Layer,c=0;c<u.length;c++)if(u[c].Title===e.name){var f=u[a=c].WGS84BoundingBox;break}for(var h=[],p=0;p<l.length;p++)if(l[p].Identifier===e.tileMatrixSet){for(var y="EPSG:".concat(l[p].SupportedCRS.split("::")[1]),d=0;d<l[p].TileMatrix.length;d++)h.push(l[p].TileMatrix[d].ScaleDenominator);var m=l[p].TileMatrix[0].TopLeftCorner;e.origin="EPSG:4326"===y?[m[1],m[0]]:m;break}var v=e.name,b=TM.transformExtent(f,"EPSG:4326",n.baseProjection),g=[][a];e.dpi=90.7,e.extent=b,e.format="image/png",e.matrixSet=g,e.name=v,e.orginEpsgCode=e.projection,e.overLayer=!0,e.requestEncoding="KVP",e.scales=h,e.style="default",e.title=v,e.unit="m",e.zIndex=a,r?t(r,null,!0,n):t(e)}}).catch(function(e){n.errorCallback&&n.errorCallback(e,"getWmtsFaild",n.map)})}},{key:"createWMTSSource",value:function(e){var t=e.extent||TM.get(e.projection).getExtent(),r=TM.get(this.baseProjection).getUnits();return new _B.WMTS({url:e.url,layer:e.layer,format:"image/png",matrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding||"KVP",tileGrid:this.getWMTSTileGrid(t,e.scales,r,e.dpi,e.origin),tileLoadFunction:function(e,t){e.getImage().src=t}})}},{key:"getWMTSTileGrid",value:function(e,t,r,n,o){var i=this.getReslutionsFromScales(t,n||96,r);return new sA.a({origin:o,extent:e,resolutions:i.res,matrixIds:i.matrixIds})}},{key:"getReslutionsFromScales",value:function(e,t,r,n){r=r&&r.toLowerCase()||"degrees",t=t>0?t:96,n=n||6378137;var o=[],i=[];if(aj.isArray(e))e&&e.forEach(function(e,a){i.push(a),o.push(this.getResolutionFromScale(e,t,r,n))},this);else{var a=e.TileMatrix;a&&a.forEach(function(e){i.push(e.Identifier),o.push(this.getResolutionFromScale(e.ScaleDenominator,t,r,n))},this)}return{res:o,matrixIds:i}}},{key:"getResolutionFromScale",value:function(e,t,r,n){return e=(e=+e)>1?1/e:e,"degrees"===r||"dd"===r||"degree"===r?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4}},{key:"isValidResponse",value:function(e){for(var t=["Contents","OperationsMetadata"],r=!0,n=0;n<t.length;n++)if(!e[t[n]]||e.error){r=!1;break}return r}},{key:"addLayers",value:function(e){var t=e.layers,r=this,n=[],o=t.length;o>0&&(this.layers=t,t.forEach(function(e,t){var i=t+1,a=e.dataSource,s=a&&"SAMPLE_DATA"===a.type&&!!a.name;if(a&&a.serverId||"MARKER"===e.layerType||"HOSTED_TILE"===e.layerType||s){var l=e.dataSource,u=l?l.serverId:e.serverId;if(!u&&!s)return r.addLayer(e,null,i),r.layerAdded++,void r.sendMapToUser(o);if("MARKER"===e.layerType||l&&(!l.accessType||"DIRECT"===l.accessType)||s){var c=s?"".concat(r.server,"apps/dataviz/libs/sample-datas/").concat(l.name,".json"):"".concat(r.server,"web/datas/").concat(u,"/content.json?pageSize=9999999&currentPage=1");c=r.getRequestUrl(c),cn.get(c,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(t){if(!1===t.succeed)return r.layerAdded++,r.sendMapToUser(o),void(r.errorCallback&&r.errorCallback(t.error,"getLayerFaild",r.map));t&&t.type&&("JSON"===t.type||"GEOJSON"===t.type?(t.content=t.content.type?t.content:JSON.parse(t.content),n=r.geojsonToFeature(t.content,e)):"EXCEL"!==t.type&&"CSV"!==t.type||(n=r.excelData2Feature(t.content,e)),r.addLayer(e,n,i),r.layerAdded++,r.sendMapToUser(o))}).catch(function(e){r.layerAdded++,r.sendMapToUser(o),r.errorCallback&&r.errorCallback(e,"getLayerFaild",r.map)})}else{var f="HOSTED_TILE"===e.layerType,h=l?l.serverId:e.serverId;r.checkUploadToRelationship(h).then(function(t){if(t&&t.length>0){var n=t[0].name,a=t[0].type.toUpperCase();r.getDataService(h,n).then(function(t){var s=t.dataItemServices;if(0===s.length)return r.layerAdded++,r.sendMapToUser(o),void(r.errorCallback&&r.errorCallback(null,"getLayerFaild",r.map));if(f){var l=r.getService(s,"RESTDATA");r.isMvt(l.address,n).then(function(t){r.getServiceInfoFromLayer(i,o,e,s,n,a,t)}).catch(function(){r.getServiceInfoFromLayer(i,o,e,s,n,a)})}else r.getServiceInfoFromLayer(i,o,e,s,n,a)})}else r.layerAdded++,r.sendMapToUser(o),r.errorCallback&&r.errorCallback(null,"getLayerFaild",r.map)}).catch(function(e){r.layerAdded++,r.sendMapToUser(o),r.errorCallback&&r.errorCallback(e,"getLayerFaild",r.map)})}}else"SUPERMAP_REST"===e.layerType||"TILE"===e.layerType||"WMS"===e.layerType||"WMTS"===e.layerType?("WMTS"===e.layerType?r.getWmtsInfo(e,function(e){r.map.addLayer(r.createBaseLayer(e,i))}):r.getLayerExtent(e,function(e){r.map.addLayer(r.createBaseLayer(e,i))}),r.layerAdded++,r.sendMapToUser(o)):e.dataSource&&"REST_DATA"===e.dataSource.type?r.getFeaturesFromRestData(e,i,o):e.dataSource&&"REST_MAP"===e.dataSource.type&&e.dataSource.url?aj.queryFeatureBySQL(e.dataSource.url,e.dataSource.layerName,"smid=1",null,null,function(t){var n=t&&t.result.recordsets,a=n&&n[0],s=a.fields;if(a&&s){var l=[];for(var u in s){var c=s[u];0===c.indexOf("Sm")&&"SmID"!==c||l.push(c)}r.getFeatures(l,e,function(t){r.addLayer(e,t,i),r.layerAdded++,r.sendMapToUser(o)},function(e){r.layerAdded++,r.errorCallback&&r.errorCallback(e,"getFeatureFaild",r.map)})}},function(e){r.errorCallback&&r.errorCallback(e,"getFeatureFaild",r.map)}):"DATAFLOW_POINT_TRACK"!==e.layerType&&"DATAFLOW_HEAT"!==e.layerType||r.getDataflowInfo(e,function(){r.addLayer(e,n,i),r.layerAdded++,r.sendMapToUser(o)},function(e){r.layerAdded++,r.errorCallback&&r.errorCallback(e,"getFeatureFaild",r.map)})},this))}},{key:"getServiceInfoFromLayer",value:function(e,t,r,n,o,i,a){var s=this,l=a?!a.isMvt:"HOSTED_TILE"===r.layerType,u=!1;n.forEach(function(n){if(!u)if(n&&l&&"RESTMAP"===n.serviceType)u=!0,s.getTileLayerInfo(n.address).then(function(n){n.forEach(function(n){var o=n.bounds;r.layerType="TILE",r.orginEpsgCode=s.baseProjection,r.units=n.coordUnit&&n.coordUnit.toLowerCase(),r.extent=[o.left,o.bottom,o.right,o.top],r.visibleScales=n.visibleScales,r.url=n.url,r.sourceType="TILE",s.map.addLayer(s.createBaseLayer(r,e)),s.layerAdded++,s.sendMapToUser(t)})});else if(n&&!l&&"RESTDATA"===n.serviceType)if(u=!0,a&&a.isMvt){var c=a.bounds;r=Object.assign(r,{layerType:"VECTOR_TILE",epsgCode:a.epsgCode,projection:"EPSG:".concat(a.epsgCode),bounds:c,extent:[c.left,c.bottom,c.right,c.top],name:r.name,url:a.url,visible:r.visible,featureType:i,serverId:r.serverId.toString()}),s.map.addLayer(s.addVectorTileLayer(r,e,"RESTDATA")),s.layerAdded++,s.sendMapToUser(t)}else u=!0,s.getDatasources(n.address).then(function(i){r.dataSource.dataSourceName=i+":"+o,r.dataSource.url="".concat(n.address,"/data"),s.getFeaturesFromRestData(r,e,t)})}),u||(s.layerAdded++,s.sendMapToUser(t),s.errorCallback&&s.errorCallback(null,"getLayerFaild",s.map))}},{key:"getDataflowInfo",value:function(e,t,r){var n,o=e.url,i=this.getRequestUrl("".concat(o,".json"));e.credential&&e.credential.token&&(n=e.credential.token,i+="?token=".concat(n)),cn.get(i,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(n){n&&n.featureMetaData?(e.featureType=n.featureMetaData.featureType.toUpperCase(),e.dataSource={dataTypes:{}},n.featureMetaData.fieldInfos&&n.featureMetaData.fieldInfos.length>0&&n.featureMetaData.fieldInfos.forEach(function(t){var r=t.name.trim();"TEXT"===t.type?e.dataSource.dataTypes[r]="STRING":["DOUBLE","INT","FLOAT","LONG","SHORT"].includes(t.type)?e.dataSource.dataTypes[r]="NUMBER":e.dataSource.dataTypes[r]="UNKNOWN"}),e.wsUrl=n.urls[0].url,e.name=n.urls[0].url.split("iserver/services/")[1].split("/dataflow")[0],t()):r()}).catch(function(){r()})}},{key:"getFeaturesFromRestData",value:function(e,t,r){var n=this,o=e.dataSource,i=e.dataSource.url,a=o.dataSourceName||e.name,s=n.getRequestUrl(i);aj.getFeatureBySQL(s,[a],function(o){var i=n.parseGeoJsonData2Feature({allDatas:{features:o.result.features.features},fileCode:e.projection,featureProjection:n.baseProjection});n.addLayer(e,i,t),n.layerAdded++,n.sendMapToUser(r)},function(e){n.layerAdded++,n.sendMapToUser(r),n.errorCallback&&n.errorCallback(e,"getFeatureFaild",n.map)})}},{key:"getFeatures",value:function(e,t,r,n){var o=this,i=t.dataSource,a=t.projection;aj.queryFeatureBySQL(i.url,i.layerName,null,e,null,function(e){var t=e.result.recordsets[0].features.features,n=o.parseGeoJsonData2Feature({allDatas:{features:t},fileCode:a,featureProjection:o.baseProjection},"JSON");r(n)},function(e){n(e)})}},{key:"sendMapToUser",value:function(e){this.layerAdded===e&&this.successCallback&&this.successCallback(this.map,this.mapParams,this.layers)}},{key:"excelData2Feature",value:function(e,t){var r=e.rows,n=e.colTitles;for(var o in n)aj.isString(n[o])&&(n[o]=aj.trim(n[o]));for(var i=t.projection,a=n.indexOf(aj.trim(t.xyField&&t.xyField.xField||t.from&&t.from.xField)),s=n.indexOf(aj.trim(t.xyField&&t.xyField.yField||t.from&&t.from.yField)),l=this.baseProjection,u=[],c=0,f=r.length;c<f;c++){var h=r[c],p={},y=r[c][a],d=r[c][s];if(""!==y&&""!==d){var m=new wB.Point([+y,+d]);i!==l&&m.transform(i,l);for(var v=0,b=h.length;v<b;v++)p[n[v]]=h[v];var g=new UI.a({geometry:m,attributes:p});u.push(g)}}return u}},{key:"geojsonToFeature",value:function(e,t){for(var r=e.features,n=[],o=0,i=r.length;o<i;o++){var a=r[o].properties||{};delete r[o].properties;var s=jB.readFeature(r[o],{dataProjection:t.projection||"EPSG:4326",featureProjection:this.baseProjection||"ESPG:4326"}),l=s.getGeometry().getCoordinates();"Point"===r[o].geometry.type&&r[o].properties&&(r[o].properties.lon=l[0],r[o].properties.lat=l[1]);var u=!1,c=void 0,f=void 0;r[o].dv_v5_markerInfo&&(c=Object.assign({},r[o].dv_v5_markerInfo,a)).lon&&(delete c.lon,delete c.lat),r[o].dv_v5_markerStyle&&(f=r[o].dv_v5_markerStyle,u=!0);var h=void 0;if(u)h=Object.assign({},{attributes:c},{useStyle:f}),s.layerId=t.timeId;else if(t.featureStyles){var p=JSON.parse(t.featureStyles[o].style),y=a,d=void 0;y._smiportal_imgLinkUrl.indexOf("http://")>-1||y._smiportal_imgLinkUrl.indexOf("https://")>-1?d=y._smiportal_imgLinkUrl:void 0!==y._smiportal_imgLinkUrl&&null!==y._smiportal_imgLinkUrl&&""!==y._smiportal_imgLinkUrl&&(d="".concat(aj.getIPortalUrl(),"resources/markerIcon/").concat(y._smiportal_imgLinkUrl)),c={dataViz_description:y._smiportal_description,dataViz_imgUrl:d,dataViz_title:y._smiportal_title,dataViz_url:y._smiportal_otherLinkUrl},p.anchor=[.5,1],p.src=p.externalGraphic,f=p,h=Object.assign({},{attributes:c},{useStyle:f}),delete y._smiportal_description,delete y._smiportal_imgLinkUrl,delete y._smiportal_title,delete y._smiportal_otherLinkUrl}else h={attributes:a};s.setProperties(h),n.push(s)}return n}},{key:"parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,r=[],n=0,o=t.length;n<o;n++){var i=t[n].properties;delete t[n].properties;var a=jB.readFeature(t[n],{dataProjection:e.fileCode||"EPSG:4326",featureProjection:e.featureProjection||aj.getBaseLayerProj()||"EPSG:4326"}),s=a.getGeometry().getCoordinates();"Point"===t[n].geometry.type&&(i.lon=s[0],i.lat=s[1]),a.setProperties({attributes:i}),r.push(a)}return r}},{key:"addLayer",value:function(e,t,r){var n;"VECTOR"===e.layerType?n="POINT"===e.featureType?"SYMBOL_POINT"===e.style.type?this.createSymbolLayer(e,t):this.createGraphicLayer(e,t):this.createVectorLayer(e,t):"UNIQUE"===e.layerType?n=this.createUniqueLayer(e,t):"RANGE"===e.layerType?n=this.createRangeLayer(e,t):"HEAT"===e.layerType?n=this.createHeatLayer(e,t):"MARKER"===e.layerType?n=this.createMarkerLayer(e,t):"DATAFLOW_POINT_TRACK"===e.layerType?n=this.createDataflowLayer(e,r):"DATAFLOW_HEAT"===e.layerType?n=this.createDataflowHeatLayer(e):"RANK_SYMBOL"===e.layerType?n=this.createRankSymbolLayer(e,t):"MIGRATION"===e.layerType&&(n=this.createMigrationLayer(e,t));var o=aj.newGuid(8);if(n){if(e.name&&n.setProperties({name:e.name,layerID:o,layerType:e.layerType}),e&&e.style&&e.style.imageInfo){var i=new Image;i.src=e.style.imageInfo.url,i.onload=function(){n.getSource().refresh()}}"MIGRATION"===e.layerType?(n.appendTo(this.map),n.setVisible(e.visible),n.setCursor()):(void 0!=e.opacity&&n.setOpacity(e.opacity),n.setVisible(e.visible),this.map.addLayer(n)),n.setZIndex(r)}e.layer=n,e.layerID=o,e.labelStyle&&e.labelStyle.labelField&&"DATAFLOW_POINT_TRACK"!==e.layerType&&(t=e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t,this.addLabelLayer(e,t))}},{key:"addVectorTileLayer",value:function(e,t,r){var n;"RESTDATA"===r&&(n=this.createDataVectorTileLayer(e));var o=aj.newGuid(8);return n&&(e.name&&n.setProperties({name:e.name,layerID:o}),void 0!=e.opacity&&n.setOpacity(e.opacity),n.setVisible(e.visible),n.setZIndex(t)),e.layer=n,e.layerID=o,n}},{key:"createDataVectorTileLayer",value:function(e){var t=new yD.a({featureClass:UI.a});yD.a.prototype.readProjection=function(){return new TM.Projection({code:"",units:vB.a.TILE_PIXELS})};var r=e.featureType,n=Oj.toOpenLayersStyle(this.getDataVectorTileStyle(r),r);return new bB.VectorTile({source:new _D({url:e.url,projection:e.projection,tileType:"ScaleXY",format:t}),style:n})}},{key:"getDataVectorTileStyle",value:function(e){var t={radius:8,fillColor:"#EE4D5A",fillOpacity:.9,strokeColor:"#ffffff",strokeWidth:1,strokeOpacity:1,lineDash:"solid",type:"BASIC_POINT"};return["LINE","LINESTRING","MULTILINESTRING"].includes(e)?(t.strokeColor="#4CC8A3",t.strokeWidth=2):["REGION","POLYGON","MULTIPOLYGON"].includes(e)&&(t.fillColor="#826DBA"),t}},{key:"getFiterFeatures",value:function(e,t){for(var r="select * from json where ("+this.replaceFilterCharacter(e)+")",n=[],o=0;o<t.length;o++){var i=t[o],a=!1;try{a=window.jsonsql.query(r,{attributes:i.get("attributes")})}catch(e){continue}a&&a.length>0&&n.push(i)}return n}},{key:"replaceFilterCharacter",value:function(e){return e=e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"createGraphicLayer",value:function(e,t){t=e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t;var r=this.getGraphicsFromFeatures(t,e.style,e.featureType),n=new tF({graphics:r,render:"canvas",map:this.map,isHighLight:!1});return new bB.Image({source:n})}},{key:"getGraphicsFromFeatures",value:function(e,t,r){var n=Oj.getOpenlayersStyle(t,r).getImage(),o=[];for(var i in e){var a=new VN(e[i].getGeometry());a.setStyle(n),a.setProperties({attributes:e[i].get("attributes")}),o.push(a)}return o}},{key:"createSymbolLayer",value:function(e,t){var r=Oj.getSymbolStyle(e.style);return new bB.Vector({style:r,source:new bB.Vector({features:e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t,wrapX:!1})})}},{key:"addLabelLayer",value:function(e,t){var r=e.labelStyle,n=this.getLabelStyle(r,e),o=new bB.Vector({declutter:!0,styleOL:n,labelField:r.labelField,source:new _B.Vector({features:t,wrapX:!1})});return o.setStyle(function(e){var t=r.labelField,n=e.get("attributes")[t.trim()]+"";if("undefined"===n)return null;var i=o.get("styleOL"),a=i.getText();return a&&a.setText&&a.setText(n),i}),this.map.addLayer(o),o.setVisible(e.visible),o.setZIndex(1e3),o}},{key:"getLabelStyle",value:function(e,t){var r=t.style||t.pointStyle,n=-1.8*(r.radius||0)-(r.strokeWidth||0);return n>-20&&(n=-20),e.offsetY=n,new cj.a({text:new Sj.a({font:"14px "+e.fontFamily,placement:"point",textAlign:"center",fill:new mj.a({color:e.fill}),backgroundFill:new mj.a({color:e.backgroundFill||[255,255,255,.7]}),padding:[3,3,3,3],offsetY:e.offsetY})})}},{key:"createVectorLayer",value:function(e,t){var r=Oj.toOpenLayersStyle(e.style,e.featureType);return new bB.Vector({style:r,source:new _B.Vector({features:e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t,wrapX:!1})})}},{key:"createHeatLayer",value:function(e,t){t=e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t;var r={source:new _B.Vector({features:t,wrapX:!1})},n=e.themeSetting;r.gradient=n.colors.slice(),r.radius=parseInt(n.radius);var o=n.customSettings;for(var i in o)r.gradient[i]=o[i];return n.weight&&this.changeWeight(t,n.weight),new bB.Heatmap(r)}},{key:"changeWeight",value:function(e,t){var r=this;this.fieldMaxValue={},this.getMaxValue(e,t);var n=this.fieldMaxValue[t];e.forEach(function(e){var o=e.get("attributes");try{var i=o[t];e.set("weight",i/n)}catch(e){r.errorCallback&&r.errorCallback(e)}})}},{key:"getMaxValue",value:function(e,t){var r,n=[],o=this,i=t;this.fieldMaxValue[i]||(e.forEach(function(e){r=e.get("attributes");try{n.push(parseFloat(r[i]))}catch(e){o.errorCallback&&o.errorCallback(e)}}),this.fieldMaxValue[i]=BO.getArrayStatistic(n,"Maximum"))}},{key:"createUniqueLayer",value:function(e,t){var r=this.createUniqueSource(e,t),n=new bB.Vector({styleSource:r,source:new _B.Vector({features:e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t,wrapX:!1})});return n.setStyle(function(e){var t=n.get("styleSource"),r=t.themeField,o=e.get("attributes")[r];return t.styleGroups[o].olStyle}),n}},{key:"createUniqueSource",value:function(e,t){var r=this.getUniqueStyleGroup(e,t);return{map:this.map,style:e.style,isHoverAble:e.isHoverAble,highlightStyle:e.highlightStyle,themeField:e.themeSetting.themeField,styleGroups:r}}},{key:"getUniqueStyleGroup",value:function(e,t){var r=e.featureType,n=e.style,o=e.themeSetting,i=o.themeField,a=o.colors,s=[],l=o.customSettings;for(var u in t){var c=t[u].get("attributes")[i],f=!1;for(var h in s)if(s[h]===c){f=!0;break}f||s.push(c)}var p=a;p=DO.getGradientColors(p,s.length);var y=[];return s.forEach(function(e,t){var o=p[t];e in l&&(o=l[e]),"LINE"===r?n.strokeColor=o:n.fillColor=o;var i=Oj.toOpenLayersStyle(n,r);y[e]={olStyle:i,color:o,value:e}}),y}},{key:"createRangeLayer",value:function(e,t){var r=this.createRangeSource(e,t),n=new bB.Vector({styleSource:r,source:new _B.Vector({features:e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t,wrapX:!1})});return n.setStyle(function(e){var t=n.get("styleSource");if(t)for(var r=t.themeField,o=Number(e.get("attributes")[r.trim()]),i=t.styleGroups,a=0;a<i.length;a++)if(0===a){if(o>=i[a].start&&o<=i[a].end)return i[a].olStyle}else if(o>i[a].start&&o<=i[a].end)return i[a].olStyle}),n}},{key:"createRangeSource",value:function(e,t){var r=this.getRangeStyleGroup(e,t);return!!r&&{style:e.style,themeField:e.themeSetting.themeField,styleGroups:r}}},{key:"getRangeStyleGroup",value:function(e,t){var r,n,o=e.featureType,i=e.themeSetting,a=e.style,s=i.segmentCount,l=i.segmentMethod,u=i.colors,c=i.customSettings,f=i.themeField,h=[],p=s,y=l,d=this;t.forEach(function(e){r=e.get("attributes");try{if(r){var t=r[f.trim()];t&&aj.isNumber(t)&&h.push(parseFloat(t))}else e.get(f)&&aj.isNumber(e.get(f))&&e.get(f)&&h.push(parseFloat(e.get(f)))}catch(e){d.errorCallback&&d.errorCallback(e)}});try{n=BO.getArraySegments(h,y,p)}catch(e){d.errorCallback&&d.errorCallback(e)}if(n){var m=p;for(var v in r&&n[0]===n[r.length-1]&&(m=1,n.length=2),n){var b=n[v];b=0===Number(v)?Math.floor(100*b)/100:Math.ceil(100*b)/100+.1,n[v]=Number(b.toFixed(2))}var g=u;g=DO.getGradientColors(g,m,"RANGE");for(var S=0;S<m;S++)S in c&&(c[S].segment.start&&(n[S]=c[S].segment.start),c[S].segment.end&&(n[S+1]=c[S].segment.end));for(var w=[],_=0;_<m;_++){var O=g[_];_ in c&&c[_].color&&(O=c[_].color),"LINE"===o?a.strokeColor=O:a.fillColor=O;var x=Oj.toOpenLayersStyle(a,o),C=n[_],T=n[_+1];w.push({olStyle:x,color:O,start:C,end:T})}return w}return!1}},{key:"createMarkerLayer",value:function(e,t){return t&&this.setEachFeatureDefaultStyle(t),new bB.Vector({source:new _B.Vector({features:t,wrapX:!1})})}},{key:"createDataflowLayer",value:function(e,t){var r,n=e.pointStyle;r=Oj.getOpenlayersStyle(n,e.featureType);var o,i,a,s,l=new _B.Vector({wrapX:!1}),u=new bB.Vector({styleOL:r,source:l});e.labelStyle&&e.visible&&((o=this.addLabelLayer(e)).setZIndex(1e3),i=o.getSource()),e.lineStyle&&e.visible&&(a=this.createVectorLayer({style:e.lineStyle,featureType:"LINE"}),s=a.getSource(),a.setZIndex(t),this.map.addLayer(a));var c=this;return this.createDataflowService(e,function(t,r,n){return function(o){if(c.events.triggerEvent("updateDataflowFeature",{feature:o,identifyField:e.identifyField,layerID:e.layerID}),e.filterCondition){var a="select * from json where ("+c.replaceFilterCharacter(e.filterCondition)+")",u=window.jsonsql.query(a,{attributes:o.get("attributes")});u&&u.length>0&&c.addDataflowFeature(o,e.identifyField,{dataflowSource:l,featureCache:t,labelSource:i,labelFeatureCache:r,pathSource:s,pathFeatureCache:n,maxPointCount:e.maxPointCount})}else c.addDataflowFeature(o,e.identifyField,{dataflowSource:l,featureCache:t,labelSource:i,labelFeatureCache:r,pathSource:s,pathFeatureCache:n,maxPointCount:e.maxPointCount})}}({},{},{})),this.setFeatureStyle(u,e.directionField,n.type),u}},{key:"addDataflowFeature",value:function(e,t,r){r.dataflowSource&&this.addFeatureFromDataflowService(r.dataflowSource,e,t,r.featureCache),r.labelSource&&this.addFeatureFromDataflowService(r.labelSource,e,t,r.labelFeatureCache),r.pathSource&&this.addPathFeature(r.pathSource,e,t,r.pathFeatureCache,r.maxPointCount)}},{key:"addPathFeature",value:function(e,t,r,n,o){var i=[],a=t.get(r);n[a]?((i=n[a].getGeometry().getCoordinates()).push(t.getGeometry().getCoordinates()),o&&i.length>o&&i.splice(0,i.length-o),n[a].getGeometry().setCoordinates(i)):(i.push(t.getGeometry().getCoordinates()),n[a]=new UI.a({geometry:new wB.LineString(i)}),e.addFeature(n[a]))}},{key:"setFeatureStyle",value:function(e,t,r){var n=e.get("styleOL");e.setStyle(function(e){var o,i;if((o=void 0!==t&&"æªè®¾ç½®"!==t&&"None"!==t?e.get("attributes")[t]:0)>360||o<0)return null;i="SYMBOL_POINT"===r?n.getText():n.getImage();var a=Math.PI*o/180;return i&&i.setRotation(a),n})}},{key:"createDataflowHeatLayer",value:function(e){var t={source:this.createDataflowHeatSource(e)};if(t.gradient=e.themeSetting.colors.slice(),t.radius=parseInt(e.themeSetting.radius),e.themeSetting.customSettings){var r=e.themeSetting.customSettings;for(var n in r)t.gradient[n]=r[n]}return new bB.Heatmap(t)}},{key:"createDataflowHeatSource",value:function(e){var t=this,r=new _B.Vector({wrapX:!1});return this.createDataflowService(e,function(n){return function(o){if(e.filterCondition){var i="select * from json where ("+t.replaceFilterCharacter(e.filterCondition)+")",a=window.jsonsql.query(i,{attributes:o.get("attributes")});a&&a.length>0&&t.addDataflowFeature(o,e.identifyField,{dataflowSource:r,featureCache:n})}else t.addDataflowFeature(o,e.identifyField,{dataflowSource:r,featureCache:n});e.themeSetting.weight&&t.changeWeight(r.getFeatures(),e.themeSetting.weight)}}({})),r}},{key:"addFeatureFromDataflowService",value:function(e,t,r,n){var o=t.get(r);void 0!==o&&n[o]?(n[o].setGeometry(t.getGeometry()),n[o].setProperties(t.getProperties()),e.changed()):(e.addFeature(t),n[o]=t)}},{key:"createDataflowService",value:function(e,t){var r=this;new jI(e.wsUrl).initSubscribe().on("messageSucceeded",function(e){var n=JSON.parse(e.value.data),o=jB.readFeature(n,{dataProjection:"EPSG:4326",featureProjection:r.baseProjection||"EPSG:4326"});o.setProperties({attributes:n.properties}),t(o)})}},{key:"setEachFeatureDefaultStyle",value:function(e){var t=this;(e=aj.isArray(e)||e instanceof xB.a?e:[e]).forEach(function(e){var r=e.getGeometry().getType().toUpperCase(),n=e.getProperties().useStyle;if(n){"POINT"===r&&n.text&&(r="TEXT");var o=this.setFeatureInfo(e);e.setProperties({useStyle:n,attributes:o}),"POINT"===r&&n.src&&-1===n.src.indexOf("http://")&&-1===n.src.indexOf("https://")&&(n.src=t.server+n.src)}else n=Oj.getMarkerDefaultStyle(r,t.server);e.setStyle(Oj.toOpenLayersStyle(n,r))},this)}},{key:"setFeatureInfo",value:function(e){var t=e.get("attributes"),r=Object.assign({dataViz_title:"",dataViz_description:"",dataViz_imgUrl:"",dataViz_url:""},t),n=e.getProperties();for(var o in r)n[o]&&(r[o]=n[o],delete n[o]);return r}},{key:"createRankSymbolLayer",value:function(e,t){var r=this.createRankStyleSource(e,t,e.featureType),n=new bB.Vector({styleSource:r,source:new _B.Vector({features:e.filterCondition?this.getFiterFeatures(e.filterCondition,t):t,wrapX:!1}),renderMode:"image"});return n.setStyle(function(e){for(var t=n.get("styleSource"),r=t.parameters.themeSetting.themeField,o=Number(e.get("attributes")[r]),i=t.styleGroups,a=0,s=i.length;a<s;a++)if(o>=i[a].start&&o<i[a].end)return t.styleGroups[a].olStyle}),n}},{key:"createRankStyleSource",value:function(e,t,r){var n=e.themeSetting.themeField,o=this.getRankStyleGroup(n,t,e,r);return!!o&&{parameters:e,styleGroups:o}}},{key:"getRankStyleGroup",value:function(e,t,r,n){var o=[],i=[],a=r.style,s=r.themeSetting,l=s.segmentMethod||this.defaultParameters.themeSetting.segmentMethod,u=s.segmentCount||this.defaultParameters.themeSetting.segmentCount,c=s.customSettings,f=r.themeSetting.minRadius,h=r.themeSetting.maxRadius;t.forEach(function(t){var r=t.get("attributes")[e];null!=r&&aj.isNumber(r)&&o.push(Number(r))});try{i=BO.getArraySegments(o,l,u)}catch(e){console.error(e)}for(var p=0;p<u;p++)if(p in c){var y=c[p].segment.start,d=c[p].segment.end;null!=y&&(i[p]=y),null!=d&&(i[p+1]=d)}var m=[];if(i&&i.length){for(var v,b,g=i.length,S=(h-f)/(g-1),w=Number(((h+f)/2).toFixed(2)),_=0;_<g-1;_++){w=(v=Number(i[_].toFixed(2)))===(b=Number(i[_+1].toFixed(2)))?w:f+Math.round(S*_),b=_===g-2?b+.01:b,w=c[_]&&c[_].radius?c[_].radius:w,a.radius=w;var O=Oj.getOpenlayersStyle(a,n,!0);m.push({olStyle:O,radius:w,start:v,end:b})}return m}return!1}},{key:"checkUploadToRelationship",value:function(e){var t=this.getRequestUrl("".concat(this.server,"web/datas/").concat(e,"/datasets.json"));return cn.get(t,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){return e})}},{key:"getDatasources",value:function(e){var t=this.getRequestUrl("".concat(e,"/data/datasources.json"));return cn.get(t,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){return e.datasourceNames[0]})}},{key:"getDataService",value:function(e,t){var r=this.getRequestUrl("".concat(this.server,"web/datas/").concat(e,".json"));return cn.get(r,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(r){return r.fileId=e,r.datasetName=t,r})}},{key:"getRequestUrl",value:function(e){if(this.credentialValue&&(e=-1===e.indexOf("?")?"".concat(e,"?").concat(this.credentialKey,"=").concat(this.credentialValue):"".concat(e,"&").concat(this.credentialKey,"=").concat(this.credentialValue)),!this.excludePortalProxyUrl)return Te.isInTheSameDomain(e)?e:"".concat(this.getProxy()).concat(encodeURIComponent(e))}},{key:"getProxy",value:function(){return this.server+"apps/viewer/getUrlResource.json?url="}},{key:"getTileLayerInfo",value:function(e){var t=this,r=t.baseProjection.split("EPSG:")[1],n=t.getRequestUrl("".concat(e,"/maps.json"));return cn.get(n,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){var n=[];return e&&e.forEach(function(e){var o=t.getRequestUrl("".concat(e.path,".json?prjCoordSys=").concat(encodeURI(JSON.stringify({epsgCode:r})))),i=cn.get(o,null,{withCredentials:t.withCredentials}).then(function(e){return e.json()}).then(function(t){return t.url=e.path,t});n.push(i)}),Promise.all(n).then(function(e){return e})})}},{key:"addProjctionFromWKT",value:function(e){if("string"!=typeof e)return!1;if("EPSG:4326"===e||"EPSG:3857"===e)return!0;var t=this.getEpsgInfoFromWKT(e);return!!t&&(CI.defs(t,e),!0)}},{key:"getEpsgInfoFromWKT",value:function(e){if("string"!=typeof e)return!1;if(0===e.indexOf("EPSG"))return e;var t=e.lastIndexOf("AUTHORITY")+10,r=e.indexOf("]",t)-1;return t>0&&r>0&&"EPSG:".concat(e.substring(t,r).split(",")[1].substr(1))}},{key:"createMigrationLayer",value:function(e,t){window.ol3Echarts.prototype.getContainer||(window.ol3Echarts.prototype.getContainer=function(){return this.$container}),window.ol3Echarts.prototype.setVisible||(window.ol3Echarts.prototype.setVisible=function(e){if(e){var t=this.get("options");t&&(this.setChartOptions(t),this.unset("options"))}else{var r=this.getChartOptions();this.set("options",r),this.clear(),this.setChartOptions({})}}),window.ol3Echarts.prototype.setZIndex||(window.ol3Echarts.prototype.setZIndex=function(e){var t=this.getContainer();t&&(t.style.zIndex=e)}),window.ol3Echarts.prototype.setCursor||(window.ol3Echarts.prototype.setCursor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=this.getContainer();t&&"default"===e&&t.classList.add("cursor-default")});var r=aj.getFeatureProperties(t),n=this.createLinesData(e,r),o=this.createPointsData(n,e,r),i=this.createOptions(e,n,o),a=new window.ol3Echarts(i,{hideOnMoving:!0,hideOnZooming:!0});return a.type="ECHARTS",a}},{key:"createOptions",value:function(e,t,r){var n,o=this.createLineSeries(e,t);if(r&&r.length){var i=this.createPointSeries(e,r);n=o.concat(i)}else n=o.slice();return{series:n}}},{key:"createLineSeries",value:function(e,t){var r=e.lineSetting,n=e.animationSetting,o=[{name:"line-series",type:"lines",zlevel:1,effect:{show:n.show,constantSpeed:n.constantSpeed,trailLength:0,symbol:n.symbol,symbolSize:n.symbolSize},lineStyle:{normal:{color:r.color,type:r.type,width:r.width,opacity:r.opacity,curveness:r.curveness}},data:t}];return t.length>1e3&&(o[0].large=!0,o[0].largeThreshold=100,o[0].blendMode="lighter"),o}},{key:"createPointSeries",value:function(e,t){var r=e.lineSetting,n=e.animationSetting,o=e.labelSetting,i=[{name:"point-series",coordinateSystem:"geo",zlevel:2,label:{normal:{show:o.show,position:"right",formatter:"{b}",color:o.color,fontFamily:o.fontFamily}},itemStyle:{normal:{color:r.color||o.color}},data:t}];return n.show?(i[0].type="effectScatter",i[0].rippleEffect={brushType:"stroke"}):i[0].type="scatter",i}},{key:"createPointsData",value:function(e,t,r){var n=[],o=t.labelSetting;if(!o.show||!e.length)return n;var i=[],a=[];return e.forEach(function(e,t){var n=e.coords,s=n[0],l=n[1],u=r[t][o.from],c=r[t][o.to];!i.find(function(e){return e.value[0]===s[0]&&e.value[1]===s[1]})&&i.push({name:u,value:s}),!a.find(function(e){return e.value[0]===l[0]&&e.value[1]===l[1]})&&a.push({name:c,value:l})}),n=i.concat(a)}},{key:"createLinesData",value:function(e,t){var r=[];if(t&&t.length){var n,o,i=e.from,a=e.to;if("XY_FIELD"===i.type&&i.xField&&i.yField&&a.xField&&a.yField)t.forEach(function(e){var t=e[i.xField],s=e[i.yField],l=e[a.xField],u=e[a.yField];t&&s&&l&&u&&(n=[e[i.xField],e[i.yField]],o=[e[a.xField],e[a.yField]],r.push({coords:[n,o]}))});else if("PLACE_FIELD"===i.type&&i.field&&a.field){var s=fB.concat(hB);t.forEach(function(e){var t=e[i.field],l=e[a.field];n=s.find(function(e){return aj.isMatchAdministrativeName(e.name,t)}),o=s.find(function(e){return aj.isMatchAdministrativeName(e.name,l)}),n&&o&&r.push({coords:[n.coord,o.coord]})})}}return r}},{key:"getService",value:function(e,t){return e.filter(function(e){return e&&e.serviceType===t})[0]}},{key:"isMvt",value:function(e,t){var r=this;return this.getDatasetsInfo(e,t).then(function(e){return e.epsgCode==r.baseProjection.split("EPSG:")[1]?cn.get(r.getRequestUrl("".concat(e.url,"/tilefeature.mvt")),null,{withCredentials:r.withCredentials}).then(function(e){return e.json()}).then(function(t){return e.isMvt=t.error&&400===t.error.code,e}).catch(function(){return e}):e})}},{key:"getDatasetsInfo",value:function(e,t){var r=this;return r.getDatasources(e).then(function(n){var o="".concat(e,"/data/datasources/").concat(n,"/datasets/").concat(t,".json");return cn.get(r.getRequestUrl(o),null,{withCredentials:r.withCredentials}).then(function(e){return e.json()}).then(function(e){return{epsgCode:e.datasetInfo.prjCoordSys.epsgCode,bounds:e.datasetInfo.bounds,url:o}})})}},{key:"getMBStyle",value:function(e){var t=e.baseLayer,r=t.dataSource.url,n={};return cn.get(this.getRequestUrl(r)).then(function(e){return e.json()}).then(function(o){var i=o.metadata.mapbounds;return t.extent=i,n.projection=e.projection,n.epsgCode=e.projection,n.visible=t.visible,n.name=t.name,n.url=r,n.sourceType="VECTOR_TILE",n.layerType="VECTOR_TILE",n.styles=o,n.extent=i,n.bounds={bottom:i[1],left:i[0],leftBottom:{x:i[0],y:i[1]},right:i[2],rightTop:{x:i[2],y:i[3]},top:i[3]},n})}},{key:"createMVTLayer",value:function(e){var t=e.styles,r=this.getMVTResolutions(e.bounds),n=new BD({style:t,source:t.name,resolutions:r,map:this.map});return new Promise(function(r){n.on("styleloaded",function(){var o=Object.keys(t.sources)[0]||n.name,i=t.sources[o].tiles[0],a=new bB.VectorTile({declutter:!0,source:new _B.VectorTile({url:i,projection:e.projection,format:new yD.a({featureClass:UI.a}),wrapX:!1}),style:n.featureStyleFuntion,visible:e.visible});r(a)})})}},{key:"getMVTResolutions",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22,r=e.left,n=e.right-r,o=e.top-e.bottom,i=[(n-o>0?n:o)/512],a=1;a<t;a++)i.push(i[a-1]/2);return i}},{key:"isSameDomain",value:function(e){var t=e.split("://")[1],r=t.indexOf("/"),n=t.substring(0,r),o=document.location.toString().split("://")[1],i=o.indexOf("/"),a=o.substring(0,i);if(n.indexOf(":")>-1||""!==window.location.port)return n===a;var s=n.split("."),l=a.split(".");return s[1]===l[1]&&s[2]===l[2]}}])&&PB(r.prototype,n),i&&PB(r,i),t}();
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
if(
/* CopyrightÂ© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.d(t,"ChangeTileVersion",function(){return OM}),r.d(t,"ScaleLine",function(){return LM}),r.d(t,"Logo",function(){return GM}),r.d(t,"StyleUtils",function(){return Oj}),r.d(t,"Util",function(){return aj}),r.d(t,"MapExtend",function(){return Ej}),r.d(t,"BaiduMap",function(){return Gj}),r.d(t,"ImageSuperMapRest",function(){return Qj}),r.d(t,"SuperMapCloud",function(){return nA}),r.d(t,"Tianditu",function(){return pA}),r.d(t,"TileSuperMapRest",function(){return SA}),r.d(t,"WebMap",function(){return AB}),r.d(t,"DataFlow",function(){return GI}),r.d(t,"Graph",function(){return oN}),r.d(t,"Graphic",function(){return tF}),r.d(t,"Label",function(){return yF}),r.d(t,"Mapv",function(){return RF}),r.d(t,"Range",function(){return GF}),r.d(t,"RankSymbol",function(){return qF}),r.d(t,"Turf",function(){return ZF}),r.d(t,"Unique",function(){return oD}),r.d(t,"VectorTileSuperMapRest",function(){return _D}),r.d(t,"HeatMap",function(){return ED}),r.d(t,"OverlayGraphic",function(){return VN}),r.d(t,"CloverShape",function(){return hN}),r.d(t,"HitCloverShape",function(){return bN}),r.d(t,"GraphicCanvasRenderer",function(){return NN}),r.d(t,"GraphicWebGLRenderer",function(){return EN}),r.d(t,"MapvCanvasLayer",function(){return mF}),r.d(t,"MapvLayer",function(){return PF}),r.d(t,"GeoFeature",function(){return sF}),r.d(t,"Theme",function(){return KI}),r.d(t,"ThemeFeature",function(){return HI}),r.d(t,"VectorTileStyles",function(){return cD}),r.d(t,"MapboxStyles",function(){return BD}),r.d(t,"pointStyle",function(){return zM}),r.d(t,"lineStyle",function(){return qM}),r.d(t,"polygonStyle",function(){return JM}),r.d(t,"DeafultCanvasStyle",function(){return WM}),r.d(t,"pointMap",function(){return BM}),r.d(t,"lineMap",function(){return UM}),r.d(t,"polygonMap",function(){return VM}),r.d(t,"StyleMap",function(){return HM}),r.d(t,"AddressMatchService",function(){return JD}),r.d(t,"ChartService",function(){return ZD}),r.d(t,"DataFlowService",function(){return jI}),r.d(t,"FeatureService",function(){return oG}),r.d(t,"FieldService",function(){return cG}),r.d(t,"GridCellInfosService",function(){return mG}),r.d(t,"LayerInfoService",function(){return _G}),r.d(t,"MapService",function(){return dM}),r.d(t,"MeasureService",function(){return EG}),r.d(t,"NetworkAnalyst3DService",function(){return LG}),r.d(t,"NetworkAnalystService",function(){return BG}),r.d(t,"ProcessingService",function(){return JG}),r.d(t,"QueryService",function(){return nj}),r.d(t,"ServiceBase",function(){return u}),r.d(t,"SpatialAnalystService",function(){return ZG}),r.d(t,"ThemeService",function(){return oB}),r.d(t,"TrafficTransferAnalystService",function(){return cB}),r.d(t,"SuperMap",function(){return c}),r.d(t,"DataFormat",function(){return f}),r.d(t,"ServerType",function(){return h}),r.d(t,"GeometryType",function(){return p}),r.d(t,"QueryOption",function(){return y}),r.d(t,"JoinType",function(){return d}),r.d(t,"EngineType",function(){return w}),r.d(t,"MeasureMode",function(){return b}),r.d(t,"SpatialRelationType",function(){return v}),r.d(t,"DataReturnMode",function(){return H}),r.d(t,"Unit",function(){return g}),r.d(t,"BufferRadiusUnit",function(){return S}),r.d(t,"SpatialQueryMode",function(){return m}),r.d(t,"ThemeGraphTextFormat",function(){return _}),r.d(t,"ThemeGraphType",function(){return O}),r.d(t,"GraphAxesTextDisplayMode",function(){return x}),r.d(t,"GraduatedMode",function(){return C}),r.d(t,"RangeMode",function(){return T}),r.d(t,"ThemeType",function(){return P}),r.d(t,"ColorGradientType",function(){return E}),r.d(t,"TextAlignment",function(){return k}),r.d(t,"FillGradientMode",function(){return M}),r.d(t,"SideType",function(){return I}),r.d(t,"AlongLineDirection",function(){return j}),r.d(t,"LabelBackShape",function(){return A}),r.d(t,"LabelOverLengthMode",function(){return R}),r.d(t,"DirectionType",function(){return L}),r.d(t,"OverlayOperationType",function(){return G}),r.d(t,"SupplyCenterType",function(){return N}),r.d(t,"TurnType",function(){return F}),r.d(t,"BufferEndType",function(){return D}),r.d(t,"SmoothMethod",function(){return U}),r.d(t,"SurfaceAnalystMethod",function(){return V}),r.d(t,"ColorSpaceType",function(){return Y}),r.d(t,"ChartType",function(){return oe}),r.d(t,"EditType",function(){return z}),r.d(t,"TransferTactic",function(){return q}),r.d(t,"TransferPreference",function(){return J}),r.d(t,"GridType",function(){return W}),r.d(t,"ClientType",function(){return ne}),r.d(t,"LayerType",function(){return X}),r.d(t,"UGCLayerType",function(){return Q}),r.d(t,"StatisticMode",function(){return K}),r.d(t,"PixelFormat",function(){return Z}),r.d(t,"SearchMode",function(){return $}),r.d(t,"SummaryType",function(){return ue}),r.d(t,"InterpolationAlgorithmType",function(){return ee}),r.d(t,"VariogramMode",function(){return te}),r.d(t,"Exponent",function(){return re}),r.d(t,"ClipAnalystMode",function(){return ie}),r.d(t,"AnalystAreaUnit",function(){return ae}),r.d(t,"AnalystSizeUnit",function(){return se}),r.d(t,"StatisticAnalystMode",function(){return le}),r.d(t,"TopologyValidatorRule",function(){return ce}),r.d(t,"OutputType",function(){return B}),r.d(t,"AggregationQueryBuilderType",function(){return he}),r.d(t,"AggregationType",function(){return fe}),r.d(t,"GetFeatureMode",function(){return pe}),r.d(t,"TimeFlowControl",function(){return rn}),r.d(t,"IManager",function(){return wn}),r.d(t,"IManagerServiceBase",function(){return yn}),r.d(t,"IManagerCreateNodeParam",function(){return dn}),r.d(t,"IPortal",function(){return Dn}),r.d(t,"IPortalQueryParam",function(){return xn}),r.d(t,"IPortalResource",function(){return jn}),r.d(t,"IPortalQueryResult",function(){return Cn}),r.d(t,"IPortalShareParam",function(){return An}),r.d(t,"IPortalShareEntity",function(){return Gn}),r.d(t,"IPortalServiceBase",function(){return On}),r.d(t,"IPortalUser",function(){return qn}),r.d(t,"Online",function(){return gO}),r.d(t,"OnlineData",function(){return vO}),r.d(t,"OnlineQueryDatasParameter",function(){return wO}),r.d(t,"ServiceStatus",function(){return aO}),r.d(t,"DataItemType",function(){return sO}),r.d(t,"DataItemOrderBy",function(){return lO}),r.d(t,"FilterField",function(){return uO}),r.d(t,"OnlineServiceBase",function(){return fO}),r.d(t,"KeyServiceParameter",function(){return OO}),r.d(t,"SecurityManager",function(){return hn}),r.d(t,"ServerInfo",function(){return xO}),r.d(t,"TokenServiceParameter",function(){return TO}),r.d(t,"ElasticSearch",function(){return MO}),r.d(t,"FetchRequest",function(){return cn}),r.d(t,"ColorsPickerUtil",function(){return DO}),r.d(t,"ArrayStatistic",function(){return BO}),r.d(t,"AreaSolarRadiationParameters",function(){return co}),r.d(t,"AggregationParameter",function(){return lo}),r.d(t,"AggQueryBuilderParameter",function(){return ao}),r.d(t,"BufferAnalystParameters",function(){return jo}),r.d(t,"BufferDistance",function(){return Po}),r.d(t,"BuffersAnalystJobsParameter",function(){return yi}),r.d(t,"BufferSetting",function(){return ko}),r.d(t,"BurstPipelineAnalystParameters",function(){return Mi}),r.d(t,"ChartQueryFilterParameter",function(){return $i}),r.d(t,"ChartQueryParameters",function(){return ta}),r.d(t,"ClipParameter",function(){return ha}),r.d(t,"ColorDictionary",function(){return ya}),r.d(t,"ComputeWeightMatrixParameters",function(){return Sa}),r.d(t,"DataReturnOption",function(){return Ro}),r.d(t,"DatasetBufferAnalystParameters",function(){return Yo}),r.d(t,"DatasetInfo",function(){return Ia}),r.d(t,"DatasetOverlayAnalystParameters",function(){return za}),r.d(t,"DatasetSurfaceAnalystParameters",function(){return ts}),r.d(t,"DatasetThiessenAnalystParameters",function(){return cs}),r.d(t,"DatasourceConnectionInfo",function(){return Fo}),r.d(t,"DensityKernelAnalystParameters",function(){return hs}),r.d(t,"EditFeaturesParameters",function(){return ws}),r.d(t,"FacilityAnalyst3DParameters",function(){return Ms}),r.d(t,"FacilityAnalystSinks3DParameters",function(){return Fs}),r.d(t,"FacilityAnalystSources3DParameters",function(){return Qs}),r.d(t,"FacilityAnalystStreamParameters",function(){return il}),r.d(t,"FacilityAnalystTracedown3DParameters",function(){return gl}),r.d(t,"FacilityAnalystTraceup3DParameters",function(){return Rl}),r.d(t,"FacilityAnalystUpstream3DParameters",function(){return Wl}),r.d(t,"FieldParameters",function(){return uu}),r.d(t,"FieldStatisticsParameters",function(){return du}),r.d(t,"FilterParameter",function(){return Uo}),r.d(t,"FilterAggParameter",function(){return su}),r.d(t,"FindClosestFacilitiesParameters",function(){return xu}),r.d(t,"FindLocationParameters",function(){return Ru}),r.d(t,"FindMTSPPathsParameters",function(){return Vu}),r.d(t,"FindPathParameters",function(){return Ku}),r.d(t,"FindServiceAreasParameters",function(){return ac}),r.d(t,"FindTSPPathsParameters",function(){return dc}),r.d(t,"GenerateSpatialDataParameters",function(){return xc}),r.d(t,"GeoBoundingBoxQueryBuilderParameter",function(){return Dc}),r.d(t,"GeoCodingParameter",function(){return Xn}),r.d(t,"GeoDecodingParameter",function(){return Kn}),r.d(t,"GeoHashGridAggParameter",function(){return qc}),r.d(t,"GeometryBufferAnalystParameters",function(){return ti}),r.d(t,"GeometryOverlayAnalystParameters",function(){return Zc}),r.d(t,"GeometrySurfaceAnalystParameters",function(){return af}),r.d(t,"GeometryThiessenAnalystParameters",function(){return pf}),r.d(t,"GeoRelationAnalystParameters",function(){return df}),r.d(t,"GetFeaturesByBoundsParameters",function(){return jf}),r.d(t,"GetFeaturesByBufferParameters",function(){return Zf}),r.d(t,"GetFeaturesByGeometryParameters",function(){return hh}),r.d(t,"GetFeaturesByIDsParameters",function(){return Th}),r.d(t,"GetFeaturesBySQLParameters",function(){return Bh}),r.d(t,"GetGridCellInfosParameters",function(){return rp}),r.d(t,"Grid",function(){return ld}),r.d(t,"Image",function(){return zx}),r.d(t,"InterpolationAnalystParameters",function(){return jd}),r.d(t,"InterpolationIDWAnalystParameters",function(){return Zd}),r.d(t,"InterpolationKrigingAnalystParameters",function(){return im}),r.d(t,"InterpolationRBFAnalystParameters",function(){return Dd}),r.d(t,"JoinItem",function(){return Io}),r.d(t,"KernelDensityJobParameter",function(){return ym}),r.d(t,"LabelImageCell",function(){return Em}),r.d(t,"LabelMatrixCell",function(){return _m}),r.d(t,"LabelMixedTextStyle",function(){return Cp}),r.d(t,"LabelSymbolCell",function(){return Lm}),r.d(t,"LabelThemeCell",function(){return Bm}),r.d(t,"LayerStatus",function(){return Vm}),r.d(t,"LinkItem",function(){return Go}),r.d(t,"MathExpressionAnalysisParameters",function(){return Km}),r.d(t,"MeasureParameters",function(){return av}),r.d(t,"OutputSetting",function(){return ci}),r.d(t,"MappingParameters",function(){return hi}),r.d(t,"OverlapDisplayedOptions",function(){return Ly}),r.d(t,"OverlayAnalystParameters",function(){return Fa}),r.d(t,"OverlayGeoJobParameter",function(){return _v}),r.d(t,"PointWithMeasure",function(){return Cr}),r.d(t,"QueryByBoundsParameters",function(){return Fv}),r.d(t,"QueryByDistanceParameters",function(){return ab}),r.d(t,"QueryByGeometryParameters",function(){return wb}),r.d(t,"QueryBySQLParameters",function(){return Nb}),r.d(t,"QueryParameters",function(){return na}),r.d(t,"Route",function(){return jr}),r.d(t,"RouteCalculateMeasureParameters",function(){return qb}),r.d(t,"RouteLocatorParameters",function(){return eg}),r.d(t,"ServerColor",function(){return vr}),r.d(t,"ServerFeature",function(){return ug}),r.d(t,"ServerGeometry",function(){return Rr}),r.d(t,"ServerStyle",function(){return gr}),r.d(t,"ServerTextStyle",function(){return dp}),r.d(t,"ServerTheme",function(){return td}),r.d(t,"SetLayerInfoParameters",function(){return fg}),r.d(t,"SetLayersInfoParameters",function(){return Sg}),r.d(t,"SetLayerStatusParameters",function(){return kg}),r.d(t,"SingleObjectQueryJobsParameter",function(){return Dg}),r.d(t,"StopQueryParameters",function(){return Wg}),r.d(t,"SummaryAttributesJobsParameter",function(){return rS}),r.d(t,"SummaryMeshJobParameter",function(){return fS}),r.d(t,"SummaryRegionJobParameter",function(){return SS}),r.d(t,"SupplyCenter",function(){return kS}),r.d(t,"SurfaceAnalystParameters",function(){return Ya}),r.d(t,"SurfaceAnalystParametersSetting",function(){return Ja}),r.d(t,"TerrainCurvatureCalculationParameters",function(){return DS}),r.d(t,"CommonTheme",function(){return pp}),r.d(t,"ThemeDotDensity",function(){return hy}),r.d(t,"ThemeFlow",function(){return wp}),r.d(t,"ThemeGraduatedSymbol",function(){return wy}),r.d(t,"ThemeGraduatedSymbolStyle",function(){return yy}),r.d(t,"ThemeGraph",function(){return ay}),r.d(t,"ThemeGraphAxes",function(){return Wp}),r.d(t,"ThemeGraphItem",function(){return $p}),r.d(t,"ThemeGraphSize",function(){return Xp}),r.d(t,"ThemeGraphText",function(){return Kp}),r.d(t,"ThemeGridRange",function(){return ew}),r.d(t,"ThemeGridRangeItem",function(){return WS}),r.d(t,"ThemeGridUnique",function(){return uw}),r.d(t,"ThemeGridUniqueItem",function(){return rw}),r.d(t,"ThemeLabel",function(){return Dp}),r.d(t,"ThemeLabelAlongLine",function(){return kp}),r.d(t,"ThemeLabelBackground",function(){return jp}),r.d(t,"ThemeLabelItem",function(){return vp}),r.d(t,"ThemeLabelText",function(){return Pp}),r.d(t,"ThemeLabelUniqueItem",function(){return fw}),r.d(t,"ThemeMemoryData",function(){return fp}),r.d(t,"ThemeOffset",function(){return Op}),r.d(t,"ThemeParameters",function(){return pw}),r.d(t,"ThemeRange",function(){return My}),r.d(t,"ThemeRangeItem",function(){return Oy}),r.d(t,"ThemeUnique",function(){return qp}),r.d(t,"ThemeUniqueItem",function(){return gp}),r.d(t,"ThiessenAnalystParameters",function(){return ns}),r.d(t,"TopologyValidatorJobsParameter",function(){return Hw}),r.d(t,"TransferLine",function(){return Zw}),r.d(t,"TransferPathParameters",function(){return e_}),r.d(t,"TransferSolutionParameters",function(){return u_}),r.d(t,"TransportationAnalystParameter",function(){return ba}),r.d(t,"TransportationAnalystResultSetting",function(){return ma}),r.d(t,"UGCLayer",function(){return Ay}),r.d(t,"UGCMapLayer",function(){return Uy}),r.d(t,"UGCSubLayer",function(){return Yy}),r.d(t,"UpdateEdgeWeightParameters",function(){return b_}),r.d(t,"UpdateTurnNodeWeightParameters",function(){return P_}),r.d(t,"Vector",function(){return _d}),r.d(t,"VectorClipJobsParameter",function(){return N_}),r.d(t,"FileTypes",function(){return HE}),r.d(t,"FileConfig",function(){return zE}),r.d(t,"FileModel",function(){return JE}),r.d(t,"MessageBox",function(){return YE}),r.d(t,"CommonContainer",function(){return yk}),r.d(t,"DropDownBox",function(){return Tk}),r.d(t,"Select",function(){return Sk}),r.d(t,"AttributesPopContainer",function(){return Dk}),r.d(t,"PopContainer",function(){return Ak}),r.d(t,"IndexTabsPageContainer",function(){return zk}),r.d(t,"CityTabsPage",function(){return Qk}),r.d(t,"NavTabsPage",function(){return rM}),r.d(t,"PaginationContainer",function(){return lM}),r.d(t,"ComponentsUtil",function(){return uM}),r.d(t,"FileReaderUtil",function(){return ek}),window&&window.ol){var RB=window.ol;RB.supermap=window.ol.supermap||{},RB.supermap.control=window.ol.supermap.control||{},RB.supermap.control.ChangeTileVersion=OM,RB.supermap.control.Logo=GM,RB.supermap.control.ScaleLine=LM,RB.supermap.StyleUtils=Oj,RB.supermap.Util=aj,RB.source.BaiduMap=Gj,RB.source.ImageSuperMapRest=Qj,RB.source.SuperMapCloud=nA,RB.source.Tianditu=pA,RB.source.TileSuperMapRest=SA,RB.supermap.WebMap=AB,RB.style.CloverShape=hN,RB.Graphic=VN,RB.style.HitCloverShape=bN,RB.source.GeoFeature=sF,RB.source.Theme=KI,RB.supermap.ThemeFeature=HI,RB.supermap.MapboxStyles=BD,RB.supermap.VectorTileStyles=cD,RB.source.DataFlow=GI,RB.source.Graph=oN,RB.source.Graphic=tF,RB.source.HeatMap=ED,RB.source.Label=yF,RB.source.Mapv=RF,RB.source.Range=GF,RB.source.RankSymbol=qF,RB.source.Turf=ZF,RB.source.Unique=oD,RB.source.VectorTileSuperMapRest=_D,RB.supermap.AddressMatchService=JD,RB.supermap.ChartService=ZD,RB.supermap.DataFlowService=jI,RB.supermap.FeatureService=oG,RB.supermap.FieldService=cG,RB.supermap.GridCellInfosService=mG,RB.supermap.LayerInfoService=_G,RB.supermap.MapService=dM,RB.supermap.MeasureService=EG,RB.supermap.NetworkAnalyst3DService=LG,RB.supermap.NetworkAnalystService=BG,RB.supermap.ProcessingService=JG,RB.supermap.QueryService=nj,RB.supermap.ServiceBase=u,RB.supermap.SpatialAnalystService=ZG,RB.supermap.ThemeService=oB,RB.supermap.TrafficTransferAnalystService=cB}},function(e,t){},,function(e,t){}]);